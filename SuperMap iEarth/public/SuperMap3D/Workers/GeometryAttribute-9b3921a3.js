define(["exports","./Cartesian2-59a54ee7","./Cartographic-81e9e8b2","./Check-ff445961","./when-39df26e1","./FeatureDetection-2d4141ff","./Math-5e067eb3","./Cartesian4-a56bd360","./buildModuleUrl-1b968a9d","./RuntimeError-251a1d8d"],(function(e,t,n,r,o,a,i,s,u,l){"use strict";var c=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3});function f(e,t,n,r){this[0]=o.u(e,0),this[1]=o.u(n,0),this[2]=o.u(t,0),this[3]=o.u(r,0)}f.packedLength=4,f.pack=function(e,t,n){return r.o.typeOf.object("value",e),r.o.defined("array",t),n=o.u(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t},f.unpack=function(e,t,n){return r.o.defined("array",e),t=o.u(t,0),o.e(n)||(n=new f),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n},f.clone=function(e,t){if(o.e(e))return o.e(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):new f(e[0],e[2],e[1],e[3])},f.fromArray=function(e,t,n){return r.o.defined("array",e),t=o.u(t,0),o.e(n)||(n=new f),n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],n},f.fromColumnMajorArray=function(e,t){return r.o.defined("values",e),f.clone(e,t)},f.fromRowMajorArray=function(e,t){return r.o.defined("values",e),o.e(t)?(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t):new f(e[0],e[1],e[2],e[3])},f.fromScale=function(e,t){return r.o.typeOf.object("scale",e),o.e(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=e.y,t):new f(e.x,0,0,e.y)},f.fromUniformScale=function(e,t){return r.o.typeOf.number("scale",e),o.e(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=e,t):new f(e,0,0,e)},f.fromRotation=function(e,t){r.o.typeOf.number("angle",e);var n=Math.cos(e),a=Math.sin(e);return o.e(t)?(t[0]=n,t[1]=a,t[2]=-a,t[3]=n,t):new f(n,-a,a,n)},f.toArray=function(e,t){return r.o.typeOf.object("matrix",e),o.e(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):[e[0],e[1],e[2],e[3]]},f.getElementIndex=function(e,t){return r.o.typeOf.number.greaterThanOrEquals("row",t,0),r.o.typeOf.number.lessThanOrEquals("row",t,1),r.o.typeOf.number.greaterThanOrEquals("column",e,0),r.o.typeOf.number.lessThanOrEquals("column",e,1),2*e+t},f.getColumn=function(e,t,n){r.o.typeOf.object("matrix",e),r.o.typeOf.number.greaterThanOrEquals("index",t,0),r.o.typeOf.number.lessThanOrEquals("index",t,1),r.o.typeOf.object("result",n);var o=2*t,a=e[o],i=e[o+1];return n.x=a,n.y=i,n},f.setColumn=function(e,t,n,o){r.o.typeOf.object("matrix",e),r.o.typeOf.number.greaterThanOrEquals("index",t,0),r.o.typeOf.number.lessThanOrEquals("index",t,1),r.o.typeOf.object("cartesian",n),r.o.typeOf.object("result",o);var a=2*t;return(o=f.clone(e,o))[a]=n.x,o[a+1]=n.y,o},f.getRow=function(e,t,n){r.o.typeOf.object("matrix",e),r.o.typeOf.number.greaterThanOrEquals("index",t,0),r.o.typeOf.number.lessThanOrEquals("index",t,1),r.o.typeOf.object("result",n);var o=e[t],a=e[t+2];return n.x=o,n.y=a,n},f.setRow=function(e,t,n,o){return r.o.typeOf.object("matrix",e),r.o.typeOf.number.greaterThanOrEquals("index",t,0),r.o.typeOf.number.lessThanOrEquals("index",t,1),r.o.typeOf.object("cartesian",n),r.o.typeOf.object("result",o),(o=f.clone(e,o))[t]=n.x,o[t+2]=n.y,o};var d=new t.o;f.getScale=function(e,n){return r.o.typeOf.object("matrix",e),r.o.typeOf.object("result",n),n.x=t.o.magnitude(t.o.fromElements(e[0],e[1],d)),n.y=t.o.magnitude(t.o.fromElements(e[2],e[3],d)),n};var p=new t.o;function y(e,t,n,r){this.x=o.u(e,0),this.y=o.u(t,0),this.z=o.u(n,0),this.w=o.u(r,0)}f.getMaximumScale=function(e){return f.getScale(e,p),t.o.maximumComponent(p)},f.multiply=function(e,t,n){r.o.typeOf.object("left",e),r.o.typeOf.object("right",t),r.o.typeOf.object("result",n);var o=e[0]*t[0]+e[2]*t[1],a=e[0]*t[2]+e[2]*t[3],i=e[1]*t[0]+e[3]*t[1],s=e[1]*t[2]+e[3]*t[3];return n[0]=o,n[1]=i,n[2]=a,n[3]=s,n},f.add=function(e,t,n){return r.o.typeOf.object("left",e),r.o.typeOf.object("right",t),r.o.typeOf.object("result",n),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n},f.subtract=function(e,t,n){return r.o.typeOf.object("left",e),r.o.typeOf.object("right",t),r.o.typeOf.object("result",n),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n},f.multiplyByVector=function(e,t,n){r.o.typeOf.object("matrix",e),r.o.typeOf.object("cartesian",t),r.o.typeOf.object("result",n);var o=e[0]*t.x+e[2]*t.y,a=e[1]*t.x+e[3]*t.y;return n.x=o,n.y=a,n},f.multiplyByScalar=function(e,t,n){return r.o.typeOf.object("matrix",e),r.o.typeOf.number("scalar",t),r.o.typeOf.object("result",n),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n},f.multiplyByScale=function(e,t,n){return r.o.typeOf.object("matrix",e),r.o.typeOf.object("scale",t),r.o.typeOf.object("result",n),n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.y,n[3]=e[3]*t.y,n},f.negate=function(e,t){return r.o.typeOf.object("matrix",e),r.o.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},f.transpose=function(e,t){r.o.typeOf.object("matrix",e),r.o.typeOf.object("result",t);var n=e[0],o=e[2],a=e[1],i=e[3];return t[0]=n,t[1]=o,t[2]=a,t[3]=i,t},f.abs=function(e,t){return r.o.typeOf.object("matrix",e),r.o.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t},f.equals=function(e,t){return e===t||o.e(e)&&o.e(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},f.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]},f.equalsEpsilon=function(e,t,n){return r.o.typeOf.number("epsilon",n),e===t||o.e(e)&&o.e(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n},f.IDENTITY=Object.freeze(new f(1,0,0,1)),f.ZERO=Object.freeze(new f(0,0,0,0)),f.COLUMN0ROW0=0,f.COLUMN0ROW1=1,f.COLUMN1ROW0=2,f.COLUMN1ROW1=3,Object.defineProperties(f.prototype,{length:{get:function(){return f.packedLength}}}),f.prototype.clone=function(e){return f.clone(this,e)},f.prototype.equals=function(e){return f.equals(this,e)},f.prototype.equalsEpsilon=function(e,t){return f.equalsEpsilon(this,e,t)},f.prototype.toString=function(){return"("+this[0]+", "+this[2]+")\n("+this[1]+", "+this[3]+")"};var h=new n.o;y.fromAxisAngle=function(e,t,a){r.o.typeOf.object("axis",e),r.o.typeOf.number("angle",t);var i=t/2,s=Math.sin(i),u=(h=n.o.normalize(e,h)).x*s,l=h.y*s,c=h.z*s,f=Math.cos(i);return o.e(a)?(a.x=u,a.y=l,a.z=c,a.w=f,a):new y(u,l,c,f)};var m=[1,2,0],w=new Array(3);y.fromRotationMatrix=function(e,t){r.o.typeOf.object("matrix",e);var n,i,s,u,l,c=e[a.p$1.COLUMN0ROW0],f=e[a.p$1.COLUMN1ROW1],d=e[a.p$1.COLUMN2ROW2],p=c+f+d;if(p>0)l=.5*(n=Math.sqrt(p+1)),n=.5/n,i=(e[a.p$1.COLUMN1ROW2]-e[a.p$1.COLUMN2ROW1])*n,s=(e[a.p$1.COLUMN2ROW0]-e[a.p$1.COLUMN0ROW2])*n,u=(e[a.p$1.COLUMN0ROW1]-e[a.p$1.COLUMN1ROW0])*n;else{var h=0;f>c&&(h=1),d>c&&d>f&&(h=2);var O=m[h],b=m[O];n=Math.sqrt(e[a.p$1.getElementIndex(h,h)]-e[a.p$1.getElementIndex(O,O)]-e[a.p$1.getElementIndex(b,b)]+1);var x=w;x[h]=.5*n,n=.5/n,l=(e[a.p$1.getElementIndex(b,O)]-e[a.p$1.getElementIndex(O,b)])*n,x[O]=(e[a.p$1.getElementIndex(O,h)]+e[a.p$1.getElementIndex(h,O)])*n,x[b]=(e[a.p$1.getElementIndex(b,h)]+e[a.p$1.getElementIndex(h,b)])*n,i=-x[0],s=-x[1],u=-x[2]}return o.e(t)?(t.x=i,t.y=s,t.z=u,t.w=l,t):new y(i,s,u,l)};var O=new y,b=new y,x=new y,E=new y;y.fromHeadingPitchRoll=function(e,t){return r.o.typeOf.object("headingPitchRoll",e),E=y.fromAxisAngle(n.o.UNIT_X,e.roll,O),x=y.fromAxisAngle(n.o.UNIT_Y,-e.pitch,t),t=y.multiply(x,E,x),b=y.fromAxisAngle(n.o.UNIT_Z,-e.heading,O),y.multiply(b,t,t)};var _=new n.o,v=new n.o,T=new y,S=new y,g=new y;y.packedLength=4,y.pack=function(e,t,n){return r.o.typeOf.object("value",e),r.o.defined("array",t),n=o.u(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t},y.unpack=function(e,t,n){return r.o.defined("array",e),t=o.u(t,0),o.e(n)||(n=new y),n.x=e[t],n.y=e[t+1],n.z=e[t+2],n.w=e[t+3],n},y.packedInterpolationLength=3,y.convertPackedArrayForInterpolation=function(e,t,n,r){y.unpack(e,4*n,g),y.conjugate(g,g);for(var o=0,a=n-t+1;o<a;o++){var i=3*o;y.unpack(e,4*(t+o),T),y.multiply(T,g,T),T.w<0&&y.negate(T,T),y.computeAxis(T,_);var s=y.computeAngle(T);r[i]=_.x*s,r[i+1]=_.y*s,r[i+2]=_.z*s}},y.unpackInterpolationResult=function(e,t,r,a,i){o.e(i)||(i=new y),n.o.fromArray(e,0,v);var s=n.o.magnitude(v);return y.unpack(t,4*a,S),0===s?y.clone(y.IDENTITY,T):y.fromAxisAngle(v,s,T),y.multiply(T,S,i)},y.clone=function(e,t){if(o.e(e))return o.e(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new y(e.x,e.y,e.z,e.w)},y.conjugate=function(e,t){return r.o.typeOf.object("quaternion",e),r.o.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},y.magnitudeSquared=function(e){return r.o.typeOf.object("quaternion",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},y.magnitude=function(e){return Math.sqrt(y.magnitudeSquared(e))},y.normalize=function(e,t){r.o.typeOf.object("result",t);var n=1/y.magnitude(e),o=e.x*n,a=e.y*n,i=e.z*n,s=e.w*n;return t.x=o,t.y=a,t.z=i,t.w=s,t},y.inverse=function(e,t){r.o.typeOf.object("result",t);var n=y.magnitudeSquared(e);return t=y.conjugate(e,t),y.multiplyByScalar(t,1/n,t)},y.add=function(e,t,n){return r.o.typeOf.object("left",e),r.o.typeOf.object("right",t),r.o.typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},y.subtract=function(e,t,n){return r.o.typeOf.object("left",e),r.o.typeOf.object("right",t),r.o.typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},y.negate=function(e,t){return r.o.typeOf.object("quaternion",e),r.o.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},y.dot=function(e,t){return r.o.typeOf.object("left",e),r.o.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},y.multiply=function(e,t,n){r.o.typeOf.object("left",e),r.o.typeOf.object("right",t),r.o.typeOf.object("result",n);var o=e.x,a=e.y,i=e.z,s=e.w,u=t.x,l=t.y,c=t.z,f=t.w,d=s*u+o*f+a*c-i*l,p=s*l-o*c+a*f+i*u,y=s*c+o*l-a*u+i*f,h=s*f-o*u-a*l-i*c;return n.x=d,n.y=p,n.z=y,n.w=h,n},y.multiplyByVec=function(e,t,r){var o=new n.o,a=new n.o,i=new n.o(e.x,e.y,e.z);o=n.o.cross(i,t,o),a=n.o.cross(i,o,a);var s=new n.o;s=n.o.multiplyByScalar(o,2*e.w,s);var u=new n.o;return u=n.o.multiplyByScalar(o,2,u),r=n.o.add(t,s,r),r=n.o.add(r,u,r)},y.multiplyByScalar=function(e,t,n){return r.o.typeOf.object("quaternion",e),r.o.typeOf.number("scalar",t),r.o.typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},y.divideByScalar=function(e,t,n){return r.o.typeOf.object("quaternion",e),r.o.typeOf.number("scalar",t),r.o.typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},y.computeAxis=function(e,t){r.o.typeOf.object("quaternion",e),r.o.typeOf.object("result",t);var n=e.w;if(Math.abs(n-1)<i.e.EPSILON6)return t.x=t.y=t.z=0,t;var o=1/Math.sqrt(1-n*n);return t.x=e.x*o,t.y=e.y*o,t.z=e.z*o,t},y.computeAngle=function(e){return r.o.typeOf.object("quaternion",e),Math.abs(e.w-1)<i.e.EPSILON6?0:2*Math.acos(e.w)};var D=new y;y.lerp=function(e,t,n,o){return r.o.typeOf.object("start",e),r.o.typeOf.object("end",t),r.o.typeOf.number("t",n),r.o.typeOf.object("result",o),D=y.multiplyByScalar(t,n,D),o=y.multiplyByScalar(e,1-n,o),y.add(D,o,o)};var P=new y,N=new y,C=new y;y.slerp=function(e,t,n,o){r.o.typeOf.object("start",e),r.o.typeOf.object("end",t),r.o.typeOf.number("t",n),r.o.typeOf.object("result",o);var a=y.dot(e,t),s=t;if(a<0&&(a=-a,s=P=y.negate(t,P)),1-a<i.e.EPSILON6)return y.lerp(e,s,n,o);var u=Math.acos(a);return N=y.multiplyByScalar(e,Math.sin((1-n)*u),N),C=y.multiplyByScalar(s,Math.sin(n*u),C),o=y.add(N,C,o),y.multiplyByScalar(o,1/Math.sin(u),o)},y.log=function(e,t){r.o.typeOf.object("quaternion",e),r.o.typeOf.object("result",t);var o=i.e.acosClamped(e.w),a=0;return 0!==o&&(a=o/Math.sin(o)),n.o.multiplyByScalar(e,a,t)},y.exp=function(e,t){r.o.typeOf.object("cartesian",e),r.o.typeOf.object("result",t);var o=n.o.magnitude(e),a=0;return 0!==o&&(a=Math.sin(o)/o),t.x=e.x*a,t.y=e.y*a,t.z=e.z*a,t.w=Math.cos(o),t};var I=new n.o,j=new n.o,R=new y,M=new y;y.computeInnerQuadrangle=function(e,t,o,a){r.o.typeOf.object("q0",e),r.o.typeOf.object("q1",t),r.o.typeOf.object("q2",o),r.o.typeOf.object("result",a);var i=y.conjugate(t,R);y.multiply(i,o,M);var s=y.log(M,I);y.multiply(i,e,M);var u=y.log(M,j);return n.o.add(s,u,s),n.o.multiplyByScalar(s,.25,s),n.o.negate(s,s),y.exp(s,R),y.multiply(t,R,a)},y.squad=function(e,t,n,o,a,i){r.o.typeOf.object("q0",e),r.o.typeOf.object("q1",t),r.o.typeOf.object("s0",n),r.o.typeOf.object("s1",o),r.o.typeOf.number("t",a),r.o.typeOf.object("result",i);var s=y.slerp(e,t,a,R),u=y.slerp(n,o,a,M);return y.slerp(s,u,2*a*(1-a),i)};for(var A=new y,q=1.9011074535173003,U=a.s.supportsTypedArrays()?new Float32Array(8):[],z=a.s.supportsTypedArrays()?new Float32Array(8):[],F=a.s.supportsTypedArrays()?new Float32Array(8):[],W=a.s.supportsTypedArrays()?new Float32Array(8):[],L=0;L<7;++L){var $=L+1,k=2*$+1;U[L]=1/($*k),z[L]=$/k}function Y(e,t,n){r.o.defined("array",e),r.o.defined("itemToFind",t),r.o.defined("comparator",n);for(var o,a,i=0,s=e.length-1;i<=s;)if((a=n(e[o=~~((i+s)/2)],t))<0)i=o+1;else{if(!(a>0))return o;s=o-1}return~(s+1)}function B(e,t,n,r,o){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=n,this.yPoleOffset=r,this.ut1MinusUtc=o}function G(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,n=0,r=t[n++],o=function(e,t,n,r){n||(n=" ");var o=e.length>=t?"":Array(1+t-e.length>>>0).join(n);return r?e+o:o+e},a=function(e,t,n,r,a,i){var s=r-e.length;return s>0&&(e=n||!a?o(e,r,i,n):e.slice(0,t.length)+o("",s,"0",!0)+e.slice(t.length)),e},i=function(e,t,n,r,i,s,u){var l=e>>>0;return e=(n=n&&l&&{2:"0b",8:"0",16:"0x"}[t]||"")+o(l.toString(t),s||0,"0",!1),a(e,n,r,i,u)},s=function(e,t,n,r,o,i){return null!=r&&(e=e.slice(0,r)),a(e,"",t,n,o,i)},u=function(e,r,u,l,c,f,d){var p,y,h,m,w;if("%%"==e)return"%";for(var O=!1,b="",x=!1,E=!1,_=" ",v=u.length,T=0;u&&T<v;T++)switch(u.charAt(T)){case" ":b=" ";break;case"+":b="+";break;case"-":O=!0;break;case"'":_=u.charAt(T+1);break;case"0":x=!0;break;case"#":E=!0}if((l=l?"*"==l?+t[n++]:"*"==l.charAt(0)?+t[l.slice(1,-1)]:+l:0)<0&&(l=-l,O=!0),!isFinite(l))throw new Error("sprintf: (minimum-)width must be finite");switch(f=f?"*"==f?+t[n++]:"*"==f.charAt(0)?+t[f.slice(1,-1)]:+f:"fFeE".indexOf(d)>-1?6:"d"==d?0:void 0,w=r?t[r.slice(0,-1)]:t[n++],d){case"s":return s(String(w),O,l,f,x,_);case"c":return s(String.fromCharCode(+w),O,l,f,x);case"b":return i(w,2,E,O,l,f,x);case"o":return i(w,8,E,O,l,f,x);case"x":return i(w,16,E,O,l,f,x);case"X":return i(w,16,E,O,l,f,x).toUpperCase();case"u":return i(w,10,E,O,l,f,x);case"i":case"d":return p=+w||0,w=(y=(p=Math.round(p-p%1))<0?"-":b)+o(String(Math.abs(p)),f,"0",!1),a(w,y,O,l,x);case"e":case"E":case"f":case"F":case"g":case"G":return y=(p=+w)<0?"-":b,h=["toExponential","toFixed","toPrecision"]["efg".indexOf(d.toLowerCase())],m=["toString","toUpperCase"]["eEfFgG".indexOf(d)%2],w=y+Math.abs(p)[h](f),a(w,y,O,l,x)[m]();default:return e}};return r.replace(e,u)}function Z(e,t,n,r,o,a,i,s){this.year=e,this.month=t,this.day=n,this.hour=r,this.minute=o,this.second=a,this.millisecond=i,this.isLeapSecond=s}function V(e){if(null===e||isNaN(e))throw new r.t("year is required and must be a number.");return e%4==0&&e%100!=0||e%400==0}function J(e,t){this.julianDate=e,this.offset=t}U[7]=q/136,z[7]=8*q/17,y.fastSlerp=function(e,t,n,o){r.o.typeOf.object("start",e),r.o.typeOf.object("end",t),r.o.typeOf.number("t",n),r.o.typeOf.object("result",o);var a,i=y.dot(e,t);i>=0?a=1:(a=-1,i=-i);for(var s=i-1,u=1-n,l=n*n,c=u*u,f=7;f>=0;--f)F[f]=(U[f]*l-z[f])*s,W[f]=(U[f]*c-z[f])*s;var d=a*n*(1+F[0]*(1+F[1]*(1+F[2]*(1+F[3]*(1+F[4]*(1+F[5]*(1+F[6]*(1+F[7])))))))),p=u*(1+W[0]*(1+W[1]*(1+W[2]*(1+W[3]*(1+W[4]*(1+W[5]*(1+W[6]*(1+W[7])))))))),h=y.multiplyByScalar(e,p,A);return y.multiplyByScalar(t,d,o),y.add(h,o,o)},y.fastSquad=function(e,t,n,o,a,i){r.o.typeOf.object("q0",e),r.o.typeOf.object("q1",t),r.o.typeOf.object("s0",n),r.o.typeOf.object("s1",o),r.o.typeOf.number("t",a),r.o.typeOf.object("result",i);var s=y.fastSlerp(e,t,a,R),u=y.fastSlerp(n,o,a,M);return y.fastSlerp(s,u,2*a*(1-a),i)},y.equals=function(e,t){return e===t||o.e(e)&&o.e(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},y.equalsEpsilon=function(e,t,n){return r.o.typeOf.number("epsilon",n),e===t||o.e(e)&&o.e(t)&&Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n&&Math.abs(e.w-t.w)<=n},y.ZERO=Object.freeze(new y(0,0,0,0)),y.IDENTITY=Object.freeze(new y(0,0,0,1)),y.prototype.clone=function(e){return y.clone(this,e)},y.prototype.equals=function(e){return y.equals(this,e)},y.prototype.equalsEpsilon=function(e,t){return y.equalsEpsilon(this,e,t)},y.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var X=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),H=Object.freeze({UTC:0,TAI:1}),Q=new Z,K=[31,28,31,30,31,30,31,31,30,31,30,31];function ee(e,t){return me.compare(e.julianDate,t.julianDate)}var te=new J;function ne(e){te.julianDate=e;var t=me.leapSeconds,n=Y(t,te,ee);n<0&&(n=~n),n>=t.length&&(n=t.length-1);var r=t[n].offset;n>0&&(me.secondsDifference(t[n].julianDate,e)>r&&(r=t[--n].offset));me.addSeconds(e,r,e)}function re(e,t){te.julianDate=e;var n=me.leapSeconds,r=Y(n,te,ee);if(r<0&&(r=~r),0===r)return me.addSeconds(e,-n[0].offset,t);if(r>=n.length)return me.addSeconds(e,-n[r-1].offset,t);var o=me.secondsDifference(n[r].julianDate,e);return 0===o?me.addSeconds(e,-n[r].offset,t):o<=1?void 0:me.addSeconds(e,-n[--r].offset,t)}function oe(e,t,n){var r=t/X.SECONDS_PER_DAY|0;return e+=r,(t-=X.SECONDS_PER_DAY*r)<0&&(e--,t+=X.SECONDS_PER_DAY),n.dayNumber=e,n.secondsOfDay=t,n}function ae(e,t,n,r,o,a,i){var s=(t-14)/12|0,u=e+4800+s,l=(1461*u/4|0)+(367*(t-2-12*s)/12|0)-(3*((u+100)/100|0)/4|0)+n-32075;(r-=12)<0&&(r+=24);var c=a+(r*X.SECONDS_PER_HOUR+o*X.SECONDS_PER_MINUTE+i*X.SECONDS_PER_MILLISECOND);return c>=43200&&(l-=1),[l,c]}var ie=/^(\d{4})$/,se=/^(\d{4})-(\d{2})$/,ue=/^(\d{4})-?(\d{3})$/,le=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,ce=/^(\d{4})-?(\d{2})-?(\d{2})$/,fe=/([Z+\-])?(\d{2})?:?(\d{2})?$/,de=/^(\d{2})(\.\d+)?/.source+fe.source,pe=/^(\d{2}):?(\d{2})(\.\d+)?/.source+fe.source,ye=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+fe.source,he="Invalid ISO 8601 date.";function me(e,t,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=o.u(e,0),t=o.u(t,0),n=o.u(n,H.UTC);var r=0|e;oe(r,t+=(e-r)*X.SECONDS_PER_DAY,this),n===H.UTC&&ne(this)}me.fromGregorianDate=function(e,t){if(!(e instanceof Z))throw new r.t("date must be a valid GregorianDate.");var n=ae(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return o.e(t)?(oe(n[0],n[1],t),ne(t),t):new me(n[0],n[1],H.UTC)},me.fromDate=function(e,t){if(!(e instanceof Date)||isNaN(e.getTime()))throw new r.t("date must be a valid JavaScript Date.");var n=ae(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return o.e(t)?(oe(n[0],n[1],t),ne(t),t):new me(n[0],n[1],H.UTC)},me.fromIso8601=function(e,t){if("string"!=typeof e)throw new r.t(he);var n,a,i,s,u,l=(e=e.replace(",",".")).split("T"),c=1,f=1,d=0,p=0,y=0,h=0,m=l[0],w=l[1];if(!o.e(m))throw new r.t(he);if(null!==(l=m.match(ce))){if((s=m.split("-").length-1)>0&&2!==s)throw new r.t(he);n=+l[1],c=+l[2],f=+l[3]}else if(null!==(l=m.match(se)))n=+l[1],c=+l[2];else if(null!==(l=m.match(ie)))n=+l[1];else{var O;if(null!==(l=m.match(ue))){if(n=+l[1],O=+l[2],i=V(n),O<1||i&&O>366||!i&&O>365)throw new r.t(he)}else{if(null===(l=m.match(le)))throw new r.t(he);n=+l[1];var b=+l[2],x=+l[3]||0;if((s=m.split("-").length-1)>0&&(!o.e(l[3])&&1!==s||o.e(l[3])&&2!==s))throw new r.t(he);O=7*b+x-new Date(Date.UTC(n,0,4)).getUTCDay()-3}(a=new Date(Date.UTC(n,0,1))).setUTCDate(O),c=a.getUTCMonth()+1,f=a.getUTCDate()}if(i=V(n),c<1||c>12||f<1||(2!==c||!i)&&f>K[c-1]||i&&2===c&&f>29)throw new r.t(he);if(o.e(w)){if(null!==(l=w.match(ye))){if((s=w.split(":").length-1)>0&&2!==s&&3!==s)throw new r.t(he);d=+l[1],p=+l[2],y=+l[3],h=1e3*+(l[4]||0),u=5}else if(null!==(l=w.match(pe))){if((s=w.split(":").length-1)>2)throw new r.t(he);d=+l[1],p=+l[2],y=60*+(l[3]||0),u=4}else{if(null===(l=w.match(de)))throw new r.t(he);d=+l[1],p=60*+(l[2]||0),u=3}if(p>=60||y>=61||d>24||24===d&&(p>0||y>0||h>0))throw new r.t(he);var E=l[u],_=+l[u+1],v=+(l[u+2]||0);switch(E){case"+":d-=_,p-=v;break;case"-":d+=_,p+=v;break;case"Z":break;default:p+=new Date(Date.UTC(n,c-1,f,d,p)).getTimezoneOffset()}}var T=60===y;for(T&&y--;p>=60;)p-=60,d++;for(;d>=24;)d-=24,f++;for(a=i&&2===c?29:K[c-1];f>a;)f-=a,++c>12&&(c-=12,n++),a=i&&2===c?29:K[c-1];for(;p<0;)p+=60,d--;for(;d<0;)d+=24,f--;for(;f<1;)--c<1&&(c+=12,n--),f+=a=i&&2===c?29:K[c-1];var S=ae(n,c,f,d,p,y,h);return o.e(t)?(oe(S[0],S[1],t),ne(t)):t=new me(S[0],S[1],H.UTC),T&&me.addSeconds(t,1,t),t},me.now=function(e){return me.fromDate(new Date,e)};var we=new me(0,0,H.TAI);function Oe(e){if(e=o.u(e,o.u.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=o.u(e.addNewLeapSeconds,!0),o.e(e.data))xe(this,e.data);else if(o.e(e.url)){var t=u.t.createIfNeeded(e.url),n=this;this._downloadPromise=o.o(t.fetchJson(),(function(e){xe(n,e)}),(function(){n._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."}))}else xe(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function be(e,t){return me.compare(e.julianDate,t)}function xe(e,t){if(o.e(t.columnNames))if(o.e(t.samples)){var n=t.columnNames.indexOf("modifiedJulianDateUtc"),r=t.columnNames.indexOf("xPoleWanderRadians"),a=t.columnNames.indexOf("yPoleWanderRadians"),i=t.columnNames.indexOf("ut1MinusUtcSeconds"),s=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),l=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||r<0||a<0||i<0||s<0||u<0||l<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var c=e._samples=t.samples,f=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=r,e._yPoleWanderRadiansColumn=a,e._ut1MinusUtcSecondsColumn=i,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=u,e._taiMinusUtcSecondsColumn=l,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var d,p=e._addNewLeapSeconds,y=0,h=c.length;y<h;y+=e._columnCount){var m=c[y+n],w=c[y+l],O=new me(m+X.MODIFIED_JULIAN_DATE_DIFFERENCE,w,H.TAI);if(f.push(O),p){if(w!==d&&o.e(d)){var b=me.leapSeconds,x=Y(b,O,be);if(x<0){var E=new J(O,w);b.splice(~x,0,E)}}d=w}}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function Ee(e,t,n,r,o){var a=n*r;o.xPoleWander=t[a+e._xPoleWanderRadiansColumn],o.yPoleWander=t[a+e._yPoleWanderRadiansColumn],o.xPoleOffset=t[a+e._xCelestialPoleOffsetRadiansColumn],o.yPoleOffset=t[a+e._yCelestialPoleOffsetRadiansColumn],o.ut1MinusUtc=t[a+e._ut1MinusUtcSecondsColumn]}function _e(e,t,n){return t+e*(n-t)}function ve(e,t,n,r,o,a,i){var s=e._columnCount;if(a>t.length-1)return i.xPoleWander=0,i.yPoleWander=0,i.xPoleOffset=0,i.yPoleOffset=0,i.ut1MinusUtc=0,i;var u=t[o],l=t[a];if(u.equals(l)||r.equals(u))return Ee(e,n,o,s,i),i;if(r.equals(l))return Ee(e,n,a,s,i),i;var c=me.secondsDifference(r,u)/me.secondsDifference(l,u),f=o*s,d=a*s,p=n[f+e._ut1MinusUtcSecondsColumn],y=n[d+e._ut1MinusUtcSecondsColumn],h=y-p;if(h>.5||h<-.5){var m=n[f+e._taiMinusUtcSecondsColumn],w=n[d+e._taiMinusUtcSecondsColumn];m!==w&&(l.equals(r)?p=y:y-=w-m)}return i.xPoleWander=_e(c,n[f+e._xPoleWanderRadiansColumn],n[d+e._xPoleWanderRadiansColumn]),i.yPoleWander=_e(c,n[f+e._yPoleWanderRadiansColumn],n[d+e._yPoleWanderRadiansColumn]),i.xPoleOffset=_e(c,n[f+e._xCelestialPoleOffsetRadiansColumn],n[d+e._xCelestialPoleOffsetRadiansColumn]),i.yPoleOffset=_e(c,n[f+e._yCelestialPoleOffsetRadiansColumn],n[d+e._yCelestialPoleOffsetRadiansColumn]),i.ut1MinusUtc=_e(c,p,y),i}function Te(e,t,n){this.heading=o.u(e,0),this.pitch=o.u(t,0),this.roll=o.u(n,0)}function Se(e,t,n){this.x=e,this.y=t,this.s=n}function ge(e){e=o.u(e,o.u.EMPTY_OBJECT),this._xysFileUrlTemplate=u.t.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=o.u(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=o.u(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new me(this._sampleZeroJulianEphemerisDate,0,H.TAI),this._stepSizeDays=o.u(e.stepSizeDays,1),this._samplesPerXysFile=o.u(e.samplesPerXysFile,1e3),this._totalSamples=o.u(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,n=this._denominators=new Array(t+1),r=this._xTable=new Array(t+1),a=Math.pow(this._stepSizeDays,t),i=0;i<=t;++i){n[i]=a,r[i]=i*this._stepSizeDays;for(var s=0;s<=t;++s)s!==i&&(n[i]*=i-s);n[i]=1/n[i]}this._work=new Array(t+1),this._coef=new Array(t+1)}me.toGregorianDate=function(e,t){if(!o.e(e))throw new r.t("julianDate is required.");var n=!1,a=re(e,we);o.e(a)||(me.addSeconds(e,-1,we),a=re(we,we),n=!0);var i=a.dayNumber,s=a.secondsOfDay;s>=43200&&(i+=1);var u=i+68569|0,l=4*u/146097|0,c=4e3*((u=u-((146097*l+3)/4|0)|0)+1)/1461001|0,f=80*(u=u-(1461*c/4|0)+31|0)/2447|0,d=u-(2447*f/80|0)|0,p=f+2-12*(u=f/11|0)|0,y=100*(l-49)+c+u|0,h=s/X.SECONDS_PER_HOUR|0,m=s-h*X.SECONDS_PER_HOUR,w=m/X.SECONDS_PER_MINUTE|0,O=0|(m-=w*X.SECONDS_PER_MINUTE),b=(m-O)/X.SECONDS_PER_MILLISECOND;return(h+=12)>23&&(h-=24),n&&(O+=1),o.e(t)?(t.year=y,t.month=p,t.day=d,t.hour=h,t.minute=w,t.second=O,t.millisecond=b,t.isLeapSecond=n,t):new Z(y,p,d,h,w,O,b,n)},me.toDate=function(e){if(!o.e(e))throw new r.t("julianDate is required.");var t=me.toGregorianDate(e,Q),n=t.second;return t.isLeapSecond&&(n-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,n,t.millisecond))},me.toIso8601=function(e,t){if(!o.e(e))throw new r.t("julianDate is required.");var n=me.toGregorianDate(e,Q),a=n.year,i=n.month,s=n.day,u=n.hour,l=n.minute,c=n.second,f=n.millisecond;return 1e4===a&&1===i&&1===s&&0===u&&0===l&&0===c&&0===f&&(a=9999,i=12,s=31,u=24),o.e(t)||0===f?o.e(t)&&0!==t?G("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",a,i,s,u,l,c,(.01*f).toFixed(t).replace(".","").slice(0,t)):G("%04d-%02d-%02dT%02d:%02d:%02dZ",a,i,s,u,l,c):G("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",a,i,s,u,l,c,(.01*f).toString().replace(".",""))},me.clone=function(e,t){if(o.e(e))return o.e(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new me(e.dayNumber,e.secondsOfDay,H.TAI)},me.compare=function(e,t){if(!o.e(e))throw new r.t("left is required.");if(!o.e(t))throw new r.t("right is required.");var n=e.dayNumber-t.dayNumber;return 0!==n?n:e.secondsOfDay-t.secondsOfDay},me.equals=function(e,t){return e===t||o.e(e)&&o.e(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},me.equalsEpsilon=function(e,t,n){if(!o.e(n))throw new r.t("epsilon is required.");return e===t||o.e(e)&&o.e(t)&&Math.abs(me.secondsDifference(e,t))<=n},me.totalDays=function(e){if(!o.e(e))throw new r.t("julianDate is required.");return e.dayNumber+e.secondsOfDay/X.SECONDS_PER_DAY},me.secondsDifference=function(e,t){if(!o.e(e))throw new r.t("left is required.");if(!o.e(t))throw new r.t("right is required.");return(e.dayNumber-t.dayNumber)*X.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},me.daysDifference=function(e,t){if(!o.e(e))throw new r.t("left is required.");if(!o.e(t))throw new r.t("right is required.");return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/X.SECONDS_PER_DAY},me.computeTaiMinusUtc=function(e){te.julianDate=e;var t=me.leapSeconds,n=Y(t,te,ee);return n<0&&(n=~n,--n<0&&(n=0)),t[n].offset},me.addSeconds=function(e,t,n){if(!o.e(e))throw new r.t("julianDate is required.");if(!o.e(t))throw new r.t("seconds is required.");if(!o.e(n))throw new r.t("result is required.");return oe(e.dayNumber,e.secondsOfDay+t,n)},me.addMinutes=function(e,t,n){if(!o.e(e))throw new r.t("julianDate is required.");if(!o.e(t))throw new r.t("minutes is required.");if(!o.e(n))throw new r.t("result is required.");var a=e.secondsOfDay+t*X.SECONDS_PER_MINUTE;return oe(e.dayNumber,a,n)},me.addHours=function(e,t,n){if(!o.e(e))throw new r.t("julianDate is required.");if(!o.e(t))throw new r.t("hours is required.");if(!o.e(n))throw new r.t("result is required.");var a=e.secondsOfDay+t*X.SECONDS_PER_HOUR;return oe(e.dayNumber,a,n)},me.addDays=function(e,t,n){if(!o.e(e))throw new r.t("julianDate is required.");if(!o.e(t))throw new r.t("days is required.");if(!o.e(n))throw new r.t("result is required.");return oe(e.dayNumber+t,e.secondsOfDay,n)},me.lessThan=function(e,t){return me.compare(e,t)<0},me.lessThanOrEquals=function(e,t){return me.compare(e,t)<=0},me.greaterThan=function(e,t){return me.compare(e,t)>0},me.greaterThanOrEquals=function(e,t){return me.compare(e,t)>=0},me.prototype.clone=function(e){return me.clone(this,e)},me.prototype.equals=function(e){return me.equals(this,e)},me.prototype.equalsEpsilon=function(e,t){return me.equalsEpsilon(this,e,t)},me.prototype.toString=function(){return me.toIso8601(this)},me.leapSeconds=[new J(new me(2441317,43210,H.TAI),10),new J(new me(2441499,43211,H.TAI),11),new J(new me(2441683,43212,H.TAI),12),new J(new me(2442048,43213,H.TAI),13),new J(new me(2442413,43214,H.TAI),14),new J(new me(2442778,43215,H.TAI),15),new J(new me(2443144,43216,H.TAI),16),new J(new me(2443509,43217,H.TAI),17),new J(new me(2443874,43218,H.TAI),18),new J(new me(2444239,43219,H.TAI),19),new J(new me(2444786,43220,H.TAI),20),new J(new me(2445151,43221,H.TAI),21),new J(new me(2445516,43222,H.TAI),22),new J(new me(2446247,43223,H.TAI),23),new J(new me(2447161,43224,H.TAI),24),new J(new me(2447892,43225,H.TAI),25),new J(new me(2448257,43226,H.TAI),26),new J(new me(2448804,43227,H.TAI),27),new J(new me(2449169,43228,H.TAI),28),new J(new me(2449534,43229,H.TAI),29),new J(new me(2450083,43230,H.TAI),30),new J(new me(2450630,43231,H.TAI),31),new J(new me(2451179,43232,H.TAI),32),new J(new me(2453736,43233,H.TAI),33),new J(new me(2454832,43234,H.TAI),34),new J(new me(2456109,43235,H.TAI),35),new J(new me(2457204,43236,H.TAI),36),new J(new me(2457754,43237,H.TAI),37)],Oe.NONE=Object.freeze({getPromiseToLoad:function(){return o.o()},compute:function(e,t){return o.e(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new B(0,0,0,0,0),t}}),Oe.prototype.getPromiseToLoad=function(){return o.o(this._downloadPromise)},Oe.prototype.compute=function(e,t){if(o.e(this._samples)){if(o.e(t)||(t=new B(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var n=this._dates,r=this._lastIndex,a=0,i=0;if(o.e(r)){var s=n[r],u=n[r+1],c=me.lessThanOrEquals(s,e),f=!o.e(u),d=f||me.greaterThanOrEquals(u,e);if(c&&d)return a=r,!f&&u.equals(e)&&++a,i=a+1,ve(this,n,this._samples,e,a,i,t),t}var p=Y(n,e,me.compare,this._dateColumn);return p>=0?(p<n.length-1&&n[p+1].equals(e)&&++p,a=p,i=p):(a=(i=~p)-1)<0&&(a=0),this._lastIndex=a,ve(this,n,this._samples,e,a,i,t),t}if(o.e(this._dataError))throw new l.t(this._dataError)},Te.fromQuaternion=function(e,t){if(!o.e(e))throw new r.t("quaternion is required");o.e(t)||(t=new Te);var n=2*(e.w*e.y-e.z*e.x),a=1-2*(e.x*e.x+e.y*e.y),s=2*(e.w*e.x+e.y*e.z),u=1-2*(e.y*e.y+e.z*e.z),l=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(l,u),t.roll=Math.atan2(s,a),t.pitch=-i.e.asinClamped(n),t},Te.fromDegrees=function(e,t,n,a){if(!o.e(e))throw new r.t("heading is required");if(!o.e(t))throw new r.t("pitch is required");if(!o.e(n))throw new r.t("roll is required");return o.e(a)||(a=new Te),a.heading=e*i.e.RADIANS_PER_DEGREE,a.pitch=t*i.e.RADIANS_PER_DEGREE,a.roll=n*i.e.RADIANS_PER_DEGREE,a},Te.clone=function(e,t){if(o.e(e))return o.e(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new Te(e.heading,e.pitch,e.roll)},Te.equals=function(e,t){return e===t||o.e(e)&&o.e(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},Te.equalsEpsilon=function(e,t,n,r){return e===t||o.e(e)&&o.e(t)&&i.e.equalsEpsilon(e.heading,t.heading,n,r)&&i.e.equalsEpsilon(e.pitch,t.pitch,n,r)&&i.e.equalsEpsilon(e.roll,t.roll,n,r)},Te.prototype.clone=function(e){return Te.clone(this,e)},Te.prototype.equals=function(e){return Te.equals(this,e)},Te.prototype.equalsEpsilon=function(e,t,n){return Te.equalsEpsilon(this,e,t,n)},Te.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var De=new me(0,0,H.TAI);function Pe(e,t,n){var r=De;return r.dayNumber=t,r.secondsOfDay=n,me.daysDifference(r,e._sampleZeroDateTT)}function Ne(e,t){if(e._chunkDownloadsInProgress[t])return e._chunkDownloadsInProgress[t];var n=o.o.defer();e._chunkDownloadsInProgress[t]=n;var r,a=e._xysFileUrlTemplate;return r=o.e(a)?a.getDerivedResource({templateValues:{0:t}}):new u.t({url:u.n$1("Assets/IAU2006_XYS/IAU2006_XYS_"+t+".json")}),o.o(r.fetchJson(),(function(r){e._chunkDownloadsInProgress[t]=!1;for(var o=e._samples,a=r.samples,i=t*e._samplesPerXysFile*3,s=0,u=a.length;s<u;++s)o[i+s]=a[s];n.resolve()})),n.promise}ge.prototype.preload=function(e,t,n,r){var a=Pe(this,e,t),i=Pe(this,n,r),s=a/this._stepSizeDays-this._interpolationOrder/2|0;s<0&&(s=0);var u=i/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;u>=this._totalSamples&&(u=this._totalSamples-1);for(var l=s/this._samplesPerXysFile|0,c=u/this._samplesPerXysFile|0,f=[],d=l;d<=c;++d)f.push(Ne(this,d));return o.o.all(f)},ge.prototype.computeXysRadians=function(e,t,n){var r=Pe(this,e,t);if(!(r<0)){var a=r/this._stepSizeDays|0;if(!(a>=this._totalSamples)){var i=this._interpolationOrder,s=a-(i/2|0);s<0&&(s=0);var u=s+i;u>=this._totalSamples&&((s=(u=this._totalSamples-1)-i)<0&&(s=0));var l=!1,c=this._samples;if(o.e(c[3*s])||(Ne(this,s/this._samplesPerXysFile|0),l=!0),o.e(c[3*u])||(Ne(this,u/this._samplesPerXysFile|0),l=!0),!l){o.e(n)?(n.x=0,n.y=0,n.s=0):n=new Se(0,0,0);var f,d,p=r-s*this._stepSizeDays,y=this._work,h=this._denominators,m=this._coef,w=this._xTable;for(f=0;f<=i;++f)y[f]=p-w[f];for(f=0;f<=i;++f){for(m[f]=1,d=0;d<=i;++d)d!==f&&(m[f]*=y[d]);m[f]*=h[f];var O=3*(s+f);n.x+=m[f]*c[O++],n.y+=m[f]*c[O++],n.s+=m[f]*c[O]}return n}}}};var Ce={},Ie={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},je={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Re={},Me={east:new n.o,north:new n.o,up:new n.o,west:new n.o,south:new n.o,down:new n.o},Ae=new n.o,qe=new n.o,Ue=new n.o;Ce.localFrameToFixedFrameGenerator=function(e,s){if(!Ie.hasOwnProperty(e)||!Ie[e].hasOwnProperty(s))throw new r.t("firstAxis and secondAxis must be east, north, up, west, south or down.");var u,l=Ie[e][s],c=e+s;return o.e(Re[c])?u=Re[c]:(u=function(u,c,f){if(!o.e(u))throw new r.t("origin is required.");if(o.e(f)||(f=new a.p),n.o.equalsEpsilon(u,n.o.ZERO,i.e.EPSILON14))n.o.unpack(je[e],0,Ae),n.o.unpack(je[s],0,qe),n.o.unpack(je[l],0,Ue);else if(i.e.equalsEpsilon(u.x,0,i.e.EPSILON14)&&i.e.equalsEpsilon(u.y,0,i.e.EPSILON14)){var d=i.e.sign(u.z);n.o.unpack(je[e],0,Ae),"east"!==e&&"west"!==e&&n.o.multiplyByScalar(Ae,d,Ae),n.o.unpack(je[s],0,qe),"east"!==s&&"west"!==s&&n.o.multiplyByScalar(qe,d,qe),n.o.unpack(je[l],0,Ue),"east"!==l&&"west"!==l&&n.o.multiplyByScalar(Ue,d,Ue)}else{(c=o.u(c,t.t.WGS84)).geodeticSurfaceNormal(u,Me.up);var p=Me.up,y=Me.east;y.x=-u.y,y.y=u.x,y.z=0,n.o.normalize(y,Me.east),n.o.cross(p,y,Me.north),n.o.multiplyByScalar(Me.up,-1,Me.down),n.o.multiplyByScalar(Me.east,-1,Me.west),n.o.multiplyByScalar(Me.north,-1,Me.south),Ae=Me[e],qe=Me[s],Ue=Me[l]}return f[0]=Ae.x,f[1]=Ae.y,f[2]=Ae.z,f[3]=0,f[4]=qe.x,f[5]=qe.y,f[6]=qe.z,f[7]=0,f[8]=Ue.x,f[9]=Ue.y,f[10]=Ue.z,f[11]=0,f[12]=u.x,f[13]=u.y,f[14]=u.z,f[15]=1,f},Re[c]=u),u},Ce.eastNorthUpToFixedFrame=Ce.localFrameToFixedFrameGenerator("east","north"),Ce.northEastDownToFixedFrame=Ce.localFrameToFixedFrameGenerator("north","east"),Ce.northUpEastToFixedFrame=Ce.localFrameToFixedFrameGenerator("north","up"),Ce.northWestUpToFixedFrame=Ce.localFrameToFixedFrameGenerator("north","west");var ze=new y,Fe=new n.o(1,1,1),We=new a.p;Ce.headingPitchRollToFixedFrame=function(e,t,i,s,u){r.o.typeOf.object("HeadingPitchRoll",t),s=o.u(s,Ce.eastNorthUpToFixedFrame);var l=y.fromHeadingPitchRoll(t,ze),c=a.p.fromTranslationQuaternionRotationScale(n.o.ZERO,l,Fe,We);return u=s(e,i,u),a.p.multiply(u,c,u)};var Le=new a.p,$e=new a.p$1;Ce.headingPitchRollQuaternion=function(e,t,n,o,i){r.o.typeOf.object("HeadingPitchRoll",t);var s=Ce.headingPitchRollToFixedFrame(e,t,n,o,Le),u=a.p.getMatrix3(s,$e);return y.fromRotationMatrix(u,i)};var ke=new n.o(1,1,1),Ye=new n.o,Be=new a.p,Ge=new a.p,Ze=new a.p$1,Ve=new y;Ce.fixedFrameToHeadingPitchRoll=function(e,i,s,u){r.o.defined("transform",e),i=o.u(i,t.t.WGS84),s=o.u(s,Ce.eastNorthUpToFixedFrame),o.e(u)||(u=new Te);var l=a.p.getTranslation(e,Ye);if(n.o.equals(l,n.o.ZERO))return u.heading=0,u.pitch=0,u.roll=0,u;var c=a.p.inverseTransformation(s(l,i,Be),Be),f=a.p.setScale(e,ke,Ge);f=a.p.setTranslation(f,n.o.ZERO,f),c=a.p.multiply(c,f,c);var d=y.fromRotationMatrix(a.p.getMatrix3(c,Ze),Ve);return d=y.normalize(d,d),Te.fromQuaternion(d,u)};var Je=i.e.TWO_PI/86400,Xe=new me;Ce.computeTemeToPseudoFixedMatrix=function(e,t){if(!o.e(e))throw new r.t("date is required.");var n,s=(Xe=me.addSeconds(e,-me.computeTaiMinusUtc(e),Xe)).dayNumber,u=Xe.secondsOfDay,l=s-2451545,c=(24110.54841+(n=u>=43200?(l+.5)/X.DAYS_PER_JULIAN_CENTURY:(l-.5)/X.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+n*(.093104+-62e-7*n)))*Je%i.e.TWO_PI+(72921158553e-15+11772758384668e-32*(s-2451545.5))*((u+.5*X.SECONDS_PER_DAY)%X.SECONDS_PER_DAY),f=Math.cos(c),d=Math.sin(c);return o.e(t)?(t[0]=f,t[1]=-d,t[2]=0,t[3]=d,t[4]=f,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new a.p$1(f,d,0,-d,f,0,0,0,1)},Ce.iau2006XysData=new ge,Ce.earthOrientationParameters=Oe.NONE;var He=32.184;Ce.preloadIcrfFixed=function(e){var t=e.start.dayNumber,n=e.start.secondsOfDay+He,r=e.stop.dayNumber,a=e.stop.secondsOfDay+He,i=Ce.iau2006XysData.preload(t,n,r,a),s=Ce.earthOrientationParameters.getPromiseToLoad();return o.o.all([i,s])},Ce.computeIcrfToFixedMatrix=function(e,t){if(!o.e(e))throw new r.t("date is required.");o.e(t)||(t=new a.p$1);var n=Ce.computeFixedToIcrfMatrix(e,t);if(o.e(n))return a.p$1.transpose(n,t)};var Qe=new Se(0,0,0),Ke=new B(0,0,0,0,0,0),et=new a.p$1,tt=new a.p$1;Ce.computeFixedToIcrfMatrix=function(e,t){if(!o.e(e))throw new r.t("date is required.");o.e(t)||(t=new a.p$1);var n=Ce.earthOrientationParameters.compute(e,Ke);if(o.e(n)){var s=e.dayNumber,u=e.secondsOfDay+He,l=Ce.iau2006XysData.computeXysRadians(s,u,Qe);if(o.e(l)){var c=l.x+n.xPoleOffset,f=l.y+n.yPoleOffset,d=1/(1+Math.sqrt(1-c*c-f*f)),p=et;p[0]=1-d*c*c,p[3]=-d*c*f,p[6]=c,p[1]=-d*c*f,p[4]=1-d*f*f,p[7]=f,p[2]=-c,p[5]=-f,p[8]=1-d*(c*c+f*f);var y=a.p$1.fromRotationZ(-l.s,tt),h=a.p$1.multiply(p,y,et),m=e.dayNumber-2451545,w=(e.secondsOfDay-me.computeTaiMinusUtc(e)+n.ut1MinusUtc)/X.SECONDS_PER_DAY,O=.779057273264+w+.00273781191135448*(m+w);O=O%1*i.e.TWO_PI;var b=a.p$1.fromRotationZ(O,tt),x=a.p$1.multiply(h,b,et),E=Math.cos(n.xPoleWander),_=Math.cos(n.yPoleWander),v=Math.sin(n.xPoleWander),T=Math.sin(n.yPoleWander),S=s-2451545+u/X.SECONDS_PER_DAY,g=-47e-6*(S/=36525)*i.e.RADIANS_PER_DEGREE/3600,D=Math.cos(g),P=Math.sin(g),N=tt;return N[0]=E*D,N[1]=E*P,N[2]=v,N[3]=-_*P+T*v*D,N[4]=_*D+T*v*P,N[5]=-T*E,N[6]=-T*P-_*v*D,N[7]=T*D-_*v*P,N[8]=_*E,a.p$1.multiply(x,N,t)}}};var nt=new s.e;Ce.pointToWindowCoordinates=function(e,t,n,r){return(r=Ce.pointToGLWindowCoordinates(e,t,n,r)).y=2*t[5]-r.y,r},Ce.pointToGLWindowCoordinates=function(e,n,i,u){if(!o.e(e))throw new r.t("modelViewProjectionMatrix is required.");if(!o.e(n))throw new r.t("viewportTransformation is required.");if(!o.e(i))throw new r.t("point is required.");o.e(u)||(u=new t.o);var l=nt;return a.p.multiplyByVector(e,s.e.fromElements(i.x,i.y,i.z,1,l),l),s.e.multiplyByScalar(l,1/l.w,l),a.p.multiplyByVector(n,l,l),t.o.fromCartesian4(l,u)};var rt=new n.o,ot=new n.o,at=new n.o;Ce.rotationMatrixFromPositionVelocity=function(e,s,u,l){if(!o.e(e))throw new r.t("position is required.");if(!o.e(s))throw new r.t("velocity is required.");var c=o.u(u,t.t.WGS84).geodeticSurfaceNormal(e,rt),f=n.o.cross(s,c,ot);n.o.equalsEpsilon(f,n.o.ZERO,i.e.EPSILON6)&&(f=n.o.clone(n.o.UNIT_X,f));var d=n.o.cross(f,s,at);return n.o.normalize(d,d),n.o.cross(s,d,f),n.o.negate(f,f),n.o.normalize(f,f),o.e(l)||(l=new a.p$1),l[0]=s.x,l[1]=s.y,l[2]=s.z,l[3]=f.x,l[4]=f.y,l[5]=f.z,l[6]=d.x,l[7]=d.y,l[8]=d.z,l};var it=new a.p(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),st=new n.a,ut=new n.o,lt=new n.o,ct=new a.p$1,ft=new a.p,dt=new a.p;function pt(e){e=o.u(e,o.u.EMPTY_OBJECT),r.o.typeOf.object("options.attributes",e.attributes),this.attributes=e.attributes,this.indices=e.indices,this.primitiveType=o.u(e.primitiveType,a._0x2355b9.TRIANGLES),this.boundingSphere=e.boundingSphere,this.geometryType=o.u(e.geometryType,c.NONE),this.boundingSphereCV=e.boundingSphereCV,this.offsetAttribute=e.offsetAttribute}Ce.basisTo2D=function(e,t,i){if(!o.e(e))throw new r.t("projection is required.");if(!o.e(t))throw new r.t("matrix is required.");if(!o.e(i))throw new r.t("result is required.");var s=a.p.getTranslation(t,lt),u=e.ellipsoid,l=u.cartesianToCartographic(s,st),c=e.project(l,ut);n.o.fromElements(c.z,c.x,c.y,c);var f=Ce.eastNorthUpToFixedFrame(s,u,ft),d=a.p.inverseTransformation(f,dt),p=a.p.getMatrix3(t,ct),y=a.p.multiplyByMatrix3(d,p,i);return a.p.multiply(it,y,i),a.p.setTranslation(i,c,i),i},Ce.wgs84To2DModelMatrix=function(e,t,i){if(!o.e(e))throw new r.t("projection is required.");if(!o.e(t))throw new r.t("center is required.");if(!o.e(i))throw new r.t("result is required.");var s=e.ellipsoid,u=Ce.eastNorthUpToFixedFrame(t,s,ft),l=a.p.inverseTransformation(u,dt),c=s.cartesianToCartographic(t,st),f=e.project(c,ut);n.o.fromElements(f.z,f.x,f.y,f);var d=a.p.fromTranslation(f,ft);return a.p.multiply(it,l,i),a.p.multiply(d,i,i),i},Ce.buildUp=function(e,t){var r=t.clone(),o=e.clone();o=n.o.normalize(o,o),Math.abs(n.o.dot(o,r))>=1&&(o=Math.abs(n.o.dot(r,n.o.UNIT_Y))<1?n.o.clone(n.o.UNIT_Y,o):n.o.clone(n.o.UNIT_Z,o));var a=new n.o;return n.o.cross(o,r,a),a=n.o.normalize(a,a),n.o.cross(r,a,o),o=n.o.normalize(o,o)},Ce.getHeading=function(e,t){var n;return n=i.e.equalsEpsilon(Math.abs(e.z),1,i.e.EPSILON3)?Math.atan2(t.y,t.x)-i.e.PI_OVER_TWO:Math.atan2(e.y,e.x)-i.e.PI_OVER_TWO,i.e.TWO_PI-i.e.zeroToTwoPi(n)},Ce.convertToColumbusCartesian=function(e){var t=new u.n,r=t.ellipsoid,o=new n.o,a=new n.a;return r.cartesianToCartographic(e,a),t.project(a,o),n.o.fromElements(o.z,o.x,o.y)},Ce.convertTo3DCartesian=function(e){var t=new u.n,r=t.ellipsoid,o=new n.o,a=new n.a;return o=n.o.fromElements(e.y,e.z,e.x),t.unproject(o,a),r.cartographicToCartesian(a,o)},pt.computeNumberOfVertices=function(e){r.o.typeOf.object("geometry",e);var t=-1;for(var n in e.attributes)if(e.attributes.hasOwnProperty(n)&&o.e(e.attributes[n])&&o.e(e.attributes[n].values)){var a=e.attributes[n];if(a.isInstanceAttribute)continue;var i=a.values.length/a.componentsPerAttribute;if(t!==i&&-1!==t)throw new r.t("All attribute lists must have the same number of attributes.");t=i}return t};var yt=new n.a,ht=new n.o,mt=new a.p,wt=[new n.a,new n.a,new n.a],Ot=[new t.o,new t.o,new t.o],bt=[new t.o,new t.o,new t.o],xt=new n.o,Et=new y,_t=new a.p,vt=new f;pt._textureCoordinateRotationPoints=function(e,r,o,i){var s,u=t.h.center(i,yt),l=n.a.toCartesian(u,o,ht),c=Ce.eastNorthUpToFixedFrame(l,o,mt),d=a.p.inverse(c,mt),p=Ot,h=wt;h[0].longitude=i.west,h[0].latitude=i.south,h[1].longitude=i.west,h[1].latitude=i.north,h[2].longitude=i.east,h[2].latitude=i.south;var m=xt;for(s=0;s<3;s++)n.a.toCartesian(h[s],o,m),m=a.p.multiplyByPointAsVector(d,m,m),p[s].x=m.x,p[s].y=m.y;var w=y.fromAxisAngle(n.o.UNIT_Z,-r,Et),O=a.p$1.fromQuaternion(w,_t),b=e.length,x=Number.POSITIVE_INFINITY,E=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,v=Number.NEGATIVE_INFINITY;for(s=0;s<b;s++)m=a.p.multiplyByPointAsVector(d,e[s],m),m=a.p$1.multiplyByVector(O,m,m),x=Math.min(x,m.x),E=Math.min(E,m.y),_=Math.max(_,m.x),v=Math.max(v,m.y);var T=f.fromRotation(r,vt),S=bt;S[0].x=x,S[0].y=E,S[1].x=x,S[1].y=v,S[2].x=_,S[2].y=E;var g=p[0],D=p[2].x-g.x,P=p[1].y-g.y;for(s=0;s<3;s++){var N=S[s];f.multiplyByVector(T,N,N),N.x=(N.x-g.x)/D,N.y=(N.y-g.y)/P}var C=S[0],I=S[1],j=S[2],R=new Array(6);return t.o.pack(C,R),t.o.pack(I,R,2),t.o.pack(j,R,4),R},e.I=pt,e.Me=c,e.f=f,e.m=Ce,e.n=y,e.o=function(e){if(e=o.u(e,o.u.EMPTY_OBJECT),!o.e(e.componentDatatype))throw new r.t("options.componentDatatype is required.");if(!o.e(e.componentsPerAttribute))throw new r.t("options.componentsPerAttribute is required.");if(e.componentsPerAttribute<1||e.componentsPerAttribute>4)throw new r.t("options.componentsPerAttribute must be between 1 and 4.");if(!o.e(e.values))throw new r.t("options.values is required.");this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=o.u(e.normalize,!1),this.values=e.values}}));
