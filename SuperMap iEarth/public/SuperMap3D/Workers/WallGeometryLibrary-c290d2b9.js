define(["exports","./arrayRemoveDuplicates-5016d6bb","./Cartographic-630e5de6","./defaultValue-2110bb17","./Math-cd1437d9","./PolylinePipeline-92dcfbc3","./GeometryAttribute-b12ab6bd","./PrimitiveType-d9ba7368","./Cartesian3-c1138337"],(function(e,t,r,i,o,a,n,s,h){"use strict";var l={};function g(e,t){return o.e.equalsEpsilon(e.latitude,t.latitude,o.e.EPSILON10)&&o.e.equalsEpsilon(e.longitude,t.longitude,o.e.EPSILON10)}var u=new r.a,c=new r.a;var m=new Array(2),p=new Array(2),y={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};function v(e,t){for(var r=new Array(e.length),i=0;i<e.length;i+=3){var o=new h.o(e[i],e[i+1],e[i+2]);s.y.multiplyByPoint(t,o,o),r[i]=o.x,r[i+1]=o.y,r[i+2]=o.z}return r}l.computePositions=function(e,l,d,A,w,f,b){var P=function(e,o,a,n){var s=(o=t.D(o,h.o.equalsEpsilon)).length;if(!(s<2)){var l=i.e(n),m=i.e(a),p=!0,y=new Array(s),v=new Array(s),d=new Array(s),A=o[0];y[0]=A;var w=e.cartesianToCartographic(A,u);m&&(w.height=a[0]),p=p&&0==w.height,v[0]=w.height,d[0]=l?n[0]:0;for(var f=1,b=1;b<s;++b){var P=o[b],F=e.cartesianToCartographic(P,c);m&&(F.height=a[b]),p=p&&0==F.height,g(w,F)?w.height<F.height&&(v[f-1]=F.height):(y[f]=P,v[f]=F.height,d[f]=l?n[b]:0,r.a.clone(F,w),++f)}if(!(p||f<2))return y.length=f,v.length=f,d.length=f,{positions:y,topHeights:v,bottomHeights:d}}}(e,l,d,A);if(i.e(P)){var F=n.m.eastNorthUpToFixedFrame(P.positions[0],e,new s.y),C=s.y.inverse(F,new s.y);l=P.positions,d=P.topHeights,A=P.bottomHeights;var E,x,D,H,T=l.length,q=T-2,L=o.e.chordLength(w,e.maximumRadius),N=y;if(N.minDistance=L,N.ellipsoid=e,f){var O,I=0;for(O=0;O<T-1;O++)I+=a.m.numberOfPoints(l[O],l[O+1],L)+1;E=new Float64Array(3*I),x=new Float64Array(3*I),i.e(b)&&(D=new Float64Array(3*I),H=new Float64Array(3*I));var R=m,S=p;N.positions=R,N.height=S;var z=0;for(O=0;O<T-1;O++){R[0]=l[O],R[1]=l[O+1],S[0]=d[O],S[1]=d[O+1];var B=a.m.generateArc(N);E.set(B,z),i.e(b)&&D.set(v(B,C),z),S[0]=A[O],S[1]=A[O+1],x.set(a.m.generateArc(N),z),i.e(b)&&H.set(v(a.m.generateArc(N),C),z),z+=B.length}}else N.positions=l,N.height=d,E=new Float64Array(a.m.generateArc(N)),i.e(b)&&(D=new Float64Array(v(a.m.generateArc(N)))),N.height=A,x=new Float64Array(a.m.generateArc(N)),i.e(b)&&(H=new Float64Array(v(a.m.generateArc(N))));var G={pos:{bottomPositions:x,topPositions:E,numCorners:q}};return i.e(b)&&(G.localPos={bottomPositions:H,topPositions:D,numCorners:q}),G}},e.D=l}));
