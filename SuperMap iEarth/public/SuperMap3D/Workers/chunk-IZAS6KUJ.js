import{a as B,f as E}from"./chunk-CJHFPVIB.js";import{a as I}from"./chunk-NLYLRNUA.js";import{b as Z}from"./chunk-3HZNWEV7.js";import{a as W}from"./chunk-LBR6REQR.js";import{a as M}from"./chunk-GXFCHGTA.js";import{a as z}from"./chunk-PJGSCWXZ.js";import{a as k}from"./chunk-NUC3LT2W.js";var D=Math.cos,A=Math.sin,H=Math.sqrt,q={};q.computePosition=function(r,_,u,l,x,S,t){var s=_.radiiSquared,g=r.nwCorner,v=r.boundingRectangle,n=g.latitude-r.granYCos*l+x*r.granXSin,Y=D(n),d=A(n),o=s.z*d,a=g.longitude+l*r.granYSin+x*r.granXCos,C=Y*D(a),f=Y*A(a),X=s.x*C,G=s.y*f,c=H(X*C+G*f+o*d);if(S.x=X/c,S.y=G/c,S.z=o/c,u){var e=r.stNwCorner;k(e)?(n=e.latitude-r.stGranYCos*l+x*r.stGranXSin,a=e.longitude+l*r.stGranYSin+x*r.stGranXCos,t.x=(a-r.stWest)*r.lonScalar,t.y=(n-r.stSouth)*r.latScalar):(t.x=(a-v.west)*r.lonScalar,t.y=(n-v.south)*r.latScalar)}};var J=new E,h=new W,K=new Z,V=new W,j=new B;function F(r,_,u,l,x,S,t){var s=Math.cos(_),g=l*s,v=u*s,n=Math.sin(_),Y=l*n,d=u*n;h=j.project(r,h),h=W.subtract(h,V,h);var o=E.fromRotation(_,J);h=E.multiplyByVector(o,h,h),h=W.add(h,V,h),r=j.unproject(h,r),S-=1,t-=1;var a=r.latitude,C=a+S*d,f=a-g*t,X=a-g*t+S*d,G=Math.max(a,C,f,X),c=Math.min(a,C,f,X),e=r.longitude,R=e+S*v,y=e+t*Y,T=e+t*Y+S*v,b=Math.max(e,R,y,T),m=Math.min(e,R,y,T);return{north:G,south:c,east:b,west:m,granYCos:g,granYSin:Y,granXCos:v,granXSin:d,nwCorner:r}}q.computeOptions=function(r,_,u,l,x,S,t){var s=r.east,g=r.west,v=r.north,n=r.south,Y=!1,d=!1;v===M.PI_OVER_TWO&&(Y=!0),n===-M.PI_OVER_TWO&&(d=!0);var o,a,C,f,X,G=v-n;g>s?X=M.TWO_PI-g+s:X=s-g,o=Math.ceil(X/_)+1,a=Math.ceil(G/_)+1,C=X/(o-1),f=G/(a-1);var c=I.northwest(r,S),e=I.center(r,K);(u!==0||l!==0)&&(e.longitude<c.longitude&&(e.longitude+=M.TWO_PI),V=j.project(e,V));var R=f,y=C,T=0,b=0,m=I.clone(r,x),i={granYCos:R,granYSin:T,granXCos:y,granXSin:b,nwCorner:c,boundingRectangle:m,width:o,height:a,northCap:Y,southCap:d};if(u!==0){var w=F(c,u,C,f,e,o,a);if(v=w.north,n=w.south,s=w.east,g=w.west,v<-M.PI_OVER_TWO||v>M.PI_OVER_TWO||n<-M.PI_OVER_TWO||n>M.PI_OVER_TWO)throw new z("Rotated rectangle is invalid.  It crosses over either the north or south pole.");i.granYCos=w.granYCos,i.granYSin=w.granYSin,i.granXCos=w.granXCos,i.granXSin=w.granXSin,m.north=v,m.south=n,m.east=s,m.west=g}if(l!==0){u=u-l;var L=I.northwest(m,t),P=F(L,u,C,f,e,o,a);i.stGranYCos=P.granYCos,i.stGranXCos=P.granXCos,i.stGranYSin=P.granYSin,i.stGranXSin=P.granXSin,i.stNwCorner=L,i.stWest=P.west,i.stSouth=P.south}return i};var nr=q;export{nr as a};
