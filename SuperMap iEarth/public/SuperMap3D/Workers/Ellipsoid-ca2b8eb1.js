define(["exports","./Check-92c551fb","./defaultValue-2110bb17","./Math-cd1437d9","./Cartesian3-c1138337","./Cartographic-630e5de6"],(function(e,t,r,o,n,i){"use strict";function a(e,t){this.x=r.u(e,0),this.y=r.u(t,0)}a.fromElements=function(e,t,o){return r.e(o)?(o.x=e,o.y=t,o):new a(e,t)},a.clone=function(e,t){if(r.e(e))return r.e(t)?(t.x=e.x,t.y=e.y,t):new a(e.x,e.y)},a.fromCartesian3=a.clone,a.fromCartesian4=a.clone,a.packedLength=2,a.pack=function(e,o,n){return t.o.typeOf.object("value",e),t.o.defined("array",o),n=r.u(n,0),o[n++]=e.x,o[n]=e.y,o},a.unpack=function(e,o,n){return t.o.defined("array",e),o=r.u(o,0),r.e(n)||(n=new a),n.x=e[o++],n.y=e[o],n},a.packArray=function(e,o){t.o.defined("array",e);var n=e.length,i=2*n;if(r.e(o)){if(!Array.isArray(o)&&o.length!==i)throw new t.t("If result is a typed array, it must have exactly array.length * 2 elements");o.length!==i&&(o.length=i)}else o=new Array(i);for(var u=0;u<n;++u)a.pack(e[u],o,2*u);return o},a.unpackArray=function(e,o){if(t.o.defined("array",e),t.o.typeOf.number.greaterThanOrEquals("array.length",e.length,2),e.length%2!=0)throw new t.t("array length must be a multiple of 2.");var n=e.length;r.e(o)?o.length=n/2:o=new Array(n/2);for(var i=0;i<n;i+=2){var u=i/2;o[u]=a.unpack(e,i,o[u])}return o},a.fromArray=a.unpack,a.maximumComponent=function(e){return t.o.typeOf.object("cartesian",e),Math.max(e.x,e.y)},a.minimumComponent=function(e){return t.o.typeOf.object("cartesian",e),Math.min(e.x,e.y)},a.minimumByComponent=function(e,r,o){return t.o.typeOf.object("first",e),t.o.typeOf.object("second",r),t.o.typeOf.object("result",o),o.x=Math.min(e.x,r.x),o.y=Math.min(e.y,r.y),o},a.maximumByComponent=function(e,r,o){return t.o.typeOf.object("first",e),t.o.typeOf.object("second",r),t.o.typeOf.object("result",o),o.x=Math.max(e.x,r.x),o.y=Math.max(e.y,r.y),o},a.magnitudeSquared=function(e){return t.o.typeOf.object("cartesian",e),e.x*e.x+e.y*e.y},a.magnitude=function(e){return Math.sqrt(a.magnitudeSquared(e))};var u=new a;a.distance=function(e,r){return t.o.typeOf.object("left",e),t.o.typeOf.object("right",r),a.subtract(e,r,u),a.magnitude(u)},a.distanceSquared=function(e,r){return t.o.typeOf.object("left",e),t.o.typeOf.object("right",r),a.subtract(e,r,u),a.magnitudeSquared(u)},a.normalize=function(e,r){t.o.typeOf.object("cartesian",e),t.o.typeOf.object("result",r);var o=a.magnitude(e);if(r.x=e.x/o,r.y=e.y/o,isNaN(r.x)||isNaN(r.y))throw new t.t("normalized result is not a number");return r},a.dot=function(e,r){return t.o.typeOf.object("left",e),t.o.typeOf.object("right",r),e.x*r.x+e.y*r.y},a.multiplyComponents=function(e,r,o){return t.o.typeOf.object("left",e),t.o.typeOf.object("right",r),t.o.typeOf.object("result",o),o.x=e.x*r.x,o.y=e.y*r.y,o},a.divideComponents=function(e,r,o){return t.o.typeOf.object("left",e),t.o.typeOf.object("right",r),t.o.typeOf.object("result",o),o.x=e.x/r.x,o.y=e.y/r.y,o},a.add=function(e,r,o){return t.o.typeOf.object("left",e),t.o.typeOf.object("right",r),t.o.typeOf.object("result",o),o.x=e.x+r.x,o.y=e.y+r.y,o},a.subtract=function(e,r,o){return t.o.typeOf.object("left",e),t.o.typeOf.object("right",r),t.o.typeOf.object("result",o),o.x=e.x-r.x,o.y=e.y-r.y,o},a.multiplyByScalar=function(e,r,o){return t.o.typeOf.object("cartesian",e),t.o.typeOf.number("scalar",r),t.o.typeOf.object("result",o),o.x=e.x*r,o.y=e.y*r,o},a.divideByScalar=function(e,r,o){return t.o.typeOf.object("cartesian",e),t.o.typeOf.number("scalar",r),t.o.typeOf.object("result",o),o.x=e.x/r,o.y=e.y/r,o},a.negate=function(e,r){return t.o.typeOf.object("cartesian",e),t.o.typeOf.object("result",r),r.x=-e.x,r.y=-e.y,r},a.abs=function(e,r){return t.o.typeOf.object("cartesian",e),t.o.typeOf.object("result",r),r.x=Math.abs(e.x),r.y=Math.abs(e.y),r};var c=new a;a.lerp=function(e,r,o,n){return t.o.typeOf.object("start",e),t.o.typeOf.object("end",r),t.o.typeOf.number("t",o),t.o.typeOf.object("result",n),a.multiplyByScalar(r,o,c),n=a.multiplyByScalar(e,1-o,n),a.add(c,n,n)};var s=new a,f=new a;a.angleBetween=function(e,r){return t.o.typeOf.object("left",e),t.o.typeOf.object("right",r),a.normalize(e,s),a.normalize(r,f),o.e.acosClamped(a.dot(s,f))};var y=new a;function d(e,i,a,u){i=r.u(i,0),a=r.u(a,0),u=r.u(u,0),t.o.typeOf.number.greaterThanOrEquals("x",i,0),t.o.typeOf.number.greaterThanOrEquals("y",a,0),t.o.typeOf.number.greaterThanOrEquals("z",u,0),e._radii=new n.o(i,a,u),e._radiiSquared=new n.o(i*i,a*a,u*u),e._radiiToTheFourth=new n.o(i*i*i*i,a*a*a*a,u*u*u*u),e._oneOverRadii=new n.o(0===i?0:1/i,0===a?0:1/a,0===u?0:1/u),e._oneOverRadiiSquared=new n.o(0===i?0:1/(i*i),0===a?0:1/(a*a),0===u?0:1/(u*u)),e._minimumRadius=Math.min(i,a,u),e._maximumRadius=Math.max(i,a,u),e._centerToleranceSquared=o.e.EPSILON1,0!==e._radiiSquared.z&&(e._squaredXOverSquaredZ=e._radiiSquared.x/e._radiiSquared.z)}function p(e,t,r){this._radii=void 0,this._radiiSquared=void 0,this._radiiToTheFourth=void 0,this._oneOverRadii=void 0,this._oneOverRadiiSquared=void 0,this._minimumRadius=void 0,this._maximumRadius=void 0,this._centerToleranceSquared=void 0,this._squaredXOverSquaredZ=void 0,d(this,e,t,r)}a.mostOrthogonalAxis=function(e,r){t.o.typeOf.object("cartesian",e),t.o.typeOf.object("result",r);var o=a.normalize(e,y);return a.abs(o,o),r=o.x<=o.y?a.clone(a.UNIT_X,r):a.clone(a.UNIT_Y,r)},a.equals=function(e,t){return e===t||r.e(e)&&r.e(t)&&e.x===t.x&&e.y===t.y},a.equalsArray=function(e,t,r){return e.x===t[r]&&e.y===t[r+1]},a.equalsEpsilon=function(e,t,n,i){return e===t||r.e(e)&&r.e(t)&&o.e.equalsEpsilon(e.x,t.x,n,i)&&o.e.equalsEpsilon(e.y,t.y,n,i)},a.ZERO=Object.freeze(new a(0,0)),a.UNIT_X=Object.freeze(new a(1,0)),a.UNIT_Y=Object.freeze(new a(0,1)),a.prototype.clone=function(e){return a.clone(this,e)},a.prototype.equals=function(e){return a.equals(this,e)},a.prototype.equalsEpsilon=function(e,t,r){return a.equalsEpsilon(this,e,t,r)},a.prototype.toString=function(){return"("+this.x+", "+this.y+")"},a.prototype.toArray=function(e,t){a.pack(this,e,t)},Object.defineProperties(p.prototype,{radii:{get:function(){return this._radii}},radiiSquared:{get:function(){return this._radiiSquared}},radiiToTheFourth:{get:function(){return this._radiiToTheFourth}},oneOverRadii:{get:function(){return this._oneOverRadii}},oneOverRadiiSquared:{get:function(){return this._oneOverRadiiSquared}},minimumRadius:{get:function(){return this._minimumRadius}},maximumRadius:{get:function(){return this._maximumRadius}}}),p.clone=function(e,t){if(r.e(e)){var o=e._radii;return r.e(t)?(n.o.clone(o,t._radii),n.o.clone(e._radiiSquared,t._radiiSquared),n.o.clone(e._radiiToTheFourth,t._radiiToTheFourth),n.o.clone(e._oneOverRadii,t._oneOverRadii),n.o.clone(e._oneOverRadiiSquared,t._oneOverRadiiSquared),t._minimumRadius=e._minimumRadius,t._maximumRadius=e._maximumRadius,t._centerToleranceSquared=e._centerToleranceSquared,t):new p(o.x,o.y,o.z)}},p.fromCartesian3=function(e,t){return r.e(t)||(t=new p),r.e(e)&&d(t,e.x,e.y,e.z),t},p.WGS84=Object.freeze(new p(6378137,6378137,6356752.314245179)),p.XIAN80=Object.freeze(new p(6378140,6378140,6356755.29)),p.CGCS2000=Object.freeze(new p(6378137,6378137,6356752.31)),p.UNIT_SPHERE=Object.freeze(new p(1,1,1)),p.MOON=Object.freeze(new p(o.e.LUNAR_RADIUS,o.e.LUNAR_RADIUS,o.e.LUNAR_RADIUS)),p.prototype.clone=function(e){return p.clone(this,e)},p.packedLength=n.o.packedLength,p.pack=function(e,o,i){return t.o.typeOf.object("value",e),t.o.defined("array",o),i=r.u(i,0),n.o.pack(e._radii,o,i),o},p.unpack=function(e,o,i){t.o.defined("array",e),o=r.u(o,0);var a=n.o.unpack(e,o);return p.fromCartesian3(a,i)},p.prototype.geocentricSurfaceNormal=n.o.normalize,p.prototype.geodeticSurfaceNormalCartographic=function(e,o){t.o.typeOf.object("cartographic",e);var i=e.longitude,a=e.latitude,u=Math.cos(a),c=u*Math.cos(i),s=u*Math.sin(i),f=Math.sin(a);return r.e(o)||(o=new n.o),o.x=c,o.y=s,o.z=f,n.o.normalize(o,o)},p.prototype.geodeticSurfaceNormal=function(e,t){return r.e(t)||(t=new n.o),t=n.o.multiplyComponents(e,this._oneOverRadiiSquared,t),n.o.normalize(t,t)};var l=new n.o,h=new n.o;p.prototype.cartographicToCartesian=function(e,t){var o=l,i=h;this.geodeticSurfaceNormalCartographic(e,o),n.o.multiplyComponents(this._radiiSquared,o,i);var a=Math.sqrt(n.o.dot(o,i));return n.o.divideByScalar(i,a,i),n.o.multiplyByScalar(o,e.height,o),r.e(t)||(t=new n.o),n.o.add(i,o,t)},p.prototype.cartographicArrayToCartesianArray=function(e,o){t.o.defined("cartographics",e);var n=e.length;r.e(o)?o.length=n:o=new Array(n);for(var i=0;i<n;i++)o[i]=this.cartographicToCartesian(e[i],o[i]);return o};var m=new n.o,O=new n.o,b=new n.o;p.prototype.cartesianToCartographic=function(e,t){var a=this.scaleToGeodeticSurface(e,O);if(r.e(a)){var u=this.geodeticSurfaceNormal(a,m),c=n.o.subtract(e,a,b),s=Math.atan2(u.y,u.x),f=Math.asin(u.z),y=o.e.sign(n.o.dot(c,e))*n.o.magnitude(c);return r.e(t)?(t.longitude=s,t.latitude=f,t.height=y,t):new i.a(s,f,y)}},p.prototype.cartesianArrayToCartographicArray=function(e,o){t.o.defined("cartesians",e);var n=e.length;r.e(o)?o.length=n:o=new Array(n);for(var i=0;i<n;++i)o[i]=this.cartesianToCartographic(e[i],o[i]);return o},p.prototype.scaleToGeodeticSurface=function(e,t){return i.P(e,this._oneOverRadii,this._oneOverRadiiSquared,this._centerToleranceSquared,t)},p.prototype.scaleToGeocentricSurface=function(e,o){t.o.typeOf.object("cartesian",e),r.e(o)||(o=new n.o);var i=e.x,a=e.y,u=e.z,c=this._oneOverRadiiSquared,s=1/Math.sqrt(i*i*c.x+a*a*c.y+u*u*c.z);return n.o.multiplyByScalar(e,s,o)},p.prototype.transformPositionToScaledSpace=function(e,t){return r.e(t)||(t=new n.o),n.o.multiplyComponents(e,this._oneOverRadii,t)},p.prototype.transformPositionFromScaledSpace=function(e,t){return r.e(t)||(t=new n.o),n.o.multiplyComponents(e,this._radii,t)},p.prototype.equals=function(e){return this===e||r.e(e)&&n.o.equals(this._radii,e._radii)},p.prototype.toString=function(){return this._radii.toString()},p.prototype.getSurfaceNormalIntersectionWithZAxis=function(e,i,a){if(t.o.typeOf.object("position",e),!o.e.equalsEpsilon(this._radii.x,this._radii.y,o.e.EPSILON15))throw new t.t("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");t.o.typeOf.number.greaterThan("Ellipsoid.radii.z",this._radii.z,0),i=r.u(i,0);var u=this._squaredXOverSquaredZ;if(r.e(a)||(a=new n.o),a.x=0,a.y=0,a.z=e.z*(1-u),!(Math.abs(a.z)>=this._radii.z-i))return a};const x=new n.o;p.prototype.getLocalCurvature=function(e,o){t.o.typeOf.object("surfacePosition",e),r.e(o)||(o=new a);const i=this.getSurfaceNormalIntersectionWithZAxis(e,0,x),u=n.o.distance(e,i),c=u*(this.minimumRadius*u/this.maximumRadius**2)**2;return a.fromElements(1/u,1/c,o)},e.o=a,e.t=p}));
