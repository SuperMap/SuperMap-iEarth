define(["exports","./Cartesian3-fecb63f1","./Math-ecf82623","./FeatureDetection-7479e310","./GeometryAttribute-60174428"],(function(e,o,r,a,t){"use strict";var i={},n=new o.o,l=new o.o,y=new t.n,s=new a.p$1;function c(e,r,i,c,u,x,f,m,z,h){var _=e+r;o.o.multiplyByScalar(c,Math.cos(_),n),o.o.multiplyByScalar(i,Math.sin(_),l),o.o.add(n,l,n);var p=Math.cos(e);p*=p;var v=Math.sin(e);v*=v;var O=x/Math.sqrt(f*p+u*v)/m;return t.n.fromAxisAngle(n,O,y),a.p$1.fromQuaternion(y,s),a.p$1.multiplyByVector(s,z,h),o.o.normalize(h,h),o.o.multiplyByScalar(h,m,h),h}var u=new o.o,x=new o.o,f=new o.o,m=new o.o;i.raisePositionsToHeight=function(e,r,a){for(var t=r.ellipsoid,i=r.height,n=r.extrudedHeight,l=a?e.length/3*2:e.length/3,y=new Float64Array(3*l),s=e.length,c=a?s:0,z=0;z<s;z+=3){var h=z+1,_=z+2,p=o.o.fromArray(e,z,u);t.scaleToGeodeticSurface(p,p);var v=o.o.clone(p,x),O=t.geodeticSurfaceNormal(p,m),d=o.o.multiplyByScalar(O,i,f);o.o.add(p,d,p),a&&(o.o.multiplyByScalar(O,n,d),o.o.add(v,d,v),y[z+c]=v.x,y[h+c]=v.y,y[_+c]=v.z),y[z]=p.x,y[h]=p.y,y[_]=p.z}return y};var z=new o.o,h=new o.o,_=new o.o;i.computeEllipsePositions=function(e,a,t){var i=e.semiMinorAxis,n=e.semiMajorAxis,l=e.rotation,y=e.center,s=8*e.granularity,m=i*i,p=n*n,v=n*i,O=o.o.magnitude(y),d=o.o.normalize(y,z),w=o.o.cross(o.o.UNIT_Z,y,h);w=o.o.normalize(w,w);var P=o.o.cross(d,w,_),M=1+Math.ceil(r.e.PI_OVER_TWO/s),I=r.e.PI_OVER_TWO/(M-1),T=r.e.PI_OVER_TWO-M*I;T<0&&(M-=Math.ceil(Math.abs(T)/I));var g,A,E,V,R,W=a?new Array(3*(M*(M+2)*2)):void 0,S=0,B=u,b=x,$=4*M*3,C=$-1,F=0,G=t?new Array($):void 0;for(B=c(T=r.e.PI_OVER_TWO,l,P,w,m,v,p,O,d,B),a&&(W[S++]=B.x,W[S++]=B.y,W[S++]=B.z),t&&(G[C--]=B.z,G[C--]=B.y,G[C--]=B.x),T=r.e.PI_OVER_TWO-I,g=1;g<M+1;++g){if(B=c(T,l,P,w,m,v,p,O,d,B),b=c(Math.PI-T,l,P,w,m,v,p,O,d,b),a){for(W[S++]=B.x,W[S++]=B.y,W[S++]=B.z,E=2*g+2,A=1;A<E-1;++A)V=A/(E-1),R=o.o.lerp(B,b,V,f),W[S++]=R.x,W[S++]=R.y,W[S++]=R.z;W[S++]=b.x,W[S++]=b.y,W[S++]=b.z}t&&(G[C--]=B.z,G[C--]=B.y,G[C--]=B.x,G[F++]=b.x,G[F++]=b.y,G[F++]=b.z),T=r.e.PI_OVER_TWO-(g+1)*I}for(g=M;g>1;--g){if(B=c(-(T=r.e.PI_OVER_TWO-(g-1)*I),l,P,w,m,v,p,O,d,B),b=c(T+Math.PI,l,P,w,m,v,p,O,d,b),a){for(W[S++]=B.x,W[S++]=B.y,W[S++]=B.z,E=2*(g-1)+2,A=1;A<E-1;++A)V=A/(E-1),R=o.o.lerp(B,b,V,f),W[S++]=R.x,W[S++]=R.y,W[S++]=R.z;W[S++]=b.x,W[S++]=b.y,W[S++]=b.z}t&&(G[C--]=B.z,G[C--]=B.y,G[C--]=B.x,G[F++]=b.x,G[F++]=b.y,G[F++]=b.z)}B=c(-(T=r.e.PI_OVER_TWO),l,P,w,m,v,p,O,d,B);var H={};return a&&(W[S++]=B.x,W[S++]=B.y,W[S++]=B.z,H.positions=W,H.numPts=M),t&&(G[C--]=B.z,G[C--]=B.y,G[C--]=B.x,H.outerPositions=G),H},e.C=i}));
