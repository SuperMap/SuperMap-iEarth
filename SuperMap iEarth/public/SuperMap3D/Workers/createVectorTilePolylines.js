import{a as Y}from"./chunk-AMRCVYIA.js";import{a as V}from"./chunk-MQMYX2JZ.js";import{a as F}from"./chunk-44AFRGCG.js";import"./chunk-EHDXVZQM.js";import{a as D}from"./chunk-NLYLRNUA.js";import{b as U}from"./chunk-7TOCOFC3.js";import{b as W}from"./chunk-3HZNWEV7.js";import{a as r}from"./chunk-LBR6REQR.js";import{a as N}from"./chunk-GXFCHGTA.js";import"./chunk-UBHQMGET.js";import"./chunk-EDZQSM3T.js";import"./chunk-PJGSCWXZ.js";import"./chunk-NUC3LT2W.js";import"./chunk-SFC4FDPW.js";var _=32767,or=new W,vr=new r;function cr(a,t,R,S,P){var v=a.length/3,I=a.subarray(0,v),k=a.subarray(v,2*v),p=a.subarray(2*v,3*v);V.zigZagDeltaDecode(I,k,p);for(var E=new Float32Array(a.length),c=0;c<v;++c){var e=I[c],b=k[c],s=p[c],y=N.lerp(t.west,t.east,e/_),g=N.lerp(t.south,t.north,b/_),A=N.lerp(R,S,s/_),m=W.fromRadians(y,g,A,or),x=P.cartographicToCartesian(m,vr);r.pack(x,E,c*3)}return E}var O=new D,Q=new U,X=new r,L={min:void 0,max:void 0};function sr(a){a=new Float64Array(a);var t=0;L.min=a[t++],L.max=a[t++],D.unpack(a,t,O),t+=D.packedLength,U.unpack(a,t,Q),t+=U.packedLength,r.unpack(a,t,X)}var Z=new r,q=new r,J=new r,dr=new r,K=new r;function fr(a,t){var R=new Uint16Array(a.positions),S=new Uint16Array(a.widths),P=new Uint32Array(a.counts),v=new Uint16Array(a.batchIds);sr(a.packedBuffer);var I=O,k=Q,p=X,E=L.min,c=L.max,e=cr(R,I,E,c,k),b=e.length/3,s=b*4-4,y=new Float32Array(s*3),g=new Float32Array(s*3),A=new Float32Array(s*3),m=new Float32Array(s*2),x=new Uint16Array(s),C=0,z=0,$=0,n,d=0,H=P.length;for(n=0;n<H;++n){for(var l=P[n],j=S[n],rr=v[n],i=0;i<l;++i){var f;if(i===0){var B=r.unpack(e,d*3,Z),ar=r.unpack(e,(d+1)*3,q);f=r.subtract(B,ar,J),r.add(B,f,f)}else f=r.unpack(e,(d+i-1)*3,J);var M=r.unpack(e,(d+i)*3,dr),h;if(i===l-1){var G=r.unpack(e,(d+l-1)*3,Z),tr=r.unpack(e,(d+l-2)*3,q);h=r.subtract(G,tr,K),r.add(G,h,h)}else h=r.unpack(e,(d+i+1)*3,K);r.subtract(f,p,f),r.subtract(M,p,M),r.subtract(h,p,h);for(var er=i===0?2:0,nr=i===l-1?2:4,T=er;T<nr;++T){r.pack(M,y,C),r.pack(f,g,C),r.pack(h,A,C),C+=3;var ir=T-2<0?-1:1;m[z++]=2*(T%2)-1,m[z++]=ir*j,x[$++]=rr}}d+=l}var o=F.createTypedArray(s,b*6-6),u=0,w=0;for(H=b-1,n=0;n<H;++n)o[w++]=u,o[w++]=u+2,o[w++]=u+1,o[w++]=u+1,o[w++]=u+2,o[w++]=u+3,u+=4;return t.push(y.buffer,g.buffer,A.buffer),t.push(m.buffer,x.buffer,o.buffer),{indexDatatype:o.BYTES_PER_ELEMENT===2?F.UNSIGNED_SHORT:F.UNSIGNED_INT,currentPositions:y.buffer,previousPositions:g.buffer,nextPositions:A.buffer,expandAndWidth:m.buffer,batchIds:x.buffer,indices:o.buffer}}var gr=Y(fr);export{gr as default};
