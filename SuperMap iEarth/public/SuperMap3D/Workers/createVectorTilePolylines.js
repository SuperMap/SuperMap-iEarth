define(["./AttributeCompression-b5a80a71","./Cartesian3-3a8bdb0b","./Cartographic-a2c313d7","./Cartesian2-b72655a5","./IndexDatatype-86677ec4","./Math-ecf82623","./createTaskProcessorWorker","./Check-52a7d806","./when-92c6cf3c","./WebGLConstants-42651efd"],(function(a,r,e,n,t,o,c,u,f,s){"use strict";var i=32767,p=new e.a,b=new r.o;var d=new n.h,w=new n.t,h=new r.o,y={min:void 0,max:void 0};var k=new r.o,v=new r.o,l=new r.o,A=new r.o,g=new r.o;return c((function(c,u){var f=new Uint16Array(c.positions),s=new Uint16Array(c.widths),x=new Uint32Array(c.counts),D=new Uint16Array(c.batchIds);!function(a){a=new Float64Array(a);var e=0;y.min=a[e++],y.max=a[e++],n.h.unpack(a,e,d),e+=n.h.packedLength,n.t.unpack(a,e,w),e+=n.t.packedLength,r.o.unpack(a,e,h)}(c.packedBuffer);var I,m=w,C=h,E=function(n,t,c,u,f){var s=n.length/3,d=n.subarray(0,s),w=n.subarray(s,2*s),h=n.subarray(2*s,3*s);a.t.zigZagDeltaDecode(d,w,h);for(var y=new Float32Array(n.length),k=0;k<s;++k){var v=d[k],l=w[k],A=h[k],g=o.e.lerp(t.west,t.east,v/i),x=o.e.lerp(t.south,t.north,l/i),D=o.e.lerp(c,u,A/i),I=e.a.fromRadians(g,x,D,p),m=f.cartographicToCartesian(I,b);r.o.pack(m,y,3*k)}return y}(f,d,y.min,y.max,m),T=E.length/3,U=4*T-4,F=new Float32Array(3*U),N=new Float32Array(3*U),P=new Float32Array(3*U),L=new Float32Array(2*U),S=new Uint16Array(U),_=0,G=0,R=0,W=0,B=x.length;for(I=0;I<B;++I){for(var M=x[I],z=s[I],H=D[I],O=0;O<M;++O){var Y;if(0===O){var Z=r.o.unpack(E,3*W,k),j=r.o.unpack(E,3*(W+1),v);Y=r.o.subtract(Z,j,l),r.o.add(Z,Y,Y)}else Y=r.o.unpack(E,3*(W+O-1),l);var q,J=r.o.unpack(E,3*(W+O),A);if(O===M-1){var K=r.o.unpack(E,3*(W+M-1),k),Q=r.o.unpack(E,3*(W+M-2),v);q=r.o.subtract(K,Q,g),r.o.add(K,q,q)}else q=r.o.unpack(E,3*(W+O+1),g);r.o.subtract(Y,C,Y),r.o.subtract(J,C,J),r.o.subtract(q,C,q);for(var V=O===M-1?2:4,X=0===O?2:0;X<V;++X){r.o.pack(J,F,_),r.o.pack(Y,N,_),r.o.pack(q,P,_),_+=3;var $=X-2<0?-1:1;L[G++]=X%2*2-1,L[G++]=$*z,S[R++]=H}}W+=M}var aa=t.IndexDatatype.createTypedArray(U,6*T-6),ra=0,ea=0;for(B=T-1,I=0;I<B;++I)aa[ea++]=ra,aa[ea++]=ra+2,aa[ea++]=ra+1,aa[ea++]=ra+1,aa[ea++]=ra+2,aa[ea++]=ra+3,ra+=4;return u.push(F.buffer,N.buffer,P.buffer),u.push(L.buffer,S.buffer,aa.buffer),{indexDatatype:2===aa.BYTES_PER_ELEMENT?t.IndexDatatype.UNSIGNED_SHORT:t.IndexDatatype.UNSIGNED_INT,currentPositions:F.buffer,previousPositions:N.buffer,nextPositions:P.buffer,expandAndWidth:L.buffer,batchIds:S.buffer,indices:aa.buffer}}))}));
