define(["./Cartesian3-3a8bdb0b","./Cartesian4-72b88c9e","./Cartographic-a2c313d7","./when-92c6cf3c","./Math-ecf82623","./createTaskProcessorWorker","./Check-52a7d806"],(function(e,r,a,t,n,o,i){"use strict";var s=new r.e(1,1/255,1/65025,1/160581375),f=new r.e,c=1024;function u(a,t,o,i,u,d,h){var v=a.longitude,g=a.latitude,b=a.height;if(v=n.e.toDegrees(v),g=n.e.toDegrees(g),v<t[0]||v>t[2]||g<t[1]||g>t[3])return-1;for(var l=!1,p=0,k=.1*i,m=0;m<=o;m+=i){if(Math.abs(u+m-b)<k){l=!0;break}p++}if(!l)return-1;if(d.length<0)return-1;l=!1;for(var w=0;w<d.length;w+=2){var C=e.o.fromDegrees(v,g,b),D=e.o.fromDegrees(d[w+0],d[w+1],b);if(e.o.distance(C,D)<k){l=!0;break}}if(!l)return-1;var x=t[2]-t[0],y=(b=t[3]-t[1],t[0]-.025*x),M=t[1]-.025*b;x+=.05*x,b+=.05*b;var I=parseInt((v-y)/x*c),P=parseInt((g-M)/b*c);I=I<1?1:I,P=P<1?1:P;var z=h[p],A=0;for(w=-1;w<2;w++)for(var B=-1;B<2;B++){var R=4*(c*(P+B)+(I+w));f.x=z[R],f.y=z[R+1],f.z=z[R+2],f.w=z[R+3],r.e.divideByScalar(f,255,f),A=Math.max(A,r.e.dot(f,s))}return A=A>.999?1:A}return o((function(r,t){for(var n=r.points,o=r.enuPoints,i=r.bounds,s=r.extend,f=r.spacing,c=r.bottom,d=r.pixelsArray,h=[],v=0,g=n.length;v<g;v++){var b=n[v],l=u(a.a.fromCartesian(b),i,s,f,c,o,d);h.push({position:e.o.clone(b),shadowRatio:l})}return{resultData:h}}))}));
