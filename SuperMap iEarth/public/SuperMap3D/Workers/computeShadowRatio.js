import{a as M}from"./chunk-AMRCVYIA.js";import{a as m}from"./chunk-ZVKIUA3Y.js";import{b as E}from"./chunk-3HZNWEV7.js";import{a as s}from"./chunk-LBR6REQR.js";import{a as I}from"./chunk-GXFCHGTA.js";import"./chunk-UBHQMGET.js";import"./chunk-EDZQSM3T.js";import"./chunk-PJGSCWXZ.js";import"./chunk-NUC3LT2W.js";import"./chunk-SFC4FDPW.js";var O=new m(1,1/255,1/65025,1/160581375),n=new m,R=1024;function P(r,a,u,c,T,f,y){var t=r.longitude,i=r.latitude,o=r.height;if(t=I.toDegrees(t),i=I.toDegrees(i),t<a[0]||t>a[2]||i<a[1]||i>a[3])return-1;for(var v=!1,l=0,g=c*.1,h=0;h<=u;h+=c){if(Math.abs(T+h-o)<g){v=!0;break}l++}if(!v||f.length<0)return-1;v=!1;for(var e=0;e<f.length;e+=2){var C=s.fromDegrees(t,i,o),A=s.fromDegrees(f[e+0],f[e+1],o),U=s.distance(C,A);if(U<g){v=!0;break}}if(!v)return-1;var p=a[2]-a[0],o=a[3]-a[1],z=a[0]-p*.025,B=a[1]-o*.025;p+=p*.05,o+=o*.05;var x=parseInt((t-z)/p*R),w=parseInt((i-B)/o*R);x=x<1?1:x,w=w<1?1:w;for(var D=y[l],d=0,e=-1;e<2;e++)for(var S=-1;S<2;S++){var k=(R*(w+S)+(x+e))*4;n.x=D[k],n.y=D[k+1],n.z=D[k+2],n.w=D[k+3],m.divideByScalar(n,255,n),d=Math.max(d,m.dot(n,O))}return d=d>.999?1:d,d}function V(r,a){for(var u=r.points,c=r.enuPoints,T=r.bounds,f=r.extend,y=r.spacing,t=r.bottom,i=r.pixelsArray,v=[],l=0,g=u.length;l<g;l++){var h=u[l],e=E.fromCartesian(h),C=P(e,T,f,y,t,c,i);v.push({position:s.clone(h),shadowRatio:C})}return{resultData:v}}var K=M(V);export{K as default};
