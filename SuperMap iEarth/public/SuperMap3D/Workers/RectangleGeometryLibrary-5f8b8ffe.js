define(["exports","./Cartesian3-fecb63f1","./Cartographic-d606c511","./when-92c6cf3c","./Check-52a7d806","./buildModuleUrl-d80eb436","./Math-ecf82623","./GeometryAttribute-60174428","./Cartesian2-21b2f76f"],(function(t,n,a,r,e,o,s,i,h){"use strict";var g=Math.cos,u=Math.sin,c=Math.sqrt,l={computePosition:function(t,n,a,e,o,s,i){var h=n.radiiSquared,l=t.nwCorner,C=t.boundingRectangle,d=l.latitude-t.granYCos*e+o*t.granXSin,S=g(d),w=u(d),f=h.z*w,X=l.longitude+e*t.granYSin+o*t.granXCos,Y=S*g(X),O=S*u(X),v=h.x*Y,_=h.y*O,M=c(v*Y+_*O+f*w);if(s.x=v/M,s.y=_/M,s.z=f/M,a){var p=t.stNwCorner;r.e(p)?(d=p.latitude-t.stGranYCos*e+o*t.stGranXSin,X=p.longitude+e*t.stGranYSin+o*t.stGranXCos,i.x=(X-t.stWest)*t.lonScalar,i.y=(d-t.stSouth)*t.latScalar):(i.x=(X-C.west)*t.lonScalar,i.y=(d-C.south)*t.latScalar)}}},C=new i.f,d=new n.o,S=new a.a,w=new n.o,f=new o.n;function X(t,a,r,e,o,s,h){var g=Math.cos(a),u=e*g,c=r*g,l=Math.sin(a),S=e*l,X=r*l;d=f.project(t,d),d=n.o.subtract(d,w,d);var Y=i.f.fromRotation(a,C);d=i.f.multiplyByVector(Y,d,d),d=n.o.add(d,w,d),s-=1,h-=1;var O=(t=f.unproject(d,t)).latitude,v=O+s*X,_=O-u*h,M=O-u*h+s*X,p=Math.max(O,v,_,M),R=Math.min(O,v,_,M),W=t.longitude,m=W+s*c,G=W+h*S,I=W+h*S+s*c;return{north:p,south:R,east:Math.max(W,m,G,I),west:Math.min(W,m,G,I),granYCos:u,granYSin:S,granXCos:c,granXSin:X,nwCorner:t}}l.computeOptions=function(t,n,a,r,o,i,g){var u=t.east,c=t.west,l=t.north,C=t.south,d=!1,Y=!1;l===s.e.PI_OVER_TWO&&(d=!0),C===-s.e.PI_OVER_TWO&&(Y=!0);var O,v,_,M,p,R=l-C;_=(p=c>u?s.e.TWO_PI-c+u:u-c)/((O=Math.ceil(p/n)+1)-1),M=R/((v=Math.ceil(R/n)+1)-1);var W=h.h.northwest(t,i),m=h.h.center(t,S);(0!==a||0!==r)&&(m.longitude<W.longitude&&(m.longitude+=s.e.TWO_PI),w=f.project(m,w));var G=M,I=_,P=h.h.clone(t,o),b={granYCos:G,granYSin:0,granXCos:I,granXSin:0,nwCorner:W,boundingRectangle:P,width:O,height:v,northCap:d,southCap:Y};if(0!==a){var T=X(W,a,_,M,0,O,v);if(l=T.north,C=T.south,u=T.east,c=T.west,l<-s.e.PI_OVER_TWO||l>s.e.PI_OVER_TWO||C<-s.e.PI_OVER_TWO||C>s.e.PI_OVER_TWO)throw new e.t("Rotated rectangle is invalid.  It crosses over either the north or south pole.");b.granYCos=T.granYCos,b.granYSin=T.granYSin,b.granXCos=T.granXCos,b.granXSin=T.granXSin,P.north=l,P.south=C,P.east=u,P.west=c}if(0!==r){a-=r;var x=h.h.northwest(P,g),y=X(x,a,_,M,0,O,v);b.stGranYCos=y.granYCos,b.stGranXCos=y.granXCos,b.stGranYSin=y.granYSin,b.stGranXSin=y.granXSin,b.stNwCorner=x,b.stWest=y.west,b.stSouth=y.south}return b},t.j=l}));
