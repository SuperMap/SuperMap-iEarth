import{a as I}from"./chunk-DDMVSBHB.js";import{a as x,b as G}from"./chunk-MPSLJKIO.js";import{a as d}from"./chunk-RYEDLSXB.js";import{a as g}from"./chunk-44AFRGCG.js";import{a as $}from"./chunk-UIA2BV6O.js";import{d as K,k as X,l as S}from"./chunk-CJHFPVIB.js";import{b as Q}from"./chunk-SSYG2MIY.js";import{a as D}from"./chunk-SRPTWKHW.js";import{a as M}from"./chunk-7TOCOFC3.js";import{a as A}from"./chunk-LBR6REQR.js";import{a as H}from"./chunk-GXFCHGTA.js";import{a as T}from"./chunk-UBHQMGET.js";import{a as l}from"./chunk-PJGSCWXZ.js";import{a as R}from"./chunk-NUC3LT2W.js";var U=new M,at=new A,ut=new A,mt=new A,vt=new A;function O(t){t=T(t,T.EMPTY_OBJECT);var o=t.length,e=t.topRadius,b=t.bottomRadius,r=T(t.vertexFormat,d.DEFAULT),s=T(t.slices,128);if(!R(o))throw new l("options.length must be defined.");if(!R(e))throw new l("options.topRadius must be defined.");if(!R(b))throw new l("options.bottomRadius must be defined.");if(s<3)throw new l("options.slices must be greater than or equal to 3.");if(R(t.offsetAttribute)&&t.offsetAttribute===G.TOP)throw new l("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._length=o,this._topRadius=e,this._bottomRadius=b,this._vertexFormat=d.clone(r),this._slices=s,this._offsetAttribute=t.offsetAttribute,this._workerName="createCylinderGeometry"}O.packedLength=d.packedLength+5;O.pack=function(t,o,e){if(!R(t))throw new l("value is required");if(!R(o))throw new l("array is required");return e=T(e,0),d.pack(t._vertexFormat,o,e),e+=d.packedLength,o[e++]=t._length,o[e++]=t._topRadius,o[e++]=t._bottomRadius,o[e++]=t._slices,o[e]=T(t._offsetAttribute,-1),o};var tt=new d,E={vertexFormat:tt,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};O.unpack=function(t,o,e){if(!R(t))throw new l("array is required");o=T(o,0);var b=d.unpack(t,o,tt);o+=d.packedLength;var r=t[o++],s=t[o++],p=t[o++],C=t[o++],_=t[o];return R(e)?(e._vertexFormat=d.clone(b,e._vertexFormat),e._length=r,e._topRadius=s,e._bottomRadius=p,e._slices=C,e._offsetAttribute=_===-1?void 0:_,e):(E.length=r,E.topRadius=s,E.bottomRadius=p,E.slices=C,E.offsetAttribute=_===-1?void 0:_,new O(E))};O.createGeometry=function(t){var o=t._length,e=t._topRadius,b=t._bottomRadius,r=t._vertexFormat,s=t._slices;if(!(o<=0||e<0||b<0||e===0&&b===0)){var p=s+s,C=s+p,_=p+p,k=I.computePositions(o,e,b,s,!0),z=r.st?new Float32Array(_*2):void 0,u=r.normal?new Float32Array(_*3):void 0,m=r.tangent?new Float32Array(_*3):void 0,v=r.bitangent?new Float32Array(_*3):void 0,i,B=r.normal||r.tangent||r.bitangent;if(B){var et=r.tangent||r.bitangent,c=0,h=0,w=0,V=Math.atan2(b-e,o),n=at;n.z=Math.sin(V);var Y=Math.cos(V),F=mt,y=ut;for(i=0;i<s;i++){var Z=i/s*H.TWO_PI,rt=Y*Math.cos(Z),ot=Y*Math.sin(Z);B&&(n.x=rt,n.y=ot,et&&(F=A.normalize(A.cross(A.UNIT_Z,n,F),F)),r.normal&&(u[c++]=n.x,u[c++]=n.y,u[c++]=n.z,u[c++]=n.x,u[c++]=n.y,u[c++]=n.z),r.tangent&&(m[h++]=F.x,m[h++]=F.y,m[h++]=F.z,m[h++]=F.x,m[h++]=F.y,m[h++]=F.z),r.bitangent&&(y=A.normalize(A.cross(n,F,y),y),v[w++]=y.x,v[w++]=y.y,v[w++]=y.z,v[w++]=y.x,v[w++]=y.y,v[w++]=y.z))}for(i=0;i<s;i++)r.normal&&(u[c++]=0,u[c++]=0,u[c++]=-1),r.tangent&&(m[h++]=1,m[h++]=0,m[h++]=0),r.bitangent&&(v[w++]=0,v[w++]=-1,v[w++]=0);for(i=0;i<s;i++)r.normal&&(u[c++]=0,u[c++]=0,u[c++]=1),r.tangent&&(m[h++]=1,m[h++]=0,m[h++]=0),r.bitangent&&(v[w++]=0,v[w++]=1,v[w++]=0)}var it=12*s-12,f=g.createTypedArray(_,it),a=0,L=0;for(i=0;i<s-1;i++)f[a++]=L,f[a++]=L+2,f[a++]=L+3,f[a++]=L,f[a++]=L+3,f[a++]=L+1,L+=2;for(f[a++]=p-2,f[a++]=0,f[a++]=1,f[a++]=p-2,f[a++]=1,f[a++]=p-1,i=1;i<s-1;i++)f[a++]=p+i+1,f[a++]=p+i,f[a++]=p;for(i=1;i<s-1;i++)f[a++]=C,f[a++]=C+i,f[a++]=C+i+1;var j=0;if(r.st){var N=Math.max(e,b);for(i=0;i<_;i++){var J=A.fromArray(k,i*3,vt);z[j++]=(J.x+N)/(2*N),z[j++]=(J.y+N)/(2*N)}}var P=new $;r.position&&(P.position=new S({componentDatatype:D.DOUBLE,componentsPerAttribute:3,values:k})),r.normal&&(P.normal=new S({componentDatatype:D.FLOAT,componentsPerAttribute:3,values:u})),r.tangent&&(P.tangent=new S({componentDatatype:D.FLOAT,componentsPerAttribute:3,values:m})),r.bitangent&&(P.bitangent=new S({componentDatatype:D.FLOAT,componentsPerAttribute:3,values:v})),r.st&&(P.st=new S({componentDatatype:D.FLOAT,componentsPerAttribute:2,values:z})),U.x=o*.5,U.y=Math.max(b,e);var ft=new K(A.ZERO,M.magnitude(U));if(R(t._offsetAttribute)){o=k.length;var W=new Uint8Array(o/3),st=t._offsetAttribute===G.NONE?0:1;x(W,st),P.applyOffset=new S({componentDatatype:D.UNSIGNED_BYTE,componentsPerAttribute:1,values:W})}return new X({attributes:P,indices:f,primitiveType:Q.TRIANGLES,boundingSphere:ft,offsetAttribute:t._offsetAttribute})}};var q;O.getUnitCylinder=function(){return R(q)||(q=O.createGeometry(new O({topRadius:1,bottomRadius:1,length:1,vertexFormat:d.POSITION_ONLY}))),q};var Dt=O;export{Dt as a};
