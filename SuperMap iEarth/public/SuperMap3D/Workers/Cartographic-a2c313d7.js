define(["exports","./Cartesian3-3a8bdb0b","./Check-52a7d806","./when-92c6cf3c","./Math-ecf82623"],(function(e,t,i,n,o){"use strict";var a=new t.o,r=new t.o;function u(e,u,d,l,s){if(!n.e(e))throw new i.t("cartesian is required.");if(!n.e(u))throw new i.t("oneOverRadii is required.");if(!n.e(d))throw new i.t("oneOverRadiiSquared is required.");if(!n.e(l))throw new i.t("centerToleranceSquared is required.");var h=e.x,f=e.y,c=e.z,g=u.x,p=u.y,w=u.z,y=h*h*g*g,m=f*f*p*p,q=c*c*w*w,b=y+m+q,v=Math.sqrt(1/b),R=t.o.multiplyByScalar(e,v,a);if(b<l)return isFinite(v)?t.o.clone(R,s):void 0;var O=d.x,M=d.y,z=d.z,x=r;x.x=R.x*O*2,x.y=R.y*M*2,x.z=R.z*z*2;var S,E,C,B,P,A,D,I=(1-v)*t.o.magnitude(e)/(.5*t.o.magnitude(x)),L=0;do{L=(S=y*(P=(E=1/(1+(I-=L)*O))*E)+m*(A=(C=1/(1+I*M))*C)+q*(D=(B=1/(1+I*z))*B)-1)/(-2*(y*(P*E)*O+m*(A*C)*M+q*(D*B)*z))}while(Math.abs(S)>o.e.EPSILON12);return n.e(s)?(s.x=h*E,s.y=f*C,s.z=c*B,s):new t.o(h*E,f*C,c*B)}function d(e,t,i){this.longitude=n.u(e,0),this.latitude=n.u(t,0),this.height=n.u(i,0)}d.fromRadians=function(e,t,o,a){return i.o.typeOf.number("longitude",e),i.o.typeOf.number("latitude",t),o=n.u(o,0),n.e(a)?(a.longitude=e,a.latitude=t,a.height=o,a):new d(e,t,o)},d.fromDegrees=function(e,t,n,a){return i.o.typeOf.number("longitude",e),i.o.typeOf.number("latitude",t),e=o.e.toRadians(e),t=o.e.toRadians(t),d.fromRadians(e,t,n,a)};var l=new t.o,s=new t.o,h=new t.o,f=new t.o(1/6378137,1/6378137,1/6356752.314245179),c=new t.o(1/40680631590769,1/40680631590769,1/40408299984661.445),g=o.e.EPSILON1;d.fromCartesian=function(e,i,a){var r=n.e(i)?i.oneOverRadii:f,p=n.e(i)?i.oneOverRadiiSquared:c,w=u(e,r,p,n.e(i)?i._centerToleranceSquared:g,s);if(n.e(w)){var y=t.o.multiplyComponents(w,p,l);y=t.o.normalize(y,y);var m=t.o.subtract(e,w,h),q=Math.atan2(y.y,y.x),b=Math.asin(y.z),v=o.e.sign(t.o.dot(m,e))*t.o.magnitude(m);return n.e(a)?(a.longitude=q,a.latitude=b,a.height=v,a):new d(q,b,v)}},d.toCartesian=function(e,n,o){return i.o.defined("cartographic",e),t.o.fromRadians(e.longitude,e.latitude,e.height,n,o)},d.sphericalDistance=function(e,t,n,a){if(i.o.defined("longitudeA",e),i.o.defined("longitudeB",n),i.o.defined("latitudeA",t),i.o.defined("latitudeB",a),e===n&&t===a)return 0;var r=o.e.toRadians(t),u=o.e.toRadians(a),d=o.e.toRadians(e),l=o.e.toRadians(n),s=d*d+r*r,h=l*l+u*u,f=(s+h-((d-l)*(d-l)+(r-u)*(r-u)))/(2*Math.sqrt(s)*Math.sqrt(h));return f=o.e.clamp(f,-1,1),6378137*Math.acos(f)},d.clone=function(e,t){if(n.e(e))return n.e(t)?(t.longitude=e.longitude,t.latitude=e.latitude,t.height=e.height,t):new d(e.longitude,e.latitude,e.height)},d.equals=function(e,t){return e===t||n.e(e)&&n.e(t)&&e.longitude===t.longitude&&e.latitude===t.latitude&&e.height===t.height},d.equalsEpsilon=function(e,t,o){return i.o.typeOf.number("epsilon",o),e===t||n.e(e)&&n.e(t)&&Math.abs(e.longitude-t.longitude)<=o&&Math.abs(e.latitude-t.latitude)<=o&&Math.abs(e.height-t.height)<=o},d.ZERO=Object.freeze(new d(0,0,0)),d.prototype.clone=function(e){return d.clone(this,e)},d.prototype.equals=function(e){return d.equals(this,e)},d.prototype.equalsEpsilon=function(e,t){return d.equalsEpsilon(this,e,t)},d.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"},e.P=u,e.a=d}));
