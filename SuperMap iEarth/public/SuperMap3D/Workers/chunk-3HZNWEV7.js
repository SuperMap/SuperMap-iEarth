import{a as i}from"./chunk-LBR6REQR.js";import{a as f}from"./chunk-GXFCHGTA.js";import{a as O}from"./chunk-UBHQMGET.js";import{a as s}from"./chunk-EDZQSM3T.js";import{a as M}from"./chunk-PJGSCWXZ.js";import{a as t}from"./chunk-NUC3LT2W.js";var F=new i,H=new i;function V(e,r,a,o,d){if(!t(e))throw new M("cartesian is required.");if(!t(r))throw new M("oneOverRadii is required.");if(!t(a))throw new M("oneOverRadiiSquared is required.");if(!t(o))throw new M("centerToleranceSquared is required.");var m=e.x,v=e.y,u=e.z,l=r.x,p=r.y,c=r.z,h=m*m*l*l,b=v*v*p*p,x=u*u*c*c,I=h+b+x,z=Math.sqrt(1/I),R=i.multiplyByScalar(e,z,F);if(I<o)return isFinite(z)?i.clone(R,d):void 0;var C=a.x,T=a.y,E=a.z,g=H;g.x=R.x*C*2,g.y=R.y*T*2,g.z=R.z*E*2;var S=(1-z)*i.magnitude(e)/(.5*i.magnitude(g)),P=0,G,X,w,y,q,N,Z,D,Y,L,j;do{S-=P,w=1/(1+S*C),y=1/(1+S*T),q=1/(1+S*E),N=w*w,Z=y*y,D=q*q,Y=N*w,L=Z*y,j=D*q,G=h*N+b*Z+x*D-1,X=h*Y*C+b*L*T+x*j*E;var B=-2*X;P=G/B}while(Math.abs(G)>f.EPSILON12);return t(d)?(d.x=m*w,d.y=v*y,d.z=u*q,d):new i(m*w,v*y,u*q)}var k=V;function n(e,r,a){this.longitude=O(e,0),this.latitude=O(r,0),this.height=O(a,0)}n.fromRadians=function(e,r,a,o){return s.typeOf.number("longitude",e),s.typeOf.number("latitude",r),a=O(a,0),t(o)?(o.longitude=e,o.latitude=r,o.height=a,o):new n(e,r,a)};n.fromDegrees=function(e,r,a,o){return s.typeOf.number("longitude",e),s.typeOf.number("latitude",r),e=f.toRadians(e),r=f.toRadians(r),n.fromRadians(e,r,a,o)};var _=new i,A=new i,J=new i,K=new i(1/6378137,1/6378137,1/6356752314245179e-9),Q=new i(1/(6378137*6378137),1/(6378137*6378137),1/(6356752314245179e-9*6356752314245179e-9)),U=f.EPSILON1;n.fromCartesian=function(e,r,a){var o=t(r)?r.oneOverRadii:K,d=t(r)?r.oneOverRadiiSquared:Q,m=t(r)?r._centerToleranceSquared:U,v=k(e,o,d,m,A);if(!!t(v)){var u=i.multiplyComponents(v,d,_);u=i.normalize(u,u);var l=i.subtract(e,v,J),p=Math.atan2(u.y,u.x),c=Math.asin(u.z),h=f.sign(i.dot(l,e))*i.magnitude(l);return t(a)?(a.longitude=p,a.latitude=c,a.height=h,a):new n(p,c,h)}};n.toCartesian=function(e,r,a){return s.defined("cartographic",e),i.fromRadians(e.longitude,e.latitude,e.height,r,a)};n.sphericalDistance=function(e,r,a,o){if(s.defined("longitudeA",e),s.defined("longitudeB",a),s.defined("latitudeA",r),s.defined("latitudeB",o),e===a&&r===o)return 0;var d=f.toRadians(r),m=f.toRadians(o),v=f.toRadians(e),u=f.toRadians(a),l=v*v+d*d,p=u*u+m*m,c=(v-u)*(v-u)+(d-m)*(d-m),h=(l+p-c)/(2*Math.sqrt(l)*Math.sqrt(p));return h=f.clamp(h,-1,1),Math.acos(h)*6378137};n.clone=function(e,r){if(!!t(e))return t(r)?(r.longitude=e.longitude,r.latitude=e.latitude,r.height=e.height,r):new n(e.longitude,e.latitude,e.height)};n.equals=function(e,r){return e===r||t(e)&&t(r)&&e.longitude===r.longitude&&e.latitude===r.latitude&&e.height===r.height};n.equalsEpsilon=function(e,r,a){return s.typeOf.number("epsilon",a),e===r||t(e)&&t(r)&&Math.abs(e.longitude-r.longitude)<=a&&Math.abs(e.latitude-r.latitude)<=a&&Math.abs(e.height-r.height)<=a};n.ZERO=Object.freeze(new n(0,0,0));n.prototype.clone=function(e){return n.clone(this,e)};n.prototype.equals=function(e){return n.equals(this,e)};n.prototype.equalsEpsilon=function(e,r){return n.equalsEpsilon(this,e,r)};n.prototype.toString=function(){return"("+this.longitude+", "+this.latitude+", "+this.height+")"};var ve=n;export{k as a,ve as b};
