define(["./buildModuleUrl-9eef8841","./Cartesian2-b72655a5","./Cartesian3-3a8bdb0b","./Cartographic-a2c313d7","./Check-52a7d806","./when-92c6cf3c","./Math-ecf82623","./ArcType-31298545","./arrayRemoveDuplicates-a6924649","./ComponentDatatype-98414d16","./EllipsoidGeodesic-03c935a0","./EllipsoidRhumbLine-b1a766ae","./EncodedCartesian3-4f120b1b","./GeometryAttribute-f47bd1cb","./IntersectionTests-6e80d61c","./FeatureDetection-cec0163f","./Plane-33393da8","./WebMercatorProjection-ee891935","./Event-3390cd7d","./RuntimeError-c6a62a80","./WebGLConstants-42651efd","./Cartesian4-72b88c9e"],(function(e,t,o,i,n,r,a,s,l,u,c,h,p,g,d,f,w,v,m,_,y,T){"use strict";function E(o){o=r.u(o,{}),this._ellipsoid=r.u(o.ellipsoid,t.t.WGS84),this._rectangle=r.u(o.rectangle,t.h.MAX_VALUE),this._projection=new e.n(this._ellipsoid),this._numberOfLevelZeroTilesX=r.u(o.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=r.u(o.numberOfLevelZeroTilesY,1),this._customDPI=o.customDPI,this._scaleDenominators=o.scaleDenominators,this._tileWidth=r.u(o.tileWidth,256),this._tileHeight=r.u(o.tileHeight,256),this._beginLevel=r.u(o.beginLevel,0),this._orgin=r.u(o.orgin,void 0)}Object.defineProperties(E.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}},beginLevel:{get:function(){return this._beginLevel}},orgin:{get:function(){return this._orgin}}}),E.prototype.getNumberOfXTilesAtLevel=function(e){if(r.e(this._customDPI)&&r.e(this._scaleDenominators)){var t=this.calculateResolution(e),o=this._tileWidth*t.x;return Math.ceil(this._rectangle.width/o)}return this._numberOfLevelZeroTilesX<<e-this._beginLevel},E.prototype.getNumberOfYTilesAtLevel=function(e){if(r.e(this._customDPI)&&r.e(this._scaleDenominators)){var t=this.calculateResolution(e),o=this._tileHeight*t.y;return Math.ceil(this._rectangle.height/o)}return this._numberOfLevelZeroTilesY<<e-this._beginLevel},E.prototype.rectangleToNativeRectangle=function(e,o){n.o.defined("rectangle",e);var i=a.e.toDegrees(e.west),s=a.e.toDegrees(e.south),l=a.e.toDegrees(e.east),u=a.e.toDegrees(e.north);return r.e(o)?(o.west=i,o.south=s,o.east=l,o.north=u,o):new t.h(i,s,l,u)},E.prototype.tileXYToNativeRectangle=function(e,t,o,i){var n=this.tileXYToRectangle(e,t,o,i);return n.west=a.e.toDegrees(n.west),n.south=a.e.toDegrees(n.south),n.east=a.e.toDegrees(n.east),n.north=a.e.toDegrees(n.north),n},E.prototype.tileXYToRectangle=function(e,o,i,n){var a=this._rectangle,s=r.e(this._orgin)?this._orgin.longitude:a.west,l=r.e(this._orgin)?this._orgin.latitude:a.north;if(r.e(this._customDPI)&&r.e(this._scaleDenominators)){var u=this.calculateResolution(i),c=s+e*this._tileWidth*u.x,h=s+(e+1)*this._tileWidth*u.x,p=l-o*this._tileHeight*u.y,g=l-(o+1)*this._tileHeight*u.y;return r.e(n)?(n.west=c,n.south=g,n.east=h,n.north=p,n):new t.h(c,g,h,p)}var d=this.getNumberOfXTilesAtLevel(i),f=this.getNumberOfYTilesAtLevel(i),w=a.width/d,v=(c=e*w+a.west,h=(e+1)*w+a.west,a.height/f);p=a.north-o*v,g=a.north-(o+1)*v;return r.e(n)||(n=new t.h(c,g,h,p)),n.west=c,n.south=g,n.east=h,n.north=p,n},E.prototype.positionToTileXY=function(e,o,i){var n=this._rectangle;if(t.h.contains(n,e)){var s=this.getNumberOfXTilesAtLevel(o),l=this.getNumberOfYTilesAtLevel(o),u=r.e(this._orgin)?this._orgin.longitude:n.west,c=r.e(this._orgin)?this._orgin.latitude:n.north,h=n.width/s,p=n.height/l;if(r.e(this._customDPI)&&r.e(this._scaleDenominators)){var g=this.calculateResolution(o);h=this._tileWidth*g.x,p=this._tileHeight*g.y}var d=e.longitude;n.east<n.west&&(d+=a.e.TWO_PI),r.e(this._orgin)&&(s+=this._orgin.longitude!=n.west?Math.ceil((e.longitude-this._orgin.longitude)/h):0,l+=this._orgin.latitude!=n.north?Math.ceil((this._orgin.latitude-e.latitude)/p):0);var f=(d-u)/h|0;f>=s&&(f=s-1);var w=(c-e.latitude)/p|0;return w>=l&&(w=l-1),r.e(i)?(i.x=f,i.y=w,i):new t.o(f,w)}},E.prototype.calculateResolution=function(e){var o=.0254*this._scaleDenominators[e-this._beginLevel]/this._customDPI.x,i=.0254*this._scaleDenominators[e-this._beginLevel]/this._customDPI.y,n=t.t.WGS84.maximumRadius;return new t.o(o/n,i/n)};var O=new o.o,b=new o.o,L=new i.a,I=new o.o,P=new o.o,D=new e.i,k=new E,N=[new i.a,new i.a,new i.a,new i.a],x=new t.o,A={};function S(e){i.a.fromRadians(e.east,e.north,0,N[0]),i.a.fromRadians(e.west,e.north,0,N[1]),i.a.fromRadians(e.east,e.south,0,N[2]),i.a.fromRadians(e.west,e.south,0,N[3]);var t,o=0,n=0,r=0,a=0,s=A._terrainHeightsMaxLevel;for(t=0;t<=s;++t){for(var l=!1,u=0;u<4;++u){var c=N[u];if(k.positionToTileXY(c,t,x),0===u)r=x.x,a=x.y;else if(r!==x.x||a!==x.y){l=!0;break}}if(l)break;o=r,n=a}if(0!==t)return{x:o,y:n,level:t>s?s:t-1}}A.initialize=function(){var t=A._initPromise;return r.e(t)||(t=e.t.fetchJson(e.n$1("Assets/approximateTerrainHeights.json")).then((function(e){A._terrainHeights=e})),A._initPromise=t),t},A.getMinimumMaximumHeights=function(e,i){if(n.o.defined("rectangle",e),!r.e(A._terrainHeights))throw new n.t("You must call ApproximateTerrainHeights.initialize and wait for the promise to resolve before using this function");i=r.u(i,t.t.WGS84);var a=S(e),s=A._defaultMinTerrainHeight,l=A._defaultMaxTerrainHeight;if(r.e(a)){var u=a.level+"-"+a.x+"-"+a.y,c=A._terrainHeights[u];r.e(c)&&(s=c[0],l=c[1]),i.cartographicToCartesian(t.h.northeast(e,L),O),i.cartographicToCartesian(t.h.southwest(e,L),b),o.o.midpoint(b,O,I);var h=i.scaleToGeodeticSurface(I,P);if(r.e(h)){var p=o.o.distance(I,h);s=Math.min(s,-p)}else s=A._defaultMinTerrainHeight}return{minimumTerrainHeight:s=Math.max(A._defaultMinTerrainHeight,s),maximumTerrainHeight:l}},A.getBoundingSphere=function(o,i){if(n.o.defined("rectangle",o),!r.e(A._terrainHeights))throw new n.t("You must call ApproximateTerrainHeights.initialize and wait for the promise to resolve before using this function");i=r.u(i,t.t.WGS84);var a=S(o),s=A._defaultMaxTerrainHeight;if(r.e(a)){var l=a.level+"-"+a.x+"-"+a.y,u=A._terrainHeights[l];r.e(u)&&(s=u[1])}var c=e.i.fromRectangle3D(o,i,0);return e.i.fromRectangle3D(o,i,s,D),e.i.union(c,D,c)},A._terrainHeightsMaxLevel=6,A._defaultMaxTerrainHeight=9e3,A._defaultMinTerrainHeight=-1e5,A._terrainHeights=void 0,A._initPromise=void 0,Object.defineProperties(A,{initialized:{get:function(){return r.e(A._terrainHeights)}}});var C=[e.n,v.t],H=C.length,M=Math.cos(a.e.toRadians(30)),R=Math.cos(a.e.toRadians(150));function z(e){var o=(e=r.u(e,r.u.EMPTY_OBJECT)).positions;if(!r.e(o)||o.length<2)throw new n.t("At least two positions are required.");if(r.e(e.arcType)&&e.arcType!==s.L.GEODESIC&&e.arcType!==s.L.RHUMB)throw new n.t("Valid options for arcType are ArcType.GEODESIC and ArcType.RHUMB.");this.width=r.u(e.width,1),this._positions=o,this.granularity=r.u(e.granularity,9999),this.loop=r.u(e.loop,!1),this.arcType=r.u(e.arcType,s.L.GEODESIC),this._ellipsoid=r.u(e.ellipsoid,t.t.WGS84),this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(z.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+t.t.packedLength+1+1}}}),z.setProjectionAndEllipsoid=function(e,t){for(var o=0,i=0;i<H;i++)if(t instanceof C[i]){o=i;break}e._projectionIndex=o,e._ellipsoid=t.ellipsoid};var j=new o.o,Y=new o.o,G=new o.o;function W(e,t,i,n,r){var a=Z(n,e,0,j),s=Z(n,e,i,Y),l=Z(n,t,0,G),u=$(s,a,Y),c=$(l,a,G);return o.o.cross(c,u,r),o.o.normalize(r,r)}var F=new i.a,B=new o.o,q=new o.o,X=new o.o;function U(e,t,i,n,r,a,l,u,p,g,d){if(0!==r){var f;a===s.L.GEODESIC?f=new c.E(e,t,l):a===s.L.RHUMB&&(f=new h.P(e,t,l));var w=f.surfaceDistance;if(!(w<r))for(var v=W(e,t,n,l,X),m=Math.ceil(w/r),_=w/m,y=_,T=m-1,E=u.length,O=0;O<T;O++){var b=f.interpolateUsingSurfaceDistance(y,F),L=Z(l,b,i,B),I=Z(l,b,n,q);o.o.pack(v,u,E),o.o.pack(L,p,E),o.o.pack(I,g,E),d.push(b.latitude),d.push(b.longitude),E+=3,y+=_}}}var V=new i.a;function Z(e,t,o,n){return i.a.clone(t,V),V.height=o,i.a.toCartesian(V,e,n)}function $(e,t,i){return o.o.subtract(e,t,i),o.o.normalize(i,i),i}z.pack=function(e,i,a){n.o.typeOf.object("value",e),n.o.defined("array",i);var s=r.u(a,0),l=e._positions,u=l.length;i[s++]=u;for(var c=0;c<u;++c){var h=l[c];o.o.pack(h,i,s),s+=3}return i[s++]=e.granularity,i[s++]=e.loop?1:0,i[s++]=e.arcType,t.t.pack(e._ellipsoid,i,s),s+=t.t.packedLength,i[s++]=e._projectionIndex,i[s++]=e._scene3DOnly?1:0,i},z.unpack=function(e,i,a){n.o.defined("array",e);for(var s=r.u(i,0),l=e[s++],u=new Array(l),c=0;c<l;c++)u[c]=o.o.unpack(e,s),s+=3;var h=e[s++],p=1===e[s++],g=e[s++],d=t.t.unpack(e,s);s+=t.t.packedLength;var f=e[s++],w=1===e[s++];if(!r.e(a)){var v=new z({positions:u,granularity:h,loop:p,arcType:g,ellipsoid:d});return v._projectionIndex=f,v._scene3DOnly=w,v}return a._positions=u,a.granularity=h,a.loop=p,a.arcType=g,a._ellipsoid=d,a._projectionIndex=f,a._scene3DOnly=w,a};var J=new o.o,Q=new o.o,K=new o.o,ee=new o.o,te=new w.o(o.o.UNIT_X,0),oe=new o.o;function ie(e,t,i,n,r){var s=$(i,t,oe),l=$(e,t,J),u=$(n,t,Q),c=o.o.cross(s,l,ee);c=o.o.normalize(c,c);var h=w.o.fromPointNormal(t,c,te),p=w.o.getPointDistance(h,n);if(a.e.equalsEpsilon(p,0,a.e.EPSILON7))return o.o.clone(c,r),r;r=o.o.add(u,l,r),r=o.o.normalize(r,r);var g=o.o.cross(s,r,K);return o.o.normalize(g,g),o.o.cross(g,s,r),o.o.normalize(r,r),o.o.dot(u,g)<0&&(r=o.o.negate(r,r)),r}var ne=w.o.fromPointNormal(o.o.ZERO,o.o.UNIT_Y),re=new o.o,ae=new o.o,se=new o.o,le=new o.o,ue=new o.o,ce=new o.o,he=new i.a,pe=new i.a,ge=new i.a;z.createGeometry=function(e){var t,n,u=!e._scene3DOnly,c=e.loop,p=e._ellipsoid,g=e.granularity,f=e.arcType,w=new C[e._projectionIndex](p),v=1e3,m=e._positions,_=m.length;2===_&&(c=!1);var y,T,E,O,b,L,I,P=new h.P(void 0,void 0,p),D=[m[0]];for(n=0;n<_-1;n++)y=m[n],T=m[n+1],b=d.g.lineSegmentPlane(y,T,ne,ce),r.e(b)&&!o.o.equalsEpsilon(b,y,a.e.EPSILON7)&&!o.o.equalsEpsilon(b,T,a.e.EPSILON7)&&(e.arcType===s.L.GEODESIC?D.push(o.o.clone(b)):e.arcType===s.L.RHUMB&&(I=p.cartesianToCartographic(b,he).longitude,E=p.cartesianToCartographic(y,he),O=p.cartesianToCartographic(T,pe),P.setEndPoints(E,O),L=P.findIntersectionWithLongitude(I,ge),b=p.cartographicToCartesian(L,ce),r.e(b)&&!o.o.equalsEpsilon(b,y,a.e.EPSILON7)&&!o.o.equalsEpsilon(b,T,a.e.EPSILON7)&&D.push(o.o.clone(b)))),D.push(T);c&&(y=m[_-1],T=m[0],b=d.g.lineSegmentPlane(y,T,ne,ce),r.e(b)&&!o.o.equalsEpsilon(b,y,a.e.EPSILON7)&&!o.o.equalsEpsilon(b,T,a.e.EPSILON7)&&(e.arcType===s.L.GEODESIC?D.push(o.o.clone(b)):e.arcType===s.L.RHUMB&&(I=p.cartesianToCartographic(b,he).longitude,E=p.cartesianToCartographic(y,he),O=p.cartesianToCartographic(T,pe),P.setEndPoints(E,O),L=P.findIntersectionWithLongitude(I,ge),b=p.cartographicToCartesian(L,ce),r.e(b)&&!o.o.equalsEpsilon(b,y,a.e.EPSILON7)&&!o.o.equalsEpsilon(b,T,a.e.EPSILON7)&&D.push(o.o.clone(b)))));var k=D.length,N=new Array(k);for(n=0;n<k;n++){var x=i.a.fromCartesian(D[n],p);x.height=0,N[n]=x}if(!((k=(N=l.D(N,i.a.equalsEpsilon)).length)<2)){var A=[],S=[],H=[],M=[],R=re,z=ae,j=se,Y=le,G=ue,F=N[0],B=N[1];for(R=Z(p,N[k-1],0,R),Y=Z(p,B,0,Y),z=Z(p,F,0,z),j=Z(p,F,v,j),G=c?ie(R,z,j,Y,G):W(F,B,v,p,G),o.o.pack(G,S,0),o.o.pack(z,H,0),o.o.pack(j,M,0),A.push(F.latitude),A.push(F.longitude),U(F,B,0,v,g,f,p,S,H,M,A),n=1;n<k-1;++n){R=o.o.clone(z,R),z=o.o.clone(Y,z);var q=N[n];Z(p,q,v,j),Z(p,N[n+1],0,Y),ie(R,z,j,Y,G),t=S.length,o.o.pack(G,S,t),o.o.pack(z,H,t),o.o.pack(j,M,t),A.push(q.latitude),A.push(q.longitude),U(N[n],N[n+1],0,v,g,f,p,S,H,M,A)}var X=N[k-1],V=N[k-2];if(z=Z(p,X,0,z),j=Z(p,X,v,j),c){var $=N[0];G=ie(R=Z(p,V,0,R),z,j,Y=Z(p,$,0,Y),G)}else G=W(V,X,v,p,G);if(t=S.length,o.o.pack(G,S,t),o.o.pack(z,H,t),o.o.pack(j,M,t),A.push(X.latitude),A.push(X.longitude),c){for(U(X,F,0,v,g,f,p,S,H,M,A),t=S.length,n=0;n<3;++n)S[t+n]=S[n],H[t+n]=H[n],M[t+n]=M[n];A.push(F.latitude),A.push(F.longitude)}return at(c,w,H,M,S,A,u)}};var de=new o.o,fe=new f.p$1,we=new g.n;function ve(e,t,i,n){var r=$(i,t,de),s=o.o.dot(r,e);if(s>M||s<R){var l=$(n,i,oe),u=s<R?a.e.PI_OVER_TWO:-a.e.PI_OVER_TWO,c=g.n.fromAxisAngle(l,u,we),h=f.p$1.fromQuaternion(c,fe);return f.p$1.multiplyByVector(h,e,e),!0}return!1}var me=new i.a,_e=new o.o,ye=new o.o;function Te(e,t,n,r,s){var l=i.a.toCartesian(t,e._ellipsoid,_e),u=o.o.add(l,n,ye),c=!1,h=e._ellipsoid,p=h.cartesianToCartographic(u,me);Math.abs(t.longitude-p.longitude)>a.e.PI_OVER_TWO&&(c=!0,u=o.o.subtract(l,n,ye),p=h.cartesianToCartographic(u,me)),p.height=0;var g=e.project(p,s);return(s=o.o.subtract(g,r,s)).z=0,s=o.o.normalize(s,s),c&&o.o.negate(s,s),s}var Ee=new o.o,Oe=new o.o;function be(e,t,i,n,r,a){var s=o.o.subtract(t,e,Ee);o.o.normalize(s,s);var l=i-0,u=o.o.multiplyByScalar(s,l,Oe);o.o.add(e,u,r);var c=n-1e3;u=o.o.multiplyByScalar(s,c,Oe),o.o.add(t,u,a)}var Le=new o.o;function Ie(e,t){var i=w.o.getPointDistance(ne,e),n=w.o.getPointDistance(ne,t),r=Le;a.e.equalsEpsilon(i,0,a.e.EPSILON2)?(r=$(t,e,r),o.o.multiplyByScalar(r,a.e.EPSILON2,r),o.o.add(e,r,e)):a.e.equalsEpsilon(n,0,a.e.EPSILON2)&&(r=$(e,t,r),o.o.multiplyByScalar(r,a.e.EPSILON2,r),o.o.add(t,r,t))}function Pe(e,t){var o=Math.abs(e.longitude),i=Math.abs(t.longitude);if(a.e.equalsEpsilon(o,a.e.PI,a.e.EPSILON11)){var n=a.e.sign(t.longitude);return e.longitude=n*(o-a.e.EPSILON11),1}if(a.e.equalsEpsilon(i,a.e.PI,a.e.EPSILON11)){var r=a.e.sign(e.longitude);return t.longitude=r*(i-a.e.EPSILON11),2}return 0}var De=new i.a,ke=new i.a,Ne=new o.o,xe=new o.o,Ae=new o.o,Se=new o.o,Ce=new o.o,He=new o.o,Me=[De,ke],Re=new t.h,ze=new o.o,je=new o.o,Ye=new o.o,Ge=new o.o,We=new o.o,Fe=new o.o,Be=new o.o,qe=new o.o,Xe=new o.o,Ue=new o.o,Ve=new o.o,Ze=new o.o,$e=new o.o,Je=new o.o,Qe=new p.i,Ke=new p.i,et=new o.o,tt=new o.o,ot=new o.o,it=[new e.i,new e.i],nt=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],rt=nt.length;function at(i,n,r,s,l,c,h){var d,f,w,v,m,_,y=n._ellipsoid,T=r.length/3-1,E=8*T,O=4*E,b=36*T,L=E>65535?new Uint32Array(b):new Uint16Array(b),I=new Float64Array(3*E),P=new Float32Array(O),D=new Float32Array(O),k=new Float32Array(O),N=new Float32Array(O),x=new Float32Array(O);h&&(w=new Float32Array(O),v=new Float32Array(O),m=new Float32Array(O),_=new Float32Array(2*E));var S=c.length/2,C=0,H=De;H.height=0;var R=ke;R.height=0;var z=Ne,j=xe;if(h)for(f=0,d=1;d<S;d++)H.latitude=c[f],H.longitude=c[f+1],R.latitude=c[f+2],R.longitude=c[f+3],z=n.project(H,z),j=n.project(R,j),C+=o.o.distance(z,j),f+=2;var Y=s.length/3;j=o.o.unpack(s,0,j);var G,W=0;for(f=3,d=1;d<Y;d++)z=o.o.clone(j,z),j=o.o.unpack(s,f,j),W+=o.o.distance(z,j),f+=3;f=3;var F=0,B=0,q=0,X=0,U=!1,V=o.o.unpack(r,0,Se),Z=o.o.unpack(s,0,xe),J=o.o.unpack(l,0,He);i&&(ve(J,o.o.unpack(r,r.length-6,Ae),V,Z)&&(J=o.o.negate(J,J)));var Q=0,K=0,ee=0;for(d=0;d<T;d++){var te,oe,ie,ne,re=o.o.clone(V,Ae),ae=o.o.clone(Z,Ne),se=o.o.clone(J,Ce);if(U&&(se=o.o.negate(se,se)),V=o.o.unpack(r,f,Se),Z=o.o.unpack(s,f,xe),U=ve(J=o.o.unpack(l,f,He),re,V,Z),H.latitude=c[F],H.longitude=c[F+1],R.latitude=c[F+2],R.longitude=c[F+3],h){var le=Pe(H,R);te=n.project(H,We);var ue=$(oe=n.project(R,Fe),te,et);ue.y=Math.abs(ue.y),ie=Be,ne=qe,0===le||o.o.dot(ue,o.o.UNIT_Y)>M?(ie=Te(n,H,se,te,Be),ne=Te(n,R,J,oe,qe)):1===le?(ne=Te(n,R,J,oe,qe),ie.x=0,ie.y=a.e.sign(H.longitude-Math.abs(R.longitude)),ie.z=0):(ie=Te(n,H,se,te,Be),ne.x=0,ne.y=a.e.sign(H.longitude-R.longitude),ne.z=0)}var ce=o.o.distance(ae,Z),he=p.i.fromCartesian(re,Qe),pe=o.o.subtract(V,re,Xe),ge=o.o.normalize(pe,Ze),de=o.o.subtract(ae,re,Ue);de=o.o.normalize(de,de);var fe=o.o.cross(ge,de,Ze);fe=o.o.normalize(fe,fe);var we=o.o.cross(de,se,$e);we=o.o.normalize(we,we);var me=o.o.subtract(Z,V,Ve);me=o.o.normalize(me,me);var _e=o.o.cross(J,me,Je);_e=o.o.normalize(_e,_e);var ye,Ee,Oe,Le=ce/W,at=Q/W,lt=0,ut=0,ct=0;if(h){lt=o.o.distance(te,oe),ye=p.i.fromCartesian(te,Ke),Ee=o.o.subtract(oe,te,et);var ht=(Oe=o.o.normalize(Ee,tt)).x;Oe.x=Oe.y,Oe.y=-ht,ut=lt/C,ct=K/C}for(G=0;G<8;G++){var pt=X+4*G,gt=B+2*G,dt=pt+3,ft=G<4?1:-1,wt=2===G||3===G||6===G||7===G?1:-1;o.o.pack(he.high,P,pt),P[dt]=pe.x,o.o.pack(he.low,D,pt),D[dt]=pe.y,o.o.pack(we,k,pt),k[dt]=pe.z,o.o.pack(_e,N,pt),N[dt]=Le*ft,o.o.pack(fe,x,pt);var vt=at*wt;0===vt&&wt<0&&(vt=Number.POSITIVE_INFINITY),x[dt]=vt,h&&(w[pt]=ye.high.x,w[pt+1]=ye.high.y,w[pt+2]=ye.low.x,w[pt+3]=ye.low.y,m[pt]=-ie.y,m[pt+1]=ie.x,m[pt+2]=ne.y,m[pt+3]=-ne.x,v[pt]=Ee.x,v[pt+1]=Ee.y,v[pt+2]=Oe.x,v[pt+3]=Oe.y,_[gt]=ut*ft,0===(vt=ct*wt)&&wt<0&&(vt=Number.POSITIVE_INFINITY),_[gt+1]=vt)}var mt=Ye,_t=Ge,yt=ze,Tt=je,Et=t.h.fromCartographicArray(Me,Re),Ot=A.getMinimumMaximumHeights(Et,y),bt=Ot.minimumTerrainHeight,Lt=Ot.maximumTerrainHeight;ee+=bt,ee+=Lt,be(re,ae,bt,Lt,mt,yt),be(V,Z,bt,Lt,_t,Tt);var It=o.o.multiplyByScalar(fe,a.e.EPSILON5,ot);o.o.add(mt,It,mt),o.o.add(_t,It,_t),o.o.add(yt,It,yt),o.o.add(Tt,It,Tt),Ie(mt,_t),Ie(yt,Tt),o.o.pack(mt,I,q),o.o.pack(_t,I,q+3),o.o.pack(Tt,I,q+6),o.o.pack(yt,I,q+9),It=o.o.multiplyByScalar(fe,-2*a.e.EPSILON5,ot),o.o.add(mt,It,mt),o.o.add(_t,It,_t),o.o.add(yt,It,yt),o.o.add(Tt,It,Tt),Ie(mt,_t),Ie(yt,Tt),o.o.pack(mt,I,q+12),o.o.pack(_t,I,q+15),o.o.pack(Tt,I,q+18),o.o.pack(yt,I,q+21),F+=2,f+=3,B+=16,q+=24,X+=32,Q+=ce,K+=lt}f=0;var Pt=0;for(d=0;d<T;d++){for(G=0;G<rt;G++)L[f+G]=nt[G]+Pt;Pt+=8,f+=rt}var Dt=it;e.i.fromVertices(r,o.o.ZERO,3,Dt[0]),e.i.fromVertices(s,o.o.ZERO,3,Dt[1]);var kt=e.i.fromBoundingSpheres(Dt);kt.radius+=ee/(2*T);var Nt={position:new g.o({componentDatatype:u.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:I}),startHiAndForwardOffsetX:st(P),startLoAndForwardOffsetY:st(D),startNormalAndForwardOffsetZ:st(k),endNormalAndTextureCoordinateNormalizationX:st(N),rightNormalAndTextureCoordinateNormalizationY:st(x)};return h&&(Nt.startHiLo2D=st(w),Nt.offsetAndRight2D=st(v),Nt.startEndNormals2D=st(m),Nt.texcoordNormalization2D=new g.o({componentDatatype:u.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:_})),new g.I({attributes:Nt,indices:L,boundingSphere:kt})}function st(e){return new g.o({componentDatatype:u.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}return z._projectNormal=Te,function(e,t){return A.initialize().then((function(){return r.e(t)&&(e=z.unpack(e,t)),z.createGeometry(e)}))}}));
