define(["exports","./Cartesian3-c1138337","./Cartographic-630e5de6","./defaultValue-2110bb17","./Check-92c551fb","./buildModuleUrl-36ce0ebc","./Math-cd1437d9","./GeometryAttribute-b12ab6bd","./Rectangle-52f780a9"],(function(t,n,a,r,e,o,s,i,h){"use strict";var u=Math.cos,g=Math.sin,c=Math.sqrt,l={computePosition:function(t,n,a,e,o,s,i){var h=n.radiiSquared,l=t.nwCorner,d=t.boundingRectangle,C=l.latitude-t.granYCos*e+o*t.granXSin,S=u(C),w=g(C),f=h.z*w,X=l.longitude+e*t.granYSin+o*t.granXCos,Y=S*u(X),O=S*g(X),v=h.x*Y,_=h.y*O,M=c(v*Y+_*O+f*w);if(s.x=v/M,s.y=_/M,s.z=f/M,a){var b=t.stNwCorner;r.e(b)?(C=b.latitude-t.stGranYCos*e+o*t.stGranXSin,X=b.longitude+e*t.stGranYSin+o*t.stGranXCos,i.x=(X-t.stWest)*t.lonScalar,i.y=(C-t.stSouth)*t.latScalar):(i.x=(X-d.west)*t.lonScalar,i.y=(C-d.south)*t.latScalar)}}},d=new i.f,C=new n.o,S=new a.a,w=new n.o,f=new o.n;function X(t,a,r,e,o,s,h){var u=Math.cos(a),g=e*u,c=r*u,l=Math.sin(a),S=e*l,X=r*l;C=f.project(t,C),C=n.o.subtract(C,w,C);var Y=i.f.fromRotation(a,d);C=i.f.multiplyByVector(Y,C,C),C=n.o.add(C,w,C),s-=1,h-=1;var O=(t=f.unproject(C,t)).latitude,v=O+s*X,_=O-g*h,M=O-g*h+s*X,b=Math.max(O,v,_,M),p=Math.min(O,v,_,M),R=t.longitude,W=R+s*c,m=R+h*S,G=R+h*S+s*c;return{north:b,south:p,east:Math.max(R,W,m,G),west:Math.min(R,W,m,G),granYCos:g,granYSin:S,granXCos:c,granXSin:X,nwCorner:t}}l.computeOptions=function(t,n,a,r,o,i,u){var g=t.east,c=t.west,l=t.north,d=t.south,C=!1,Y=!1;l===s.e.PI_OVER_TWO&&(C=!0),d===-s.e.PI_OVER_TWO&&(Y=!0);var O,v,_,M,b,p=l-d;_=(b=c>g?s.e.TWO_PI-c+g:g-c)/((O=Math.ceil(b/n)+1)-1),M=p/((v=Math.ceil(p/n)+1)-1);var R=h.h.northwest(t,i),W=h.h.center(t,S);(0!==a||0!==r)&&(W.longitude<R.longitude&&(W.longitude+=s.e.TWO_PI),w=f.project(W,w));var m=M,G=_,I=h.h.clone(t,o),P={granYCos:m,granYSin:0,granXCos:G,granXSin:0,nwCorner:R,boundingRectangle:I,width:O,height:v,northCap:C,southCap:Y};if(0!==a){var T=X(R,a,_,M,0,O,v);if(l=T.north,d=T.south,g=T.east,c=T.west,l<-s.e.PI_OVER_TWO||l>s.e.PI_OVER_TWO||d<-s.e.PI_OVER_TWO||d>s.e.PI_OVER_TWO)throw new e.t("Rotated rectangle is invalid.  It crosses over either the north or south pole.");P.granYCos=T.granYCos,P.granYSin=T.granYSin,P.granXCos=T.granXCos,P.granXSin=T.granXSin,I.north=l,I.south=d,I.east=g,I.west=c}if(0!==r){a-=r;var V=h.h.northwest(I,u),x=X(V,a,_,M,0,O,v);P.stGranYCos=x.granYCos,P.stGranXCos=x.granXCos,P.stGranYSin=x.granYSin,P.stGranXSin=x.granXSin,P.stNwCorner=V,P.stWest=x.west,P.stSouth=x.south}return P},t.j=l}));
