define(["exports","./buildModuleUrl-1b968a9d","./Cartesian2-59a54ee7","./Cartographic-81e9e8b2","./Cartesian4-a56bd360","./Check-ff445961","./when-39df26e1","./EllipsoidTangentPlane-ee91c10e","./Math-5e067eb3","./FeatureDetection-2d4141ff","./Plane-775a5120","./PolygonPipeline-ae195f4e"],(function(e,t,o,a,n,r,i,s,u,d,c,h){"use strict";var m=[];function l(e,t){this.center=a.o.clone(i.u(e,a.o.ZERO)),this.halfAxes=d.p$1.clone(i.u(t,d.p$1.ZERO)),this.areaDirty=1}m[0]={num:0,des:"inside"},m[1]={num:4,data:[0,4,7,3],des:"left"},m[2]={num:4,data:[1,2,6,5],des:"right"},m[3]={num:0},m[4]={num:4,data:[0,1,5,4],des:"bottom"},m[5]={num:6,data:[0,1,5,4,7,3],des:"bottom, left"},m[6]={num:6,data:[0,1,2,6,5,4],des:"bottom, right"},m[7]={num:0},m[8]={num:4,data:[2,3,7,6],des:"top"},m[9]={num:6,data:[4,7,6,2,3,0],des:"top, left"},m[10]={num:6,data:[2,3,7,6,5,1],des:"top, right"},m[11]={num:0},m[12]={num:0},m[13]={num:0},m[14]={num:0},m[15]={num:0},m[16]={num:4,data:[0,3,2,1],des:"front"},m[17]={num:6,data:[0,4,7,3,2,1],des:"front, left"},m[18]={num:6,data:[0,3,2,6,5,1],des:"front, right"},m[19]={num:0},m[20]={num:6,data:[0,3,2,1,5,4],des:"front, bottom"},m[21]={num:6,data:[2,1,5,4,7,3],des:"front, bottom, left"},m[22]={num:6,data:[0,3,2,6,5,4],des:"front, bottom, right"},m[23]={num:0},m[24]={num:6,data:[0,3,7,6,2,1],des:"front, top"},m[25]={num:6,data:[0,4,7,6,2,1],des:"front, top, left"},m[26]={num:6,data:[0,3,7,6,5,1],des:"front, top, right"},m[27]={num:0},m[28]={num:0},m[29]={num:0},m[30]={num:0},m[31]={num:0},m[32]={num:4,data:[4,5,6,7],des:"back"},m[33]={num:6,data:[4,5,6,7,3,0],des:"back, left"},m[34]={num:6,data:[1,2,6,7,4,5],des:"back, right"},m[35]={num:0},m[36]={num:6,data:[0,1,5,6,7,4],des:"back, bottom"},m[37]={num:6,data:[0,1,5,6,7,3],des:"back, bottom, left"},m[38]={num:6,data:[0,1,2,6,7,4],des:"back, bottom, right"},m[39]={num:0},m[40]={num:6,data:[2,3,7,4,5,6],des:"back, top"},m[41]={num:6,data:[0,4,5,6,2,3],des:"back, top, left"},m[42]={num:6,data:[1,2,3,7,4,5],des:"back, top, right"},l.packedLength=a.o.packedLength+d.p$1.packedLength,l.pack=function(e,t,o){return r.o.typeOf.object("value",e),r.o.defined("array",t),o=i.u(o,0),a.o.pack(e.center,t,o),d.p$1.pack(e.halfAxes,t,o+a.o.packedLength),t},l.unpack=function(e,t,o){return r.o.defined("array",e),t=i.u(t,0),i.e(o)||(o=new l),a.o.unpack(e,t,o.center),d.p$1.unpack(e,t+a.o.packedLength,o.halfAxes),o};var p=new a.o,w=new a.o,f=new a.o,b=new a.o,x=new a.o,y=new a.o,g=new d.p$1,M={unitary:new d.p$1,diagonal:new d.p$1},v=new a.o,O=new a.o,z=new a.o;l.fromPoints=function(e,t){if(i.e(t)||(t=new l),!i.e(e)||0===e.length)return t.halfAxes=d.p$1.ZERO,t.center=a.o.ZERO,t;var o,n=e.length,r=a.o.clone(e[0],p);for(o=1;o<n;o++)a.o.add(r,e[o],r);var s=1/n;a.o.multiplyByScalar(r,s,r);var u,c=0,h=0,m=0,v=0,O=0,z=0;for(o=0;o<n;o++)c+=(u=a.o.subtract(e[o],r,w)).x*u.x,h+=u.x*u.y,m+=u.x*u.z,v+=u.y*u.y,O+=u.y*u.z,z+=u.z*u.z;c*=s,h*=s,m*=s,v*=s,O*=s,z*=s;var $=g;$[0]=c,$[1]=h,$[2]=m,$[3]=h,$[4]=v,$[5]=O,$[6]=m,$[7]=O,$[8]=z;var P=d.p$1.computeEigenDecomposition($,M),A=d.p$1.clone(P.unitary,t.halfAxes),C=d.p$1.getColumn(A,0,b),N=d.p$1.getColumn(A,1,x),R=d.p$1.getColumn(A,2,y),T=-Number.MAX_VALUE,E=-Number.MAX_VALUE,I=-Number.MAX_VALUE,L=Number.MAX_VALUE,S=Number.MAX_VALUE,k=Number.MAX_VALUE;for(o=0;o<n;o++)u=e[o],T=Math.max(a.o.dot(C,u),T),E=Math.max(a.o.dot(N,u),E),I=Math.max(a.o.dot(R,u),I),L=Math.min(a.o.dot(C,u),L),S=Math.min(a.o.dot(N,u),S),k=Math.min(a.o.dot(R,u),k);C=a.o.multiplyByScalar(C,.5*(L+T),C),N=a.o.multiplyByScalar(N,.5*(S+E),N),R=a.o.multiplyByScalar(R,.5*(k+I),R);var U=a.o.add(C,N,t.center);a.o.add(U,R,U);var q=f;return q.x=T-L,q.y=E-S,q.z=I-k,a.o.multiplyByScalar(q,.5,q),d.p$1.multiplyByScale(t.halfAxes,q,t.halfAxes),t};var $=new a.o,P=new a.o;function A(e,t,o,n,s,u,c,h,m,p,w){if(!(i.e(s)&&i.e(u)&&i.e(c)&&i.e(h)&&i.e(m)&&i.e(p)))throw new r.t("all extents (minimum/maximum X/Y/Z) are required.");i.e(w)||(w=new l);var f=w.halfAxes;d.p$1.setColumn(f,0,t,f),d.p$1.setColumn(f,1,o,f),d.p$1.setColumn(f,2,n,f);var b=$;b.x=(s+u)/2,b.y=(c+h)/2,b.z=(m+p)/2;var x=P;x.x=(u-s)/2,x.y=(h-c)/2,x.z=(p-m)/2;var y=w.center;return b=d.p$1.multiplyByVector(f,b,b),a.o.add(e,b,y),d.p$1.multiplyByScale(f,x,f),w}var C=new a.a,N=new a.o,R=new a.a,T=new a.a,E=new a.a,I=new a.a,L=new a.a,S=new a.o,k=new a.o,U=new a.o,q=new a.o,B=new a.o,_=new o.o,D=new o.o,X=new o.o,V=new o.o,W=new o.o,j=new a.o,Z=new a.o,F=new a.o,G=new a.o,Y=new o.o,H=new a.o,J=new a.o,K=new a.o,Q=new c.o(a.o.UNIT_X,0);l.fromRectangle=function(e,t,n,d,h){if(!i.e(e))throw new r.t("rectangle is required");if(e.width<0||e.width>u.e.TWO_PI)throw new r.t("Rectangle width must be between 0 and 2*pi");if(e.height<0||e.height>u.e.PI)throw new r.t("Rectangle height must be between 0 and pi");if(i.e(d)&&!u.e.equalsEpsilon(d.radii.x,d.radii.y,u.e.EPSILON15))throw new r.t("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");var m,l,p,w,f,b,x;if(t=i.u(t,0),n=i.u(n,0),d=i.u(d,o.t.WGS84),e.width<=u.e.PI){var y=o.h.center(e,C),g=d.cartographicToCartesian(y,N),M=new s.f(g,d);x=M.plane;var v=y.longitude,O=e.south<0&&e.north>0?0:y.latitude,z=a.a.fromRadians(v,e.north,n,R),$=a.a.fromRadians(e.west,e.north,n,T),P=a.a.fromRadians(e.west,O,n,E),ee=a.a.fromRadians(e.west,e.south,n,I),te=a.a.fromRadians(v,e.south,n,L),oe=d.cartographicToCartesian(z,S),ae=d.cartographicToCartesian($,k),ne=d.cartographicToCartesian(P,U),re=d.cartographicToCartesian(ee,q),ie=d.cartographicToCartesian(te,B),se=M.projectPointToNearestOnPlane(oe,_),ue=M.projectPointToNearestOnPlane(ae,D),de=M.projectPointToNearestOnPlane(ne,X),ce=M.projectPointToNearestOnPlane(re,V),he=M.projectPointToNearestOnPlane(ie,W);return l=-(m=Math.min(ue.x,de.x,ce.x)),w=Math.max(ue.y,se.y),p=Math.min(ce.y,he.y),$.height=ee.height=t,ae=d.cartographicToCartesian($,k),re=d.cartographicToCartesian(ee,q),f=Math.min(c.o.getPointDistance(x,ae),c.o.getPointDistance(x,re)),b=n,A(M.origin,M.xAxis,M.yAxis,M.zAxis,m,l,p,w,f,b,h)}var me=e.south>0,le=e.north<0,pe=me?e.south:le?e.north:0,we=o.h.center(e,C).longitude,fe=a.o.fromRadians(we,pe,n,d,j);fe.z=0;var be=Math.abs(fe.x)<u.e.EPSILON10&&Math.abs(fe.y)<u.e.EPSILON10?a.o.UNIT_X:a.o.normalize(fe,Z),xe=a.o.UNIT_Z,ye=a.o.cross(be,xe,F);x=c.o.fromPointNormal(fe,be,Q);var ge=a.o.fromRadians(we+u.e.PI_OVER_TWO,pe,n,d,G);m=-(l=a.o.dot(c.o.projectPointOntoPlane(x,ge,Y),ye)),w=a.o.fromRadians(0,e.north,le?t:n,d,H).z,p=a.o.fromRadians(0,e.south,me?t:n,d,J).z;var Me=a.o.fromRadians(e.east,pe,n,d,K);return A(fe,ye,xe,be,m,l,p,w,f=c.o.getPointDistance(x,Me),b=0,h)},l.clone=function(e,t){if(i.e(e))return i.e(t)?(a.o.clone(e.center,t.center),d.p$1.clone(e.halfAxes,t.halfAxes),t.areaDirty=1,t):new l(e.center,e.halfAxes)},l.intersectPlane=function(e,o){if(!i.e(e))throw new r.t("box is required.");if(!i.e(o))throw new r.t("plane is required.");var n=e.center,s=o.normal,u=e.halfAxes,c=s.x,h=s.y,m=s.z,l=Math.abs(c*u[d.p$1.COLUMN0ROW0]+h*u[d.p$1.COLUMN0ROW1]+m*u[d.p$1.COLUMN0ROW2])+Math.abs(c*u[d.p$1.COLUMN1ROW0]+h*u[d.p$1.COLUMN1ROW1]+m*u[d.p$1.COLUMN1ROW2])+Math.abs(c*u[d.p$1.COLUMN2ROW0]+h*u[d.p$1.COLUMN2ROW1]+m*u[d.p$1.COLUMN2ROW2]),p=a.o.dot(s,n)+o.distance;return p<=-l?t.S.OUTSIDE:p>=l?t.S.INSIDE:t.S.INTERSECTING};var ee=new a.o,te=new a.o,oe=new a.o,ae=new a.o,ne=new a.o;l.distanceSquaredTo=function(e,t){if(!i.e(e))throw new r.t("box is required.");if(!i.e(t))throw new r.t("cartesian is required.");var o=a.o.subtract(t,e.center,$),n=e.halfAxes,s=d.p$1.getColumn(n,0,ee),u=d.p$1.getColumn(n,1,te),c=d.p$1.getColumn(n,2,oe),h=a.o.magnitude(s),m=a.o.magnitude(u),l=a.o.magnitude(c);a.o.normalize(s,s),a.o.normalize(u,u),a.o.normalize(c,c);var p=ae;p.x=a.o.dot(o,s),p.y=a.o.dot(o,u),p.z=a.o.dot(o,c);var w,f=0;return p.x<-h?f+=(w=p.x+h)*w:p.x>h&&(f+=(w=p.x-h)*w),p.y<-m?f+=(w=p.y+m)*w:p.y>m&&(f+=(w=p.y-m)*w),p.z<-l?f+=(w=p.z+l)*w:p.z>l&&(f+=(w=p.z-l)*w),f};var re=new a.o,ie=new a.o;l.computePlaneDistances=function(e,o,n,s){if(!i.e(e))throw new r.t("box is required.");if(!i.e(o))throw new r.t("position is required.");if(!i.e(n))throw new r.t("direction is required.");i.e(s)||(s=new t.o);var u=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,h=e.center,m=e.halfAxes,l=d.p$1.getColumn(m,0,ee),p=d.p$1.getColumn(m,1,te),w=d.p$1.getColumn(m,2,oe),f=a.o.add(l,p,re);a.o.add(f,w,f),a.o.add(f,h,f);var b=a.o.subtract(f,o,ie),x=a.o.dot(n,b);return u=Math.min(x,u),c=Math.max(x,c),a.o.add(h,l,f),a.o.add(f,p,f),a.o.subtract(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),c=Math.max(x,c),a.o.add(h,l,f),a.o.subtract(f,p,f),a.o.add(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),c=Math.max(x,c),a.o.add(h,l,f),a.o.subtract(f,p,f),a.o.subtract(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),c=Math.max(x,c),a.o.subtract(h,l,f),a.o.add(f,p,f),a.o.add(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),c=Math.max(x,c),a.o.subtract(h,l,f),a.o.add(f,p,f),a.o.subtract(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),c=Math.max(x,c),a.o.subtract(h,l,f),a.o.subtract(f,p,f),a.o.add(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),c=Math.max(x,c),a.o.subtract(h,l,f),a.o.subtract(f,p,f),a.o.subtract(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),c=Math.max(x,c),s.start=u,s.stop=c,s};var se=new t.i;l.isOccluded=function(e,o){if(!i.e(e))throw new r.t("box is required.");if(!i.e(o))throw new r.t("occluder is required.");var a=t.i.fromOrientedBoundingBox(e,se);return!o.isBoundingSphereVisible(a)},l.prototype.intersectPlane=function(e){return l.intersectPlane(this,e)},l.prototype.distanceSquaredTo=function(e){return l.distanceSquaredTo(this,e)},l.prototype.computePlaneDistances=function(e,t,o){return l.computePlaneDistances(this,e,t,o)},l.prototype.isOccluded=function(e){return l.isOccluded(this,e)},l.equals=function(e,t){return e===t||i.e(e)&&i.e(t)&&a.o.equals(e.center,t.center)&&d.p$1.equals(e.halfAxes,t.halfAxes)},l.prototype.clone=function(e){return l.clone(this,e)},l.prototype.equals=function(e){return l.equals(this,e)};var ue=new n.e;l.prototype._updateBBox=function(){if(1==this.areaDirty){var e=d.p$1.getColumn(this.halfAxes,0,ee),t=a.o.clone(a.o.negate(e,v)),o=d.p$1.getColumn(this.halfAxes,1,te),n=a.o.clone(a.o.negate(o,v)),r=d.p$1.getColumn(this.halfAxes,2,oe),i=a.o.clone(a.o.negate(r,v));this.bbox=[],a.o.add(this.center,o,v),a.o.add(v,i,O),a.o.add(O,t,z),this.bbox[0]=new a.o(z.x,z.y,z.z),a.o.add(O,e,z),this.bbox[1]=new a.o(z.x,z.y,z.z),a.o.add(v,r,O),a.o.add(O,e,z),this.bbox[2]=new a.o(z.x,z.y,z.z),a.o.add(O,t,z),this.bbox[3]=new a.o(z.x,z.y,z.z),a.o.add(this.center,n,v),a.o.add(v,i,O),a.o.add(O,t,z),this.bbox[4]=new a.o(z.x,z.y,z.z),a.o.add(O,e,z),this.bbox[5]=new a.o(z.x,z.y,z.z),a.o.add(v,r,O),a.o.add(O,e,z),this.bbox[6]=new a.o(z.x,z.y,z.z),a.o.add(O,t,z),this.bbox[7]=new a.o(z.x,z.y,z.z);var s=a.o.magnitude(e),u=a.o.magnitude(o),c=a.o.magnitude(r),h=new a.o(-s,-u,-c),m=new a.o(s,u,c);if(s*u*c==0)return void(this.areaDirty=-1);a.o.normalize(e,e),a.o.normalize(o,o),a.o.normalize(r,r),this.u=a.o.clone(e),this.v=a.o.clone(o),this.w=a.o.clone(r),this.posMin=h,this.posMaX=m,this.areaDirty=0}};var de=[];de.push(new o.o),de.push(new o.o),de.push(new o.o),de.push(new o.o),de.push(new o.o),de.push(new o.o);var ce=new a.a,he=new a.o;l.prototype.calculateBoxArea=function(e,t,o,r,s,c,l,p){this._updateBBox();var w=e,f=a.o.subtract(w,this.center,ne);if(-1==this.areaDirty){var b=s/r*(C=-1!=c?c:.5*a.o.distance(this.posMaX,this.posMin))/o;return u.e.PI*b*b}var x=a.o.fromElements(a.o.dot(f,this.u),a.o.dot(f,this.v),a.o.dot(f,this.w),re),y=(x.x<this.posMin.x?1:0)+((x.x>this.posMaX.x?1:0)<<1)+((x.z<this.posMin.z?1:0)<<2)+((x.z>this.posMaX.z?1:0)<<3)+((x.y>this.posMaX.y?1:0)<<4)+((x.y<this.posMin.y?1:0)<<5);if(y>42)return console.log("area calculation is wrong"),-100;var g=m[y];if(0==g.num){b=s/r*(C=-1!=c?c:.5*a.o.distance(this.posMaX,this.posMin))/o;return u.e.PI*b*b}if(0==g.num)return console.log("area calculation is wrong"),-100;for(var M,v=[],O=l,z=0;z<g.num;z++){var $=de[z],P=this.bbox[g.data[z]];M=!1;var A,C,N=u.e.PI;if(3===t)(A=d.p.multiplyByVector(O,n.e.fromElements(P.x,P.y,P.z,1),ue)).z<0&&(M=!0,-1==C&&(N=u.e.PI_OVER_FOUR,o=a.o.magnitude(f)));else{var R=p,T=R.ellipsoid.cartesianToCartographic(P,ce);i.e(T)?(R.project(T,he),(A=d.p.multiplyByVector(O,n.e.fromElements(he.z,he.x,he.y,1),ue)).z<0&&(M=!0)):M=!0}if(1==M)return N*(b=s/r*(C=-1!=c?c:.5*a.o.distance(this.posMaX,this.posMin))/o)*b;$.x=A.x/A.w,$.y=s-A.y/A.w,v.push($)}return Math.abs(h.A.computeArea2D(v))},e.y=l}));
