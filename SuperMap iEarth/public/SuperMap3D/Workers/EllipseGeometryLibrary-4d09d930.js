define(["exports","./Cartesian3-c1138337","./Math-cd1437d9","./FeatureDetection-e7fb956a","./GeometryAttribute-b12ab6bd"],(function(o,e,r,a,t){"use strict";var i={},n=new e.o,l=new e.o,y=new t.n,s=new a.p;function c(o,r,i,c,u,x,m,z,d,f){var h=o+r;e.o.multiplyByScalar(c,Math.cos(h),n),e.o.multiplyByScalar(i,Math.sin(h),l),e.o.add(n,l,n);var _=Math.cos(o);_*=_;var p=Math.sin(o);p*=p;var v=x/Math.sqrt(m*_+u*p)/z;return t.n.fromAxisAngle(n,v,y),a.p.fromQuaternion(y,s),a.p.multiplyByVector(s,d,f),e.o.normalize(f,f),e.o.multiplyByScalar(f,z,f),f}var u=new e.o,x=new e.o,m=new e.o,z=new e.o;i.raisePositionsToHeight=function(o,r,a){for(var t=r.ellipsoid,i=r.height,n=r.extrudedHeight,l=a?o.length/3*2:o.length/3,y=new Float64Array(3*l),s=o.length,c=a?s:0,d=0;d<s;d+=3){var f=d+1,h=d+2,_=e.o.fromArray(o,d,u);t.scaleToGeodeticSurface(_,_);var p=e.o.clone(_,x),v=t.geodeticSurfaceNormal(_,z),O=e.o.multiplyByScalar(v,i,m);e.o.add(_,O,_),a&&(e.o.multiplyByScalar(v,n,O),e.o.add(p,O,p),y[d+c]=p.x,y[f+c]=p.y,y[h+c]=p.z),y[d]=_.x,y[f]=_.y,y[h]=_.z}return y};var d=new e.o,f=new e.o,h=new e.o;i.computeEllipsePositions=function(o,a,t){var i=o.semiMinorAxis,n=o.semiMajorAxis,l=o.rotation,y=o.center,s=8*o.granularity,z=i*i,_=n*n,p=n*i,v=e.o.magnitude(y),O=e.o.normalize(y,d),w=e.o.cross(e.o.UNIT_Z,y,f);w=e.o.normalize(w,w);var P=e.o.cross(O,w,h),M=1+Math.ceil(r.e.PI_OVER_TWO/s),I=r.e.PI_OVER_TWO/(M-1),T=r.e.PI_OVER_TWO-M*I;T<0&&(M-=Math.ceil(Math.abs(T)/I));var g,A,E,V,R,W=a?new Array(3*(M*(M+2)*2)):void 0,S=0,b=u,B=x,C=4*M*3,F=C-1,G=0,H=t?new Array(C):void 0;for(b=c(T=r.e.PI_OVER_TWO,l,P,w,z,p,_,v,O,b),a&&(W[S++]=b.x,W[S++]=b.y,W[S++]=b.z),t&&(H[F--]=b.z,H[F--]=b.y,H[F--]=b.x),T=r.e.PI_OVER_TWO-I,g=1;g<M+1;++g){if(b=c(T,l,P,w,z,p,_,v,O,b),B=c(Math.PI-T,l,P,w,z,p,_,v,O,B),a){for(W[S++]=b.x,W[S++]=b.y,W[S++]=b.z,E=2*g+2,A=1;A<E-1;++A)V=A/(E-1),R=e.o.lerp(b,B,V,m),W[S++]=R.x,W[S++]=R.y,W[S++]=R.z;W[S++]=B.x,W[S++]=B.y,W[S++]=B.z}t&&(H[F--]=b.z,H[F--]=b.y,H[F--]=b.x,H[G++]=B.x,H[G++]=B.y,H[G++]=B.z),T=r.e.PI_OVER_TWO-(g+1)*I}for(g=M;g>1;--g){if(b=c(-(T=r.e.PI_OVER_TWO-(g-1)*I),l,P,w,z,p,_,v,O,b),B=c(T+Math.PI,l,P,w,z,p,_,v,O,B),a){for(W[S++]=b.x,W[S++]=b.y,W[S++]=b.z,E=2*(g-1)+2,A=1;A<E-1;++A)V=A/(E-1),R=e.o.lerp(b,B,V,m),W[S++]=R.x,W[S++]=R.y,W[S++]=R.z;W[S++]=B.x,W[S++]=B.y,W[S++]=B.z}t&&(H[F--]=b.z,H[F--]=b.y,H[F--]=b.x,H[G++]=B.x,H[G++]=B.y,H[G++]=B.z)}b=c(-(T=r.e.PI_OVER_TWO),l,P,w,z,p,_,v,O,b);var N={};return a&&(W[S++]=b.x,W[S++]=b.y,W[S++]=b.z,N.positions=W,N.numPts=M),t&&(H[F--]=b.z,H[F--]=b.y,H[F--]=b.x,N.outerPositions=H),N},o.C=i}));
