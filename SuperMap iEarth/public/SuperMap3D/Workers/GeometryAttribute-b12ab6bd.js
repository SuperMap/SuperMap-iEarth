define(["exports","./Ellipsoid-ca2b8eb1","./Cartesian3-c1138337","./Cartographic-630e5de6","./Check-92c551fb","./defaultValue-2110bb17","./FeatureDetection-e7fb956a","./PrimitiveType-d9ba7368","./Math-cd1437d9","./Rectangle-52f780a9","./Cartesian4-5c264813","./buildModuleUrl-36ce0ebc","./RuntimeError-6daf0e01","./defer-a21481c0"],(function(e,t,n,r,o,a,i,s,u,l,c,f,d,p){"use strict";var y=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3});function h(e,t,n,r){this[0]=a.u(e,0),this[1]=a.u(n,0),this[2]=a.u(t,0),this[3]=a.u(r,0)}h.packedLength=4,h.pack=function(e,t,n){return o.o.typeOf.object("value",e),o.o.defined("array",t),n=a.u(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t},h.unpack=function(e,t,n){return o.o.defined("array",e),t=a.u(t,0),a.e(n)||(n=new h),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n},h.clone=function(e,t){if(a.e(e))return a.e(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):new h(e[0],e[2],e[1],e[3])},h.fromArray=function(e,t,n){return o.o.defined("array",e),t=a.u(t,0),a.e(n)||(n=new h),n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],n},h.fromColumnMajorArray=function(e,t){return o.o.defined("values",e),h.clone(e,t)},h.fromRowMajorArray=function(e,t){return o.o.defined("values",e),a.e(t)?(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t):new h(e[0],e[1],e[2],e[3])},h.fromScale=function(e,t){return o.o.typeOf.object("scale",e),a.e(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=e.y,t):new h(e.x,0,0,e.y)},h.fromUniformScale=function(e,t){return o.o.typeOf.number("scale",e),a.e(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=e,t):new h(e,0,0,e)},h.fromRotation=function(e,t){o.o.typeOf.number("angle",e);var n=Math.cos(e),r=Math.sin(e);return a.e(t)?(t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t):new h(n,-r,r,n)},h.toArray=function(e,t){return o.o.typeOf.object("matrix",e),a.e(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):[e[0],e[1],e[2],e[3]]},h.getElementIndex=function(e,t){return o.o.typeOf.number.greaterThanOrEquals("row",t,0),o.o.typeOf.number.lessThanOrEquals("row",t,1),o.o.typeOf.number.greaterThanOrEquals("column",e,0),o.o.typeOf.number.lessThanOrEquals("column",e,1),2*e+t},h.getColumn=function(e,t,n){o.o.typeOf.object("matrix",e),o.o.typeOf.number.greaterThanOrEquals("index",t,0),o.o.typeOf.number.lessThanOrEquals("index",t,1),o.o.typeOf.object("result",n);var r=2*t,a=e[r],i=e[r+1];return n.x=a,n.y=i,n},h.setColumn=function(e,t,n,r){o.o.typeOf.object("matrix",e),o.o.typeOf.number.greaterThanOrEquals("index",t,0),o.o.typeOf.number.lessThanOrEquals("index",t,1),o.o.typeOf.object("cartesian",n),o.o.typeOf.object("result",r);var a=2*t;return(r=h.clone(e,r))[a]=n.x,r[a+1]=n.y,r},h.getRow=function(e,t,n){o.o.typeOf.object("matrix",e),o.o.typeOf.number.greaterThanOrEquals("index",t,0),o.o.typeOf.number.lessThanOrEquals("index",t,1),o.o.typeOf.object("result",n);var r=e[t],a=e[t+2];return n.x=r,n.y=a,n},h.setRow=function(e,t,n,r){return o.o.typeOf.object("matrix",e),o.o.typeOf.number.greaterThanOrEquals("index",t,0),o.o.typeOf.number.lessThanOrEquals("index",t,1),o.o.typeOf.object("cartesian",n),o.o.typeOf.object("result",r),(r=h.clone(e,r))[t]=n.x,r[t+2]=n.y,r};var m=new t.o;h.getScale=function(e,n){return o.o.typeOf.object("matrix",e),o.o.typeOf.object("result",n),n.x=t.o.magnitude(t.o.fromElements(e[0],e[1],m)),n.y=t.o.magnitude(t.o.fromElements(e[2],e[3],m)),n};var w=new t.o;function O(e,t,n,r){this.x=a.u(e,0),this.y=a.u(t,0),this.z=a.u(n,0),this.w=a.u(r,0)}h.getMaximumScale=function(e){return h.getScale(e,w),t.o.maximumComponent(w)},h.multiply=function(e,t,n){o.o.typeOf.object("left",e),o.o.typeOf.object("right",t),o.o.typeOf.object("result",n);var r=e[0]*t[0]+e[2]*t[1],a=e[0]*t[2]+e[2]*t[3],i=e[1]*t[0]+e[3]*t[1],s=e[1]*t[2]+e[3]*t[3];return n[0]=r,n[1]=i,n[2]=a,n[3]=s,n},h.add=function(e,t,n){return o.o.typeOf.object("left",e),o.o.typeOf.object("right",t),o.o.typeOf.object("result",n),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n},h.subtract=function(e,t,n){return o.o.typeOf.object("left",e),o.o.typeOf.object("right",t),o.o.typeOf.object("result",n),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n},h.multiplyByVector=function(e,t,n){o.o.typeOf.object("matrix",e),o.o.typeOf.object("cartesian",t),o.o.typeOf.object("result",n);var r=e[0]*t.x+e[2]*t.y,a=e[1]*t.x+e[3]*t.y;return n.x=r,n.y=a,n},h.multiplyByScalar=function(e,t,n){return o.o.typeOf.object("matrix",e),o.o.typeOf.number("scalar",t),o.o.typeOf.object("result",n),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n},h.multiplyByScale=function(e,t,n){return o.o.typeOf.object("matrix",e),o.o.typeOf.object("scale",t),o.o.typeOf.object("result",n),n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.y,n[3]=e[3]*t.y,n},h.negate=function(e,t){return o.o.typeOf.object("matrix",e),o.o.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},h.transpose=function(e,t){o.o.typeOf.object("matrix",e),o.o.typeOf.object("result",t);var n=e[0],r=e[2],a=e[1],i=e[3];return t[0]=n,t[1]=r,t[2]=a,t[3]=i,t},h.abs=function(e,t){return o.o.typeOf.object("matrix",e),o.o.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t},h.equals=function(e,t){return e===t||a.e(e)&&a.e(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},h.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]},h.equalsEpsilon=function(e,t,n){return o.o.typeOf.number("epsilon",n),e===t||a.e(e)&&a.e(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n},h.IDENTITY=Object.freeze(new h(1,0,0,1)),h.ZERO=Object.freeze(new h(0,0,0,0)),h.COLUMN0ROW0=0,h.COLUMN0ROW1=1,h.COLUMN1ROW0=2,h.COLUMN1ROW1=3,Object.defineProperties(h.prototype,{length:{get:function(){return h.packedLength}}}),h.prototype.clone=function(e){return h.clone(this,e)},h.prototype.equals=function(e){return h.equals(this,e)},h.prototype.equalsEpsilon=function(e,t){return h.equalsEpsilon(this,e,t)},h.prototype.toString=function(){return"("+this[0]+", "+this[2]+")\n("+this[1]+", "+this[3]+")"};var b=new n.o;O.fromAxisAngle=function(e,t,r){o.o.typeOf.object("axis",e),o.o.typeOf.number("angle",t);var i=t/2,s=Math.sin(i),u=(b=n.o.normalize(e,b)).x*s,l=b.y*s,c=b.z*s,f=Math.cos(i);return a.e(r)?(r.x=u,r.y=l,r.z=c,r.w=f,r):new O(u,l,c,f)};var x=[1,2,0],E=new Array(3);O.fromRotationMatrix=function(e,t){o.o.typeOf.object("matrix",e);var n,r,s,u,l,c=e[i.p.COLUMN0ROW0],f=e[i.p.COLUMN1ROW1],d=e[i.p.COLUMN2ROW2],p=c+f+d;if(p>0)l=.5*(n=Math.sqrt(p+1)),n=.5/n,r=(e[i.p.COLUMN1ROW2]-e[i.p.COLUMN2ROW1])*n,s=(e[i.p.COLUMN2ROW0]-e[i.p.COLUMN0ROW2])*n,u=(e[i.p.COLUMN0ROW1]-e[i.p.COLUMN1ROW0])*n;else{var y=0;f>c&&(y=1),d>c&&d>f&&(y=2);var h=x[y],m=x[h];n=Math.sqrt(e[i.p.getElementIndex(y,y)]-e[i.p.getElementIndex(h,h)]-e[i.p.getElementIndex(m,m)]+1);var w=E;w[y]=.5*n,n=.5/n,l=(e[i.p.getElementIndex(m,h)]-e[i.p.getElementIndex(h,m)])*n,w[h]=(e[i.p.getElementIndex(h,y)]+e[i.p.getElementIndex(y,h)])*n,w[m]=(e[i.p.getElementIndex(m,y)]+e[i.p.getElementIndex(y,m)])*n,r=-w[0],s=-w[1],u=-w[2]}return a.e(t)?(t.x=r,t.y=s,t.z=u,t.w=l,t):new O(r,s,u,l)};var _=new O,v=new O,T=new O,g=new O;O.fromHeadingPitchRoll=function(e,t){return o.o.typeOf.object("headingPitchRoll",e),g=O.fromAxisAngle(n.o.UNIT_X,e.roll,_),T=O.fromAxisAngle(n.o.UNIT_Y,-e.pitch,t),t=O.multiply(T,g,T),v=O.fromAxisAngle(n.o.UNIT_Z,-e.heading,_),O.multiply(v,t,t)};var S=new n.o,P=new n.o,D=new O,N=new O,C=new O;O.packedLength=4,O.pack=function(e,t,n){return o.o.typeOf.object("value",e),o.o.defined("array",t),n=a.u(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t},O.unpack=function(e,t,n){return o.o.defined("array",e),t=a.u(t,0),a.e(n)||(n=new O),n.x=e[t],n.y=e[t+1],n.z=e[t+2],n.w=e[t+3],n},O.packedInterpolationLength=3,O.convertPackedArrayForInterpolation=function(e,t,n,r){O.unpack(e,4*n,C),O.conjugate(C,C);for(var o=0,a=n-t+1;o<a;o++){var i=3*o;O.unpack(e,4*(t+o),D),O.multiply(D,C,D),D.w<0&&O.negate(D,D),O.computeAxis(D,S);var s=O.computeAngle(D);r[i]=S.x*s,r[i+1]=S.y*s,r[i+2]=S.z*s}},O.unpackInterpolationResult=function(e,t,r,o,i){a.e(i)||(i=new O),n.o.fromArray(e,0,P);var s=n.o.magnitude(P);return O.unpack(t,4*o,N),0===s?O.clone(O.IDENTITY,D):O.fromAxisAngle(P,s,D),O.multiply(D,N,i)},O.clone=function(e,t){if(a.e(e))return a.e(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new O(e.x,e.y,e.z,e.w)},O.conjugate=function(e,t){return o.o.typeOf.object("quaternion",e),o.o.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},O.magnitudeSquared=function(e){return o.o.typeOf.object("quaternion",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},O.magnitude=function(e){return Math.sqrt(O.magnitudeSquared(e))},O.normalize=function(e,t){o.o.typeOf.object("result",t);var n=1/O.magnitude(e),r=e.x*n,a=e.y*n,i=e.z*n,s=e.w*n;return t.x=r,t.y=a,t.z=i,t.w=s,t},O.inverse=function(e,t){o.o.typeOf.object("result",t);var n=O.magnitudeSquared(e);return t=O.conjugate(e,t),O.multiplyByScalar(t,1/n,t)},O.add=function(e,t,n){return o.o.typeOf.object("left",e),o.o.typeOf.object("right",t),o.o.typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},O.subtract=function(e,t,n){return o.o.typeOf.object("left",e),o.o.typeOf.object("right",t),o.o.typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},O.negate=function(e,t){return o.o.typeOf.object("quaternion",e),o.o.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},O.dot=function(e,t){return o.o.typeOf.object("left",e),o.o.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},O.multiply=function(e,t,n){o.o.typeOf.object("left",e),o.o.typeOf.object("right",t),o.o.typeOf.object("result",n);var r=e.x,a=e.y,i=e.z,s=e.w,u=t.x,l=t.y,c=t.z,f=t.w,d=s*u+r*f+a*c-i*l,p=s*l-r*c+a*f+i*u,y=s*c+r*l-a*u+i*f,h=s*f-r*u-a*l-i*c;return n.x=d,n.y=p,n.z=y,n.w=h,n},O.multiplyByVec=function(e,t,r){var o=new n.o,a=new n.o,i=new n.o(e.x,e.y,e.z);o=n.o.cross(i,t,o),a=n.o.cross(i,o,a);var s=new n.o;s=n.o.multiplyByScalar(o,2*e.w,s);var u=new n.o;return u=n.o.multiplyByScalar(o,2,u),r=n.o.add(t,s,r),r=n.o.add(r,u,r)},O.multiplyByScalar=function(e,t,n){return o.o.typeOf.object("quaternion",e),o.o.typeOf.number("scalar",t),o.o.typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},O.divideByScalar=function(e,t,n){return o.o.typeOf.object("quaternion",e),o.o.typeOf.number("scalar",t),o.o.typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},O.computeAxis=function(e,t){o.o.typeOf.object("quaternion",e),o.o.typeOf.object("result",t);var n=e.w;if(Math.abs(n-1)<u.e.EPSILON6)return t.x=t.y=t.z=0,t;var r=1/Math.sqrt(1-n*n);return t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t},O.computeAngle=function(e){return o.o.typeOf.object("quaternion",e),Math.abs(e.w-1)<u.e.EPSILON6?0:2*Math.acos(e.w)};var I=new O;O.lerp=function(e,t,n,r){return o.o.typeOf.object("start",e),o.o.typeOf.object("end",t),o.o.typeOf.number("t",n),o.o.typeOf.object("result",r),I=O.multiplyByScalar(t,n,I),r=O.multiplyByScalar(e,1-n,r),O.add(I,r,r)};var j=new O,R=new O,M=new O;O.slerp=function(e,t,n,r){o.o.typeOf.object("start",e),o.o.typeOf.object("end",t),o.o.typeOf.number("t",n),o.o.typeOf.object("result",r);var a=O.dot(e,t),i=t;if(a<0&&(a=-a,i=j=O.negate(t,j)),1-a<u.e.EPSILON6)return O.lerp(e,i,n,r);var s=Math.acos(a);return R=O.multiplyByScalar(e,Math.sin((1-n)*s),R),M=O.multiplyByScalar(i,Math.sin(n*s),M),r=O.add(R,M,r),O.multiplyByScalar(r,1/Math.sin(s),r)},O.log=function(e,t){o.o.typeOf.object("quaternion",e),o.o.typeOf.object("result",t);var r=u.e.acosClamped(e.w),a=0;return 0!==r&&(a=r/Math.sin(r)),n.o.multiplyByScalar(e,a,t)},O.exp=function(e,t){o.o.typeOf.object("cartesian",e),o.o.typeOf.object("result",t);var r=n.o.magnitude(e),a=0;return 0!==r&&(a=Math.sin(r)/r),t.x=e.x*a,t.y=e.y*a,t.z=e.z*a,t.w=Math.cos(r),t};var A=new n.o,q=new n.o,U=new O,z=new O;O.computeInnerQuadrangle=function(e,t,r,a){o.o.typeOf.object("q0",e),o.o.typeOf.object("q1",t),o.o.typeOf.object("q2",r),o.o.typeOf.object("result",a);var i=O.conjugate(t,U);O.multiply(i,r,z);var s=O.log(z,A);O.multiply(i,e,z);var u=O.log(z,q);return n.o.add(s,u,s),n.o.multiplyByScalar(s,.25,s),n.o.negate(s,s),O.exp(s,U),O.multiply(t,U,a)},O.squad=function(e,t,n,r,a,i){o.o.typeOf.object("q0",e),o.o.typeOf.object("q1",t),o.o.typeOf.object("s0",n),o.o.typeOf.object("s1",r),o.o.typeOf.number("t",a),o.o.typeOf.object("result",i);var s=O.slerp(e,t,a,U),u=O.slerp(n,r,a,z);return O.slerp(s,u,2*a*(1-a),i)};for(var F=new O,W=1.9011074535173003,L=i.s.supportsTypedArrays()?new Float32Array(8):[],k=i.s.supportsTypedArrays()?new Float32Array(8):[],Y=i.s.supportsTypedArrays()?new Float32Array(8):[],B=i.s.supportsTypedArrays()?new Float32Array(8):[],G=0;G<7;++G){var Z=G+1,V=2*Z+1;L[G]=1/(Z*V),k[G]=Z/V}function J(e,t,n){o.o.defined("array",e),o.o.defined("itemToFind",t),o.o.defined("comparator",n);for(var r,a,i=0,s=e.length-1;i<=s;)if((a=n(e[r=~~((i+s)/2)],t))<0)i=r+1;else{if(!(a>0))return r;s=r-1}return~(s+1)}function X(e,t,n,r,o){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=n,this.yPoleOffset=r,this.ut1MinusUtc=o}function H(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,n=0,r=t[n++],o=function(e,t,n,r){n||(n=" ");var o=e.length>=t?"":Array(1+t-e.length>>>0).join(n);return r?e+o:o+e},a=function(e,t,n,r,a,i){var s=r-e.length;return s>0&&(e=n||!a?o(e,r,i,n):e.slice(0,t.length)+o("",s,"0",!0)+e.slice(t.length)),e},i=function(e,t,n,r,i,s,u){var l=e>>>0;return e=(n=n&&l&&{2:"0b",8:"0",16:"0x"}[t]||"")+o(l.toString(t),s||0,"0",!1),a(e,n,r,i,u)},s=function(e,t,n,r,o,i){return null!=r&&(e=e.slice(0,r)),a(e,"",t,n,o,i)},u=function(e,r,u,l,c,f,d){var p,y,h,m,w;if("%%"==e)return"%";for(var O=!1,b="",x=!1,E=!1,_=" ",v=u.length,T=0;u&&T<v;T++)switch(u.charAt(T)){case" ":b=" ";break;case"+":b="+";break;case"-":O=!0;break;case"'":_=u.charAt(T+1);break;case"0":x=!0;break;case"#":E=!0}if((l=l?"*"==l?+t[n++]:"*"==l.charAt(0)?+t[l.slice(1,-1)]:+l:0)<0&&(l=-l,O=!0),!isFinite(l))throw new Error("sprintf: (minimum-)width must be finite");switch(f=f?"*"==f?+t[n++]:"*"==f.charAt(0)?+t[f.slice(1,-1)]:+f:"fFeE".indexOf(d)>-1?6:"d"==d?0:void 0,w=r?t[r.slice(0,-1)]:t[n++],d){case"s":return s(String(w),O,l,f,x,_);case"c":return s(String.fromCharCode(+w),O,l,f,x);case"b":return i(w,2,E,O,l,f,x);case"o":return i(w,8,E,O,l,f,x);case"x":return i(w,16,E,O,l,f,x);case"X":return i(w,16,E,O,l,f,x).toUpperCase();case"u":return i(w,10,E,O,l,f,x);case"i":case"d":return p=+w||0,w=(y=(p=Math.round(p-p%1))<0?"-":b)+o(String(Math.abs(p)),f,"0",!1),a(w,y,O,l,x);case"e":case"E":case"f":case"F":case"g":case"G":return y=(p=+w)<0?"-":b,h=["toExponential","toFixed","toPrecision"]["efg".indexOf(d.toLowerCase())],m=["toString","toUpperCase"]["eEfFgG".indexOf(d)%2],w=y+Math.abs(p)[h](f),a(w,y,O,l,x)[m]();default:return e}};return r.replace(e,u)}function $(e,t,n,r,o,a,i,s){this.year=e,this.month=t,this.day=n,this.hour=r,this.minute=o,this.second=a,this.millisecond=i,this.isLeapSecond=s}function Q(e){if(null===e||isNaN(e))throw new o.t("year is required and must be a number.");return e%4==0&&e%100!=0||e%400==0}function K(e,t){this.julianDate=e,this.offset=t}L[7]=W/136,k[7]=8*W/17,O.fastSlerp=function(e,t,n,r){o.o.typeOf.object("start",e),o.o.typeOf.object("end",t),o.o.typeOf.number("t",n),o.o.typeOf.object("result",r);var a,i=O.dot(e,t);i>=0?a=1:(a=-1,i=-i);for(var s=i-1,u=1-n,l=n*n,c=u*u,f=7;f>=0;--f)Y[f]=(L[f]*l-k[f])*s,B[f]=(L[f]*c-k[f])*s;var d=a*n*(1+Y[0]*(1+Y[1]*(1+Y[2]*(1+Y[3]*(1+Y[4]*(1+Y[5]*(1+Y[6]*(1+Y[7])))))))),p=u*(1+B[0]*(1+B[1]*(1+B[2]*(1+B[3]*(1+B[4]*(1+B[5]*(1+B[6]*(1+B[7])))))))),y=O.multiplyByScalar(e,p,F);return O.multiplyByScalar(t,d,r),O.add(y,r,r)},O.fastSquad=function(e,t,n,r,a,i){o.o.typeOf.object("q0",e),o.o.typeOf.object("q1",t),o.o.typeOf.object("s0",n),o.o.typeOf.object("s1",r),o.o.typeOf.number("t",a),o.o.typeOf.object("result",i);var s=O.fastSlerp(e,t,a,U),u=O.fastSlerp(n,r,a,z);return O.fastSlerp(s,u,2*a*(1-a),i)},O.equals=function(e,t){return e===t||a.e(e)&&a.e(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},O.equalsEpsilon=function(e,t,n){return o.o.typeOf.number("epsilon",n),e===t||a.e(e)&&a.e(t)&&Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n&&Math.abs(e.w-t.w)<=n},O.ZERO=Object.freeze(new O(0,0,0,0)),O.IDENTITY=Object.freeze(new O(0,0,0,1)),O.prototype.clone=function(e){return O.clone(this,e)},O.prototype.equals=function(e){return O.equals(this,e)},O.prototype.equalsEpsilon=function(e,t){return O.equalsEpsilon(this,e,t)},O.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var ee=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),te=Object.freeze({UTC:0,TAI:1}),ne=new $,re=[31,28,31,30,31,30,31,31,30,31,30,31];function oe(e,t){return xe.compare(e.julianDate,t.julianDate)}var ae=new K;function ie(e){ae.julianDate=e;var t=xe.leapSeconds,n=J(t,ae,oe);n<0&&(n=~n),n>=t.length&&(n=t.length-1);var r=t[n].offset;n>0&&(xe.secondsDifference(t[n].julianDate,e)>r&&(r=t[--n].offset));xe.addSeconds(e,r,e)}function se(e,t){ae.julianDate=e;var n=xe.leapSeconds,r=J(n,ae,oe);if(r<0&&(r=~r),0===r)return xe.addSeconds(e,-n[0].offset,t);if(r>=n.length)return xe.addSeconds(e,-n[r-1].offset,t);var o=xe.secondsDifference(n[r].julianDate,e);return 0===o?xe.addSeconds(e,-n[r].offset,t):o<=1?void 0:xe.addSeconds(e,-n[--r].offset,t)}function ue(e,t,n){var r=t/ee.SECONDS_PER_DAY|0;return e+=r,(t-=ee.SECONDS_PER_DAY*r)<0&&(e--,t+=ee.SECONDS_PER_DAY),n.dayNumber=e,n.secondsOfDay=t,n}function le(e,t,n,r,o,a,i){var s=(t-14)/12|0,u=e+4800+s,l=(1461*u/4|0)+(367*(t-2-12*s)/12|0)-(3*((u+100)/100|0)/4|0)+n-32075;(r-=12)<0&&(r+=24);var c=a+(r*ee.SECONDS_PER_HOUR+o*ee.SECONDS_PER_MINUTE+i*ee.SECONDS_PER_MILLISECOND);return c>=43200&&(l-=1),[l,c]}var ce=/^(\d{4})$/,fe=/^(\d{4})-(\d{2})$/,de=/^(\d{4})-?(\d{3})$/,pe=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,ye=/^(\d{4})-?(\d{2})-?(\d{2})$/,he=/([Z+\-])?(\d{2})?:?(\d{2})?$/,me=/^(\d{2})(\.\d+)?/.source+he.source,we=/^(\d{2}):?(\d{2})(\.\d+)?/.source+he.source,Oe=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+he.source,be="Invalid ISO 8601 date.";function xe(e,t,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=a.u(e,0),t=a.u(t,0),n=a.u(n,te.UTC);var r=0|e;ue(r,t+=(e-r)*ee.SECONDS_PER_DAY,this),n===te.UTC&&ie(this)}xe.fromGregorianDate=function(e,t){if(!(e instanceof $))throw new o.t("date must be a valid GregorianDate.");var n=le(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return a.e(t)?(ue(n[0],n[1],t),ie(t),t):new xe(n[0],n[1],te.UTC)},xe.fromDate=function(e,t){if(!(e instanceof Date)||isNaN(e.getTime()))throw new o.t("date must be a valid JavaScript Date.");var n=le(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return a.e(t)?(ue(n[0],n[1],t),ie(t),t):new xe(n[0],n[1],te.UTC)},xe.fromIso8601=function(e,t){if("string"!=typeof e)throw new o.t(be);var n,r,i,s,u,l=(e=e.replace(",",".")).split("T"),c=1,f=1,d=0,p=0,y=0,h=0,m=l[0],w=l[1];if(!a.e(m))throw new o.t(be);if(null!==(l=m.match(ye))){if((s=m.split("-").length-1)>0&&2!==s)throw new o.t(be);n=+l[1],c=+l[2],f=+l[3]}else if(null!==(l=m.match(fe)))n=+l[1],c=+l[2];else if(null!==(l=m.match(ce)))n=+l[1];else{var O;if(null!==(l=m.match(de))){if(n=+l[1],O=+l[2],i=Q(n),O<1||i&&O>366||!i&&O>365)throw new o.t(be)}else{if(null===(l=m.match(pe)))throw new o.t(be);n=+l[1];var b=+l[2],x=+l[3]||0;if((s=m.split("-").length-1)>0&&(!a.e(l[3])&&1!==s||a.e(l[3])&&2!==s))throw new o.t(be);O=7*b+x-new Date(Date.UTC(n,0,4)).getUTCDay()-3}(r=new Date(Date.UTC(n,0,1))).setUTCDate(O),c=r.getUTCMonth()+1,f=r.getUTCDate()}if(i=Q(n),c<1||c>12||f<1||(2!==c||!i)&&f>re[c-1]||i&&2===c&&f>29)throw new o.t(be);if(a.e(w)){if(null!==(l=w.match(Oe))){if((s=w.split(":").length-1)>0&&2!==s&&3!==s)throw new o.t(be);d=+l[1],p=+l[2],y=+l[3],h=1e3*+(l[4]||0),u=5}else if(null!==(l=w.match(we))){if((s=w.split(":").length-1)>2)throw new o.t(be);d=+l[1],p=+l[2],y=60*+(l[3]||0),u=4}else{if(null===(l=w.match(me)))throw new o.t(be);d=+l[1],p=60*+(l[2]||0),u=3}if(p>=60||y>=61||d>24||24===d&&(p>0||y>0||h>0))throw new o.t(be);var E=l[u],_=+l[u+1],v=+(l[u+2]||0);switch(E){case"+":d-=_,p-=v;break;case"-":d+=_,p+=v;break;case"Z":break;default:p+=new Date(Date.UTC(n,c-1,f,d,p)).getTimezoneOffset()}}var T=60===y;for(T&&y--;p>=60;)p-=60,d++;for(;d>=24;)d-=24,f++;for(r=i&&2===c?29:re[c-1];f>r;)f-=r,++c>12&&(c-=12,n++),r=i&&2===c?29:re[c-1];for(;p<0;)p+=60,d--;for(;d<0;)d+=24,f--;for(;f<1;)--c<1&&(c+=12,n--),f+=r=i&&2===c?29:re[c-1];var g=le(n,c,f,d,p,y,h);return a.e(t)?(ue(g[0],g[1],t),ie(t)):t=new xe(g[0],g[1],te.UTC),T&&xe.addSeconds(t,1,t),t},xe.now=function(e){return xe.fromDate(new Date,e)};var Ee=new xe(0,0,te.TAI);function _e(e){if(e=a.u(e,a.u.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=a.u(e.addNewLeapSeconds,!0),a.e(e.data))Te(this,e.data);else if(a.e(e.url)){var t=f.t.createIfNeeded(e.url),n=this;this._downloadPromise=Promise.resolve(t.fetchJson()).then((function(e){Te(n,e)})).catch((function(){n._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."}))}else Te(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function ve(e,t){return xe.compare(e.julianDate,t)}function Te(e,t){if(a.e(t.columnNames))if(a.e(t.samples)){var n=t.columnNames.indexOf("modifiedJulianDateUtc"),r=t.columnNames.indexOf("xPoleWanderRadians"),o=t.columnNames.indexOf("yPoleWanderRadians"),i=t.columnNames.indexOf("ut1MinusUtcSeconds"),s=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),l=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||r<0||o<0||i<0||s<0||u<0||l<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var c=e._samples=t.samples,f=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=r,e._yPoleWanderRadiansColumn=o,e._ut1MinusUtcSecondsColumn=i,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=u,e._taiMinusUtcSecondsColumn=l,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var d,p=e._addNewLeapSeconds,y=0,h=c.length;y<h;y+=e._columnCount){var m=c[y+n],w=c[y+l],O=new xe(m+ee.MODIFIED_JULIAN_DATE_DIFFERENCE,w,te.TAI);if(f.push(O),p){if(w!==d&&a.e(d)){var b=xe.leapSeconds,x=J(b,O,ve);if(x<0){var E=new K(O,w);b.splice(~x,0,E)}}d=w}}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function ge(e,t,n,r,o){var a=n*r;o.xPoleWander=t[a+e._xPoleWanderRadiansColumn],o.yPoleWander=t[a+e._yPoleWanderRadiansColumn],o.xPoleOffset=t[a+e._xCelestialPoleOffsetRadiansColumn],o.yPoleOffset=t[a+e._yCelestialPoleOffsetRadiansColumn],o.ut1MinusUtc=t[a+e._ut1MinusUtcSecondsColumn]}function Se(e,t,n){return t+e*(n-t)}function Pe(e,t,n,r,o,a,i){var s=e._columnCount;if(a>t.length-1)return i.xPoleWander=0,i.yPoleWander=0,i.xPoleOffset=0,i.yPoleOffset=0,i.ut1MinusUtc=0,i;var u=t[o],l=t[a];if(u.equals(l)||r.equals(u))return ge(e,n,o,s,i),i;if(r.equals(l))return ge(e,n,a,s,i),i;var c=xe.secondsDifference(r,u)/xe.secondsDifference(l,u),f=o*s,d=a*s,p=n[f+e._ut1MinusUtcSecondsColumn],y=n[d+e._ut1MinusUtcSecondsColumn],h=y-p;if(h>.5||h<-.5){var m=n[f+e._taiMinusUtcSecondsColumn],w=n[d+e._taiMinusUtcSecondsColumn];m!==w&&(l.equals(r)?p=y:y-=w-m)}return i.xPoleWander=Se(c,n[f+e._xPoleWanderRadiansColumn],n[d+e._xPoleWanderRadiansColumn]),i.yPoleWander=Se(c,n[f+e._yPoleWanderRadiansColumn],n[d+e._yPoleWanderRadiansColumn]),i.xPoleOffset=Se(c,n[f+e._xCelestialPoleOffsetRadiansColumn],n[d+e._xCelestialPoleOffsetRadiansColumn]),i.yPoleOffset=Se(c,n[f+e._yCelestialPoleOffsetRadiansColumn],n[d+e._yCelestialPoleOffsetRadiansColumn]),i.ut1MinusUtc=Se(c,p,y),i}function De(e,t,n){this.heading=a.u(e,0),this.pitch=a.u(t,0),this.roll=a.u(n,0)}function Ne(e,t,n){this.x=e,this.y=t,this.s=n}function Ce(e){e=a.u(e,a.u.EMPTY_OBJECT),this._xysFileUrlTemplate=f.t.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=a.u(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=a.u(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new xe(this._sampleZeroJulianEphemerisDate,0,te.TAI),this._stepSizeDays=a.u(e.stepSizeDays,1),this._samplesPerXysFile=a.u(e.samplesPerXysFile,1e3),this._totalSamples=a.u(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,n=this._denominators=new Array(t+1),r=this._xTable=new Array(t+1),o=Math.pow(this._stepSizeDays,t),i=0;i<=t;++i){n[i]=o,r[i]=i*this._stepSizeDays;for(var s=0;s<=t;++s)s!==i&&(n[i]*=i-s);n[i]=1/n[i]}this._work=new Array(t+1),this._coef=new Array(t+1)}xe.toGregorianDate=function(e,t){if(!a.e(e))throw new o.t("julianDate is required.");var n=!1,r=se(e,Ee);a.e(r)||(xe.addSeconds(e,-1,Ee),r=se(Ee,Ee),n=!0);var i=r.dayNumber,s=r.secondsOfDay;s>=43200&&(i+=1);var u=i+68569|0,l=4*u/146097|0,c=4e3*((u=u-((146097*l+3)/4|0)|0)+1)/1461001|0,f=80*(u=u-(1461*c/4|0)+31|0)/2447|0,d=u-(2447*f/80|0)|0,p=f+2-12*(u=f/11|0)|0,y=100*(l-49)+c+u|0,h=s/ee.SECONDS_PER_HOUR|0,m=s-h*ee.SECONDS_PER_HOUR,w=m/ee.SECONDS_PER_MINUTE|0,O=0|(m-=w*ee.SECONDS_PER_MINUTE),b=(m-O)/ee.SECONDS_PER_MILLISECOND;return(h+=12)>23&&(h-=24),n&&(O+=1),a.e(t)?(t.year=y,t.month=p,t.day=d,t.hour=h,t.minute=w,t.second=O,t.millisecond=b,t.isLeapSecond=n,t):new $(y,p,d,h,w,O,b,n)},xe.toDate=function(e){if(!a.e(e))throw new o.t("julianDate is required.");var t=xe.toGregorianDate(e,ne),n=t.second;return t.isLeapSecond&&(n-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,n,t.millisecond))},xe.toIso8601=function(e,t){if(!a.e(e))throw new o.t("julianDate is required.");var n=xe.toGregorianDate(e,ne),r=n.year,i=n.month,s=n.day,u=n.hour,l=n.minute,c=n.second,f=n.millisecond;return 1e4===r&&1===i&&1===s&&0===u&&0===l&&0===c&&0===f&&(r=9999,i=12,s=31,u=24),a.e(t)||0===f?a.e(t)&&0!==t?H("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",r,i,s,u,l,c,(.01*f).toFixed(t).replace(".","").slice(0,t)):H("%04d-%02d-%02dT%02d:%02d:%02dZ",r,i,s,u,l,c):H("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",r,i,s,u,l,c,(.01*f).toString().replace(".",""))},xe.clone=function(e,t){if(a.e(e))return a.e(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new xe(e.dayNumber,e.secondsOfDay,te.TAI)},xe.compare=function(e,t){if(!a.e(e))throw new o.t("left is required.");if(!a.e(t))throw new o.t("right is required.");var n=e.dayNumber-t.dayNumber;return 0!==n?n:e.secondsOfDay-t.secondsOfDay},xe.equals=function(e,t){return e===t||a.e(e)&&a.e(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},xe.equalsEpsilon=function(e,t,n){if(!a.e(n))throw new o.t("epsilon is required.");return e===t||a.e(e)&&a.e(t)&&Math.abs(xe.secondsDifference(e,t))<=n},xe.totalDays=function(e){if(!a.e(e))throw new o.t("julianDate is required.");return e.dayNumber+e.secondsOfDay/ee.SECONDS_PER_DAY},xe.secondsDifference=function(e,t){if(!a.e(e))throw new o.t("left is required.");if(!a.e(t))throw new o.t("right is required.");return(e.dayNumber-t.dayNumber)*ee.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},xe.daysDifference=function(e,t){if(!a.e(e))throw new o.t("left is required.");if(!a.e(t))throw new o.t("right is required.");return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/ee.SECONDS_PER_DAY},xe.computeTaiMinusUtc=function(e){ae.julianDate=e;var t=xe.leapSeconds,n=J(t,ae,oe);return n<0&&(n=~n,--n<0&&(n=0)),t[n].offset},xe.addSeconds=function(e,t,n){if(!a.e(e))throw new o.t("julianDate is required.");if(!a.e(t))throw new o.t("seconds is required.");if(!a.e(n))throw new o.t("result is required.");return ue(e.dayNumber,e.secondsOfDay+t,n)},xe.addMinutes=function(e,t,n){if(!a.e(e))throw new o.t("julianDate is required.");if(!a.e(t))throw new o.t("minutes is required.");if(!a.e(n))throw new o.t("result is required.");var r=e.secondsOfDay+t*ee.SECONDS_PER_MINUTE;return ue(e.dayNumber,r,n)},xe.addHours=function(e,t,n){if(!a.e(e))throw new o.t("julianDate is required.");if(!a.e(t))throw new o.t("hours is required.");if(!a.e(n))throw new o.t("result is required.");var r=e.secondsOfDay+t*ee.SECONDS_PER_HOUR;return ue(e.dayNumber,r,n)},xe.addDays=function(e,t,n){if(!a.e(e))throw new o.t("julianDate is required.");if(!a.e(t))throw new o.t("days is required.");if(!a.e(n))throw new o.t("result is required.");return ue(e.dayNumber+t,e.secondsOfDay,n)},xe.lessThan=function(e,t){return xe.compare(e,t)<0},xe.lessThanOrEquals=function(e,t){return xe.compare(e,t)<=0},xe.greaterThan=function(e,t){return xe.compare(e,t)>0},xe.greaterThanOrEquals=function(e,t){return xe.compare(e,t)>=0},xe.prototype.clone=function(e){return xe.clone(this,e)},xe.prototype.equals=function(e){return xe.equals(this,e)},xe.prototype.equalsEpsilon=function(e,t){return xe.equalsEpsilon(this,e,t)},xe.prototype.toString=function(){return xe.toIso8601(this)},xe.leapSeconds=[new K(new xe(2441317,43210,te.TAI),10),new K(new xe(2441499,43211,te.TAI),11),new K(new xe(2441683,43212,te.TAI),12),new K(new xe(2442048,43213,te.TAI),13),new K(new xe(2442413,43214,te.TAI),14),new K(new xe(2442778,43215,te.TAI),15),new K(new xe(2443144,43216,te.TAI),16),new K(new xe(2443509,43217,te.TAI),17),new K(new xe(2443874,43218,te.TAI),18),new K(new xe(2444239,43219,te.TAI),19),new K(new xe(2444786,43220,te.TAI),20),new K(new xe(2445151,43221,te.TAI),21),new K(new xe(2445516,43222,te.TAI),22),new K(new xe(2446247,43223,te.TAI),23),new K(new xe(2447161,43224,te.TAI),24),new K(new xe(2447892,43225,te.TAI),25),new K(new xe(2448257,43226,te.TAI),26),new K(new xe(2448804,43227,te.TAI),27),new K(new xe(2449169,43228,te.TAI),28),new K(new xe(2449534,43229,te.TAI),29),new K(new xe(2450083,43230,te.TAI),30),new K(new xe(2450630,43231,te.TAI),31),new K(new xe(2451179,43232,te.TAI),32),new K(new xe(2453736,43233,te.TAI),33),new K(new xe(2454832,43234,te.TAI),34),new K(new xe(2456109,43235,te.TAI),35),new K(new xe(2457204,43236,te.TAI),36),new K(new xe(2457754,43237,te.TAI),37)],_e.NONE=Object.freeze({getPromiseToLoad:function(){return Promise.resolve()},compute:function(e,t){return a.e(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new X(0,0,0,0,0),t}}),_e.prototype.getPromiseToLoad=function(){return Promise.resolve(this._downloadPromise)},_e.prototype.compute=function(e,t){if(a.e(this._samples)){if(a.e(t)||(t=new X(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var n=this._dates,r=this._lastIndex,o=0,i=0;if(a.e(r)){var s=n[r],u=n[r+1],l=xe.lessThanOrEquals(s,e),c=!a.e(u),f=c||xe.greaterThanOrEquals(u,e);if(l&&f)return o=r,!c&&u.equals(e)&&++o,i=o+1,Pe(this,n,this._samples,e,o,i,t),t}var p=J(n,e,xe.compare,this._dateColumn);return p>=0?(p<n.length-1&&n[p+1].equals(e)&&++p,o=p,i=p):(o=(i=~p)-1)<0&&(o=0),this._lastIndex=o,Pe(this,n,this._samples,e,o,i,t),t}if(a.e(this._dataError))throw new d.t(this._dataError)},De.fromQuaternion=function(e,t){if(!a.e(e))throw new o.t("quaternion is required");a.e(t)||(t=new De);var n=2*(e.w*e.y-e.z*e.x),r=1-2*(e.x*e.x+e.y*e.y),i=2*(e.w*e.x+e.y*e.z),s=1-2*(e.y*e.y+e.z*e.z),l=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(l,s),t.roll=Math.atan2(i,r),t.pitch=-u.e.asinClamped(n),t},De.fromDegrees=function(e,t,n,r){if(!a.e(e))throw new o.t("heading is required");if(!a.e(t))throw new o.t("pitch is required");if(!a.e(n))throw new o.t("roll is required");return a.e(r)||(r=new De),r.heading=e*u.e.RADIANS_PER_DEGREE,r.pitch=t*u.e.RADIANS_PER_DEGREE,r.roll=n*u.e.RADIANS_PER_DEGREE,r},De.clone=function(e,t){if(a.e(e))return a.e(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new De(e.heading,e.pitch,e.roll)},De.equals=function(e,t){return e===t||a.e(e)&&a.e(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},De.equalsEpsilon=function(e,t,n,r){return e===t||a.e(e)&&a.e(t)&&u.e.equalsEpsilon(e.heading,t.heading,n,r)&&u.e.equalsEpsilon(e.pitch,t.pitch,n,r)&&u.e.equalsEpsilon(e.roll,t.roll,n,r)},De.prototype.clone=function(e){return De.clone(this,e)},De.prototype.equals=function(e){return De.equals(this,e)},De.prototype.equalsEpsilon=function(e,t,n){return De.equalsEpsilon(this,e,t,n)},De.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Ie=new xe(0,0,te.TAI);function je(e,t,n){var r=Ie;return r.dayNumber=t,r.secondsOfDay=n,xe.daysDifference(r,e._sampleZeroDateTT)}function Re(e,t){if(e._chunkDownloadsInProgress[t])return e._chunkDownloadsInProgress[t];var n=p.s();e._chunkDownloadsInProgress[t]=n;var r,o=e._xysFileUrlTemplate;return r=a.e(o)?o.getDerivedResource({templateValues:{0:t}}):new f.t({url:f.n$1("Assets/IAU2006_XYS/IAU2006_XYS_"+t+".json")}),Promise.resolve(r.fetchJson()).then((function(r){e._chunkDownloadsInProgress[t]=!1;for(var o=e._samples,a=r.samples,i=t*e._samplesPerXysFile*3,s=0,u=a.length;s<u;++s)o[i+s]=a[s];n.resolve()})).catch((function(e){console.log(e)})),n.promise}Ce.prototype.preload=function(e,t,n,r){var o=je(this,e,t),a=je(this,n,r),i=o/this._stepSizeDays-this._interpolationOrder/2|0;i<0&&(i=0);var s=a/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;s>=this._totalSamples&&(s=this._totalSamples-1);for(var u=i/this._samplesPerXysFile|0,l=s/this._samplesPerXysFile|0,c=[],f=u;f<=l;++f)c.push(Re(this,f));return Promise.all(c)},Ce.prototype.computeXysRadians=function(e,t,n){var r=je(this,e,t);if(!(r<0)){var o=r/this._stepSizeDays|0;if(!(o>=this._totalSamples)){var i=this._interpolationOrder,s=o-(i/2|0);s<0&&(s=0);var u=s+i;u>=this._totalSamples&&((s=(u=this._totalSamples-1)-i)<0&&(s=0));var l=!1,c=this._samples;if(a.e(c[3*s])||(Re(this,s/this._samplesPerXysFile|0),l=!0),a.e(c[3*u])||(Re(this,u/this._samplesPerXysFile|0),l=!0),!l){a.e(n)?(n.x=0,n.y=0,n.s=0):n=new Ne(0,0,0);var f,d,p=r-s*this._stepSizeDays,y=this._work,h=this._denominators,m=this._coef,w=this._xTable;for(f=0;f<=i;++f)y[f]=p-w[f];for(f=0;f<=i;++f){for(m[f]=1,d=0;d<=i;++d)d!==f&&(m[f]*=y[d]);m[f]*=h[f];var O=3*(s+f);n.x+=m[f]*c[O++],n.y+=m[f]*c[O++],n.s+=m[f]*c[O]}return n}}}};var Me={},Ae={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},qe={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Ue={},ze={east:new n.o,north:new n.o,up:new n.o,west:new n.o,south:new n.o,down:new n.o},Fe=new n.o,We=new n.o,Le=new n.o;Me.localFrameToFixedFrameGenerator=function(e,r){if(!Ae.hasOwnProperty(e)||!Ae[e].hasOwnProperty(r))throw new o.t("firstAxis and secondAxis must be east, north, up, west, south or down.");var i,l=Ae[e][r],c=e+r;return a.e(Ue[c])?i=Ue[c]:(i=function(i,c,f){if(!a.e(i))throw new o.t("origin is required.");if(a.e(f)||(f=new s.y),n.o.equalsEpsilon(i,n.o.ZERO,u.e.EPSILON14))n.o.unpack(qe[e],0,Fe),n.o.unpack(qe[r],0,We),n.o.unpack(qe[l],0,Le);else if(u.e.equalsEpsilon(i.x,0,u.e.EPSILON14)&&u.e.equalsEpsilon(i.y,0,u.e.EPSILON14)){var d=u.e.sign(i.z);n.o.unpack(qe[e],0,Fe),"east"!==e&&"west"!==e&&n.o.multiplyByScalar(Fe,d,Fe),n.o.unpack(qe[r],0,We),"east"!==r&&"west"!==r&&n.o.multiplyByScalar(We,d,We),n.o.unpack(qe[l],0,Le),"east"!==l&&"west"!==l&&n.o.multiplyByScalar(Le,d,Le)}else{(c=a.u(c,t.t.WGS84)).geodeticSurfaceNormal(i,ze.up);var p=ze.up,y=ze.east;y.x=-i.y,y.y=i.x,y.z=0,n.o.normalize(y,ze.east),n.o.cross(p,y,ze.north),n.o.multiplyByScalar(ze.up,-1,ze.down),n.o.multiplyByScalar(ze.east,-1,ze.west),n.o.multiplyByScalar(ze.north,-1,ze.south),Fe=ze[e],We=ze[r],Le=ze[l]}return f[0]=Fe.x,f[1]=Fe.y,f[2]=Fe.z,f[3]=0,f[4]=We.x,f[5]=We.y,f[6]=We.z,f[7]=0,f[8]=Le.x,f[9]=Le.y,f[10]=Le.z,f[11]=0,f[12]=i.x,f[13]=i.y,f[14]=i.z,f[15]=1,f},Ue[c]=i),i},Me.eastNorthUpToFixedFrame=Me.localFrameToFixedFrameGenerator("east","north"),Me.northEastDownToFixedFrame=Me.localFrameToFixedFrameGenerator("north","east"),Me.northUpEastToFixedFrame=Me.localFrameToFixedFrameGenerator("north","up"),Me.northWestUpToFixedFrame=Me.localFrameToFixedFrameGenerator("north","west");var ke=new O,Ye=new n.o(1,1,1),Be=new s.y;Me.headingPitchRollToFixedFrame=function(e,t,r,i,u){o.o.typeOf.object("HeadingPitchRoll",t),i=a.u(i,Me.eastNorthUpToFixedFrame);var l=O.fromHeadingPitchRoll(t,ke),c=s.y.fromTranslationQuaternionRotationScale(n.o.ZERO,l,Ye,Be);return u=i(e,r,u),s.y.multiply(u,c,u)};var Ge=new s.y,Ze=new i.p;Me.headingPitchRollQuaternion=function(e,t,n,r,a){o.o.typeOf.object("HeadingPitchRoll",t);var i=Me.headingPitchRollToFixedFrame(e,t,n,r,Ge),u=s.y.getMatrix3(i,Ze);return O.fromRotationMatrix(u,a)};var Ve=new n.o(1,1,1),Je=new n.o,Xe=new s.y,He=new s.y,$e=new i.p,Qe=new O;Me.fixedFrameToHeadingPitchRoll=function(e,r,i,u){o.o.defined("transform",e),r=a.u(r,t.t.WGS84),i=a.u(i,Me.eastNorthUpToFixedFrame),a.e(u)||(u=new De);var l=s.y.getTranslation(e,Je);if(n.o.equals(l,n.o.ZERO))return u.heading=0,u.pitch=0,u.roll=0,u;var c=s.y.inverseTransformation(i(l,r,Xe),Xe),f=s.y.setScale(e,Ve,He);f=s.y.setTranslation(f,n.o.ZERO,f),c=s.y.multiply(c,f,c);var d=O.fromRotationMatrix(s.y.getMatrix3(c,$e),Qe);return d=O.normalize(d,d),De.fromQuaternion(d,u)};var Ke=u.e.TWO_PI/86400,et=new xe;Me.computeTemeToPseudoFixedMatrix=function(e,t){if(!a.e(e))throw new o.t("date is required.");var n,r=(et=xe.addSeconds(e,-xe.computeTaiMinusUtc(e),et)).dayNumber,s=et.secondsOfDay,l=r-2451545,c=(24110.54841+(n=s>=43200?(l+.5)/ee.DAYS_PER_JULIAN_CENTURY:(l-.5)/ee.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+n*(.093104+-62e-7*n)))*Ke%u.e.TWO_PI+(72921158553e-15+11772758384668e-32*(r-2451545.5))*((s+.5*ee.SECONDS_PER_DAY)%ee.SECONDS_PER_DAY),f=Math.cos(c),d=Math.sin(c);return a.e(t)?(t[0]=f,t[1]=-d,t[2]=0,t[3]=d,t[4]=f,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new i.p(f,d,0,-d,f,0,0,0,1)},Me.iau2006XysData=new Ce,Me.earthOrientationParameters=_e.NONE;var tt=32.184;Me.preloadIcrfFixed=function(e){var t=e.start.dayNumber,n=e.start.secondsOfDay+tt,r=e.stop.dayNumber,o=e.stop.secondsOfDay+tt,a=Me.iau2006XysData.preload(t,n,r,o),i=Me.earthOrientationParameters.getPromiseToLoad();return Promise.all([a,i])},Me.computeIcrfToFixedMatrix=function(e,t){if(!a.e(e))throw new o.t("date is required.");a.e(t)||(t=new i.p);var n=Me.computeFixedToIcrfMatrix(e,t);if(a.e(n))return i.p.transpose(n,t)};var nt=new Ne(0,0,0),rt=new X(0,0,0,0,0,0),ot=new i.p,at=new i.p;Me.computeFixedToIcrfMatrix=function(e,t){if(!a.e(e))throw new o.t("date is required.");a.e(t)||(t=new i.p);var n=Me.earthOrientationParameters.compute(e,rt);if(a.e(n)){var r=e.dayNumber,s=e.secondsOfDay+tt,l=Me.iau2006XysData.computeXysRadians(r,s,nt);if(a.e(l)){var c=l.x+n.xPoleOffset,f=l.y+n.yPoleOffset,d=1/(1+Math.sqrt(1-c*c-f*f)),p=ot;p[0]=1-d*c*c,p[3]=-d*c*f,p[6]=c,p[1]=-d*c*f,p[4]=1-d*f*f,p[7]=f,p[2]=-c,p[5]=-f,p[8]=1-d*(c*c+f*f);var y=i.p.fromRotationZ(-l.s,at),h=i.p.multiply(p,y,ot),m=e.dayNumber-2451545,w=(e.secondsOfDay-xe.computeTaiMinusUtc(e)+n.ut1MinusUtc)/ee.SECONDS_PER_DAY,O=.779057273264+w+.00273781191135448*(m+w);O=O%1*u.e.TWO_PI;var b=i.p.fromRotationZ(O,at),x=i.p.multiply(h,b,ot),E=Math.cos(n.xPoleWander),_=Math.cos(n.yPoleWander),v=Math.sin(n.xPoleWander),T=Math.sin(n.yPoleWander),g=r-2451545+s/ee.SECONDS_PER_DAY,S=-47e-6*(g/=36525)*u.e.RADIANS_PER_DEGREE/3600,P=Math.cos(S),D=Math.sin(S),N=at;return N[0]=E*P,N[1]=E*D,N[2]=v,N[3]=-_*D+T*v*P,N[4]=_*P+T*v*D,N[5]=-T*E,N[6]=-T*D-_*v*P,N[7]=T*P-_*v*D,N[8]=_*E,i.p.multiply(x,N,t)}}};var it=new c.e;Me.pointToWindowCoordinates=function(e,t,n,r){return(r=Me.pointToGLWindowCoordinates(e,t,n,r)).y=2*t[5]-r.y,r},Me.pointToGLWindowCoordinates=function(e,n,r,i){if(!a.e(e))throw new o.t("modelViewProjectionMatrix is required.");if(!a.e(n))throw new o.t("viewportTransformation is required.");if(!a.e(r))throw new o.t("point is required.");a.e(i)||(i=new t.o);var u=it;return s.y.multiplyByVector(e,c.e.fromElements(r.x,r.y,r.z,1,u),u),c.e.multiplyByScalar(u,1/u.w,u),s.y.multiplyByVector(n,u,u),t.o.fromCartesian4(u,i)};var st=new n.o,ut=new n.o,lt=new n.o;Me.rotationMatrixFromPositionVelocity=function(e,r,s,l){if(!a.e(e))throw new o.t("position is required.");if(!a.e(r))throw new o.t("velocity is required.");var c=a.u(s,t.t.WGS84).geodeticSurfaceNormal(e,st),f=n.o.cross(r,c,ut);n.o.equalsEpsilon(f,n.o.ZERO,u.e.EPSILON6)&&(f=n.o.clone(n.o.UNIT_X,f));var d=n.o.cross(f,r,lt);return n.o.normalize(d,d),n.o.cross(r,d,f),n.o.negate(f,f),n.o.normalize(f,f),a.e(l)||(l=new i.p),l[0]=r.x,l[1]=r.y,l[2]=r.z,l[3]=f.x,l[4]=f.y,l[5]=f.z,l[6]=d.x,l[7]=d.y,l[8]=d.z,l};var ct=new s.y(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),ft=new r.a,dt=new n.o,pt=new n.o,yt=new i.p,ht=new s.y,mt=new s.y;function wt(e){e=a.u(e,a.u.EMPTY_OBJECT),o.o.typeOf.object("options.attributes",e.attributes),this.attributes=e.attributes,this.indices=e.indices,this.primitiveType=a.u(e.primitiveType,s._0xa706e5.TRIANGLES),this.boundingSphere=e.boundingSphere,this.geometryType=a.u(e.geometryType,y.NONE),this.boundingSphereCV=e.boundingSphereCV,this.offsetAttribute=e.offsetAttribute}Me.basisTo2D=function(e,t,r){if(!a.e(e))throw new o.t("projection is required.");if(!a.e(t))throw new o.t("matrix is required.");if(!a.e(r))throw new o.t("result is required.");var i=s.y.getTranslation(t,pt),u=e.ellipsoid,l=u.cartesianToCartographic(i,ft),c=e.project(l,dt);n.o.fromElements(c.z,c.x,c.y,c);var f=Me.eastNorthUpToFixedFrame(i,u,ht),d=s.y.inverseTransformation(f,mt),p=s.y.getMatrix3(t,yt),y=s.y.multiplyByMatrix3(d,p,r);return s.y.multiply(ct,y,r),s.y.setTranslation(r,c,r),r},Me.wgs84To2DModelMatrix=function(e,t,r){if(!a.e(e))throw new o.t("projection is required.");if(!a.e(t))throw new o.t("center is required.");if(!a.e(r))throw new o.t("result is required.");var i=e.ellipsoid,u=Me.eastNorthUpToFixedFrame(t,i,ht),l=s.y.inverseTransformation(u,mt),c=i.cartesianToCartographic(t,ft),f=e.project(c,dt);n.o.fromElements(f.z,f.x,f.y,f);var d=s.y.fromTranslation(f,ht);return s.y.multiply(ct,l,r),s.y.multiply(d,r,r),r},Me.buildUp=function(e,t){var r=t.clone(),o=e.clone();o=n.o.normalize(o,o),Math.abs(n.o.dot(o,r))>=1&&(o=Math.abs(n.o.dot(r,n.o.UNIT_Y))<1?n.o.clone(n.o.UNIT_Y,o):n.o.clone(n.o.UNIT_Z,o));var a=new n.o;return n.o.cross(o,r,a),a=n.o.normalize(a,a),n.o.cross(r,a,o),o=n.o.normalize(o,o)},Me.getHeading=function(e,t){var n;return n=u.e.equalsEpsilon(Math.abs(e.z),1,u.e.EPSILON3)?Math.atan2(t.y,t.x)-u.e.PI_OVER_TWO:Math.atan2(e.y,e.x)-u.e.PI_OVER_TWO,u.e.TWO_PI-u.e.zeroToTwoPi(n)},Me.convertToColumbusCartesian=function(e){var t=new f.n,o=t.ellipsoid,a=new n.o,i=new r.a;return o.cartesianToCartographic(e,i),t.project(i,a),n.o.fromElements(a.z,a.x,a.y)},Me.convertTo3DCartesian=function(e){var t=new f.n,o=t.ellipsoid,a=new n.o,i=new r.a;return a=n.o.fromElements(e.y,e.z,e.x),t.unproject(a,i),o.cartographicToCartesian(i,a)},wt.computeNumberOfVertices=function(e){o.o.typeOf.object("geometry",e);var t=-1;for(var n in e.attributes)if(e.attributes.hasOwnProperty(n)&&a.e(e.attributes[n])&&a.e(e.attributes[n].values)){var r=e.attributes[n];if(r.isInstanceAttribute)continue;var i=r.values.length/r.componentsPerAttribute;if(t!==i&&-1!==t)throw new o.t("All attribute lists must have the same number of attributes.");t=i}return t};var Ot=new r.a,bt=new n.o,xt=new s.y,Et=[new r.a,new r.a,new r.a],_t=[new t.o,new t.o,new t.o],vt=[new t.o,new t.o,new t.o],Tt=new n.o,gt=new O,St=new s.y,Pt=new h;wt._textureCoordinateRotationPoints=function(e,o,a,u){var c,f=l.h.center(u,Ot),d=r.a.toCartesian(f,a,bt),p=Me.eastNorthUpToFixedFrame(d,a,xt),y=s.y.inverse(p,xt),m=_t,w=Et;w[0].longitude=u.west,w[0].latitude=u.south,w[1].longitude=u.west,w[1].latitude=u.north,w[2].longitude=u.east,w[2].latitude=u.south;var b=Tt;for(c=0;c<3;c++)r.a.toCartesian(w[c],a,b),b=s.y.multiplyByPointAsVector(y,b,b),m[c].x=b.x,m[c].y=b.y;var x=O.fromAxisAngle(n.o.UNIT_Z,-o,gt),E=i.p.fromQuaternion(x,St),_=e.length,v=Number.POSITIVE_INFINITY,T=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,S=Number.NEGATIVE_INFINITY;for(c=0;c<_;c++)b=s.y.multiplyByPointAsVector(y,e[c],b),b=i.p.multiplyByVector(E,b,b),v=Math.min(v,b.x),T=Math.min(T,b.y),g=Math.max(g,b.x),S=Math.max(S,b.y);var P=h.fromRotation(o,Pt),D=vt;D[0].x=v,D[0].y=T,D[1].x=v,D[1].y=S,D[2].x=g,D[2].y=T;var N=m[0],C=m[2].x-N.x,I=m[1].y-N.y;for(c=0;c<3;c++){var j=D[c];h.multiplyByVector(P,j,j),j.x=(j.x-N.x)/C,j.y=(j.y-N.y)/I}var R=D[0],M=D[1],A=D[2],q=new Array(6);return t.o.pack(R,q),t.o.pack(M,q,2),t.o.pack(A,q,4),q},e.I=wt,e.Me=y,e.f=h,e.m=Me,e.n=O,e.o=function(e){if(e=a.u(e,a.u.EMPTY_OBJECT),!a.e(e.componentDatatype))throw new o.t("options.componentDatatype is required.");if(!a.e(e.componentsPerAttribute))throw new o.t("options.componentsPerAttribute is required.");if(e.componentsPerAttribute<1||e.componentsPerAttribute>4)throw new o.t("options.componentsPerAttribute must be between 1 and 4.");if(!a.e(e.values))throw new o.t("options.values is required.");this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=a.u(e.normalize,!1),this.values=e.values}}));
