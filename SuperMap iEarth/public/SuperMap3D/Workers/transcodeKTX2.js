import{a as Te,b as C}from"./chunk-S7TKXIWS.js";import{a as tr}from"./chunk-AMRCVYIA.js";import{a as Q}from"./chunk-6S43R6PL.js";import"./chunk-EHDXVZQM.js";import{a as er}from"./chunk-UBHQMGET.js";import{a as Qt}from"./chunk-EDZQSM3T.js";import"./chunk-PJGSCWXZ.js";import{a as Ue}from"./chunk-NUC3LT2W.js";import{a as pt}from"./chunk-SFC4FDPW.js";var si={VK_FORMAT_UNDEFINED:0,VK_FORMAT_R4G4_UNORM_PACK8:1,VK_FORMAT_R4G4B4A4_UNORM_PACK16:2,VK_FORMAT_B4G4R4A4_UNORM_PACK16:3,VK_FORMAT_R5G6B5_UNORM_PACK16:4,VK_FORMAT_B5G6R5_UNORM_PACK16:5,VK_FORMAT_R5G5B5A1_UNORM_PACK16:6,VK_FORMAT_B5G5R5A1_UNORM_PACK16:7,VK_FORMAT_A1R5G5B5_UNORM_PACK16:8,VK_FORMAT_R8_UNORM:9,VK_FORMAT_R8_SNORM:10,VK_FORMAT_R8_USCALED:11,VK_FORMAT_R8_SSCALED:12,VK_FORMAT_R8_UINT:13,VK_FORMAT_R8_SINT:14,VK_FORMAT_R8_SRGB:15,VK_FORMAT_R8G8_UNORM:16,VK_FORMAT_R8G8_SNORM:17,VK_FORMAT_R8G8_USCALED:18,VK_FORMAT_R8G8_SSCALED:19,VK_FORMAT_R8G8_UINT:20,VK_FORMAT_R8G8_SINT:21,VK_FORMAT_R8G8_SRGB:22,VK_FORMAT_R8G8B8_UNORM:23,VK_FORMAT_R8G8B8_SNORM:24,VK_FORMAT_R8G8B8_USCALED:25,VK_FORMAT_R8G8B8_SSCALED:26,VK_FORMAT_R8G8B8_UINT:27,VK_FORMAT_R8G8B8_SINT:28,VK_FORMAT_R8G8B8_SRGB:29,VK_FORMAT_B8G8R8_UNORM:30,VK_FORMAT_B8G8R8_SNORM:31,VK_FORMAT_B8G8R8_USCALED:32,VK_FORMAT_B8G8R8_SSCALED:33,VK_FORMAT_B8G8R8_UINT:34,VK_FORMAT_B8G8R8_SINT:35,VK_FORMAT_B8G8R8_SRGB:36,VK_FORMAT_R8G8B8A8_UNORM:37,VK_FORMAT_R8G8B8A8_SNORM:38,VK_FORMAT_R8G8B8A8_USCALED:39,VK_FORMAT_R8G8B8A8_SSCALED:40,VK_FORMAT_R8G8B8A8_UINT:41,VK_FORMAT_R8G8B8A8_SINT:42,VK_FORMAT_R8G8B8A8_SRGB:43,VK_FORMAT_B8G8R8A8_UNORM:44,VK_FORMAT_B8G8R8A8_SNORM:45,VK_FORMAT_B8G8R8A8_USCALED:46,VK_FORMAT_B8G8R8A8_SSCALED:47,VK_FORMAT_B8G8R8A8_UINT:48,VK_FORMAT_B8G8R8A8_SINT:49,VK_FORMAT_B8G8R8A8_SRGB:50,VK_FORMAT_A8B8G8R8_UNORM_PACK32:51,VK_FORMAT_A8B8G8R8_SNORM_PACK32:52,VK_FORMAT_A8B8G8R8_USCALED_PACK32:53,VK_FORMAT_A8B8G8R8_SSCALED_PACK32:54,VK_FORMAT_A8B8G8R8_UINT_PACK32:55,VK_FORMAT_A8B8G8R8_SINT_PACK32:56,VK_FORMAT_A8B8G8R8_SRGB_PACK32:57,VK_FORMAT_A2R10G10B10_UNORM_PACK32:58,VK_FORMAT_A2R10G10B10_SNORM_PACK32:59,VK_FORMAT_A2R10G10B10_USCALED_PACK32:60,VK_FORMAT_A2R10G10B10_SSCALED_PACK32:61,VK_FORMAT_A2R10G10B10_UINT_PACK32:62,VK_FORMAT_A2R10G10B10_SINT_PACK32:63,VK_FORMAT_A2B10G10R10_UNORM_PACK32:64,VK_FORMAT_A2B10G10R10_SNORM_PACK32:65,VK_FORMAT_A2B10G10R10_USCALED_PACK32:66,VK_FORMAT_A2B10G10R10_SSCALED_PACK32:67,VK_FORMAT_A2B10G10R10_UINT_PACK32:68,VK_FORMAT_A2B10G10R10_SINT_PACK32:69,VK_FORMAT_R16_UNORM:70,VK_FORMAT_R16_SNORM:71,VK_FORMAT_R16_USCALED:72,VK_FORMAT_R16_SSCALED:73,VK_FORMAT_R16_UINT:74,VK_FORMAT_R16_SINT:75,VK_FORMAT_R16_SFLOAT:76,VK_FORMAT_R16G16_UNORM:77,VK_FORMAT_R16G16_SNORM:78,VK_FORMAT_R16G16_USCALED:79,VK_FORMAT_R16G16_SSCALED:80,VK_FORMAT_R16G16_UINT:81,VK_FORMAT_R16G16_SINT:82,VK_FORMAT_R16G16_SFLOAT:83,VK_FORMAT_R16G16B16_UNORM:84,VK_FORMAT_R16G16B16_SNORM:85,VK_FORMAT_R16G16B16_USCALED:86,VK_FORMAT_R16G16B16_SSCALED:87,VK_FORMAT_R16G16B16_UINT:88,VK_FORMAT_R16G16B16_SINT:89,VK_FORMAT_R16G16B16_SFLOAT:90,VK_FORMAT_R16G16B16A16_UNORM:91,VK_FORMAT_R16G16B16A16_SNORM:92,VK_FORMAT_R16G16B16A16_USCALED:93,VK_FORMAT_R16G16B16A16_SSCALED:94,VK_FORMAT_R16G16B16A16_UINT:95,VK_FORMAT_R16G16B16A16_SINT:96,VK_FORMAT_R16G16B16A16_SFLOAT:97,VK_FORMAT_R32_UINT:98,VK_FORMAT_R32_SINT:99,VK_FORMAT_R32_SFLOAT:100,VK_FORMAT_R32G32_UINT:101,VK_FORMAT_R32G32_SINT:102,VK_FORMAT_R32G32_SFLOAT:103,VK_FORMAT_R32G32B32_UINT:104,VK_FORMAT_R32G32B32_SINT:105,VK_FORMAT_R32G32B32_SFLOAT:106,VK_FORMAT_R32G32B32A32_UINT:107,VK_FORMAT_R32G32B32A32_SINT:108,VK_FORMAT_R32G32B32A32_SFLOAT:109,VK_FORMAT_R64_UINT:110,VK_FORMAT_R64_SINT:111,VK_FORMAT_R64_SFLOAT:112,VK_FORMAT_R64G64_UINT:113,VK_FORMAT_R64G64_SINT:114,VK_FORMAT_R64G64_SFLOAT:115,VK_FORMAT_R64G64B64_UINT:116,VK_FORMAT_R64G64B64_SINT:117,VK_FORMAT_R64G64B64_SFLOAT:118,VK_FORMAT_R64G64B64A64_UINT:119,VK_FORMAT_R64G64B64A64_SINT:120,VK_FORMAT_R64G64B64A64_SFLOAT:121,VK_FORMAT_B10G11R11_UFLOAT_PACK32:122,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:123,VK_FORMAT_D16_UNORM:124,VK_FORMAT_X8_D24_UNORM_PACK32:125,VK_FORMAT_D32_SFLOAT:126,VK_FORMAT_S8_UINT:127,VK_FORMAT_D16_UNORM_S8_UINT:128,VK_FORMAT_D24_UNORM_S8_UINT:129,VK_FORMAT_D32_SFLOAT_S8_UINT:130,VK_FORMAT_BC1_RGB_UNORM_BLOCK:131,VK_FORMAT_BC1_RGB_SRGB_BLOCK:132,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:133,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:134,VK_FORMAT_BC2_UNORM_BLOCK:135,VK_FORMAT_BC2_SRGB_BLOCK:136,VK_FORMAT_BC3_UNORM_BLOCK:137,VK_FORMAT_BC3_SRGB_BLOCK:138,VK_FORMAT_BC4_UNORM_BLOCK:139,VK_FORMAT_BC4_SNORM_BLOCK:140,VK_FORMAT_BC5_UNORM_BLOCK:141,VK_FORMAT_BC5_SNORM_BLOCK:142,VK_FORMAT_BC6H_UFLOAT_BLOCK:143,VK_FORMAT_BC6H_SFLOAT_BLOCK:144,VK_FORMAT_BC7_UNORM_BLOCK:145,VK_FORMAT_BC7_SRGB_BLOCK:146,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:147,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:148,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:149,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:150,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:151,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:152,VK_FORMAT_EAC_R11_UNORM_BLOCK:153,VK_FORMAT_EAC_R11_SNORM_BLOCK:154,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:155,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:156,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:157,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:158,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:159,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:160,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:161,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:162,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:163,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:164,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:165,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:166,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:167,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:168,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:169,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:170,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:171,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:172,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:173,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:174,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:175,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:176,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:177,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:178,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:179,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:180,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:181,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:182,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:183,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:184,VK_FORMAT_G8B8G8R8_422_UNORM:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM:1000156006,VK_FORMAT_R10X6_UNORM_PACK16:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16:1000156016,VK_FORMAT_R12X4_UNORM_PACK16:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM:1000156033,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:1000054e3,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:1000054001,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:1000054002,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:1000054003,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:1000054004,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:1000054005,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:1000054006,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:1000054007,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:1000066e3,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:1000066001,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:1000066002,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:1000066003,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:1000066004,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:1000066005,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:1000066006,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:1000066007,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:1000066008,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:1000066009,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:1000066010,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:1000066011,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:1000066012,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:1000066013,VK_FORMAT_G8B8G8R8_422_UNORM_KHR:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM_KHR:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM_KHR:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM_KHR:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM_KHR:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM_KHR:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM_KHR:1000156006,VK_FORMAT_R10X6_UNORM_PACK16_KHR:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16_KHR:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16_KHR:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16_KHR:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16_KHR:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16_KHR:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16_KHR:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16_KHR:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16_KHR:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16_KHR:1000156016,VK_FORMAT_R12X4_UNORM_PACK16_KHR:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16_KHR:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16_KHR:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16_KHR:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16_KHR:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16_KHR:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16_KHR:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16_KHR:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16_KHR:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16_KHR:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM_KHR:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM_KHR:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM_KHR:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM_KHR:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM_KHR:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM_KHR:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM_KHR:1000156033},Pe=Object.freeze(si);var Oi=new Uint8Array([0]),N=[171,75,84,88,32,50,48,187,13,10,26,10],vt,ht,Kt,et,rr,Mt,nr,ir;(function(f){f[f.NONE=0]="NONE",f[f.BASISLZ=1]="BASISLZ",f[f.ZSTD=2]="ZSTD",f[f.ZLIB=3]="ZLIB"})(vt||(vt={})),function(f){f[f.BASICFORMAT=0]="BASICFORMAT"}(ht||(ht={})),function(f){f[f.UNSPECIFIED=0]="UNSPECIFIED",f[f.ETC1S=163]="ETC1S",f[f.UASTC=166]="UASTC"}(Kt||(Kt={})),function(f){f[f.UNSPECIFIED=0]="UNSPECIFIED",f[f.SRGB=1]="SRGB"}(et||(et={})),function(f){f[f.UNSPECIFIED=0]="UNSPECIFIED",f[f.LINEAR=1]="LINEAR",f[f.SRGB=2]="SRGB",f[f.ITU=3]="ITU",f[f.NTSC=4]="NTSC",f[f.SLOG=5]="SLOG",f[f.SLOG2=6]="SLOG2"}(rr||(rr={})),function(f){f[f.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",f[f.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(Mt||(Mt={})),function(f){f[f.RGB=0]="RGB",f[f.RRR=3]="RRR",f[f.GGG=4]="GGG",f[f.AAA=15]="AAA"}(nr||(nr={})),function(f){f[f.RGB=0]="RGB",f[f.RGBA=3]="RGBA",f[f.RRR=4]="RRR",f[f.RRRG=5]="RRRG"}(ir||(ir={}));var gt=class{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=vt.NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:ht.BASICFORMAT,versionNumber:2,descriptorBlockSize:40,colorModel:Kt.UNSPECIFIED,colorPrimaries:et.SRGB,transferFunction:et.SRGB,flags:Mt.ALPHA_STRAIGHT,texelBlockDimension:{x:4,y:4,z:1,w:1},bytesPlane:[],samples:[]}],this.keyValue={},this.globalData=null}},ae=class{constructor(R,i,y,A){this._dataView=new DataView(R.buffer,R.byteOffset+i,y),this._littleEndian=A,this._offset=0}_nextUint8(){let R=this._dataView.getUint8(this._offset);return this._offset+=1,R}_nextUint16(){let R=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,R}_nextUint32(){let R=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,R}_nextUint64(){let R=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,R}_skip(R){return this._offset+=R,this}_scan(R,i=0){let y=this._offset,A=0;for(;this._dataView.getUint8(this._offset)!==i&&A<R;)A++,this._offset++;return A<R&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+y,A)}};function _r(f){return typeof TextDecoder<"u"?new TextDecoder().decode(f):Buffer.from(f).toString("utf8")}function or(f){let R=new Uint8Array(f.buffer,f.byteOffset,N.length);if(R[0]!==N[0]||R[1]!==N[1]||R[2]!==N[2]||R[3]!==N[3]||R[4]!==N[4]||R[5]!==N[5]||R[6]!==N[6]||R[7]!==N[7]||R[8]!==N[8]||R[9]!==N[9]||R[10]!==N[10]||R[11]!==N[11])throw new Error("Missing KTX 2.0 identifier.");let i=new gt,y=17*Uint32Array.BYTES_PER_ELEMENT,A=new ae(f,N.length,y,!0);i.vkFormat=A._nextUint32(),i.typeSize=A._nextUint32(),i.pixelWidth=A._nextUint32(),i.pixelHeight=A._nextUint32(),i.pixelDepth=A._nextUint32(),i.layerCount=A._nextUint32(),i.faceCount=A._nextUint32();let m=A._nextUint32();i.supercompressionScheme=A._nextUint32();let p=A._nextUint32(),V=A._nextUint32(),I=A._nextUint32(),E=A._nextUint32(),M=A._nextUint64(),K=A._nextUint64(),g=new ae(f,N.length+y,3*m*8,!0);for(let G=0;G<m;G++)i.levels.push({levelData:new Uint8Array(f.buffer,f.byteOffset+g._nextUint64(),g._nextUint64()),uncompressedByteLength:g._nextUint64()});let O=new ae(f,p,V,!0),d={vendorId:O._skip(4)._nextUint16(),descriptorType:O._nextUint16(),versionNumber:O._nextUint16(),descriptorBlockSize:O._nextUint16(),colorModel:O._nextUint8(),colorPrimaries:O._nextUint8(),transferFunction:O._nextUint8(),flags:O._nextUint8(),texelBlockDimension:{x:O._nextUint8()+1,y:O._nextUint8()+1,z:O._nextUint8()+1,w:O._nextUint8()+1},bytesPlane:[O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8()],samples:[]},$=(d.descriptorBlockSize/4-6)/4;for(let G=0;G<$;G++)d.samples[G]={bitOffset:O._nextUint16(),bitLength:O._nextUint8(),channelID:O._nextUint8(),samplePosition:[O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8()],sampleLower:O._nextUint32(),sampleUpper:O._nextUint32()};i.dataFormatDescriptor.length=0,i.dataFormatDescriptor.push(d);let S=new ae(f,I,E,!0);for(;S._offset<E;){let G=S._nextUint32(),pe=S._scan(G),Le=_r(pe),Ee=S._scan(G-pe.byteLength);i.keyValue[Le]=Le.match(/^ktx/i)?_r(Ee):Ee,S._offset%4&&S._skip(4-S._offset%4)}if(K<=0)return i;let U=new ae(f,M,K,!0),H=U._nextUint16(),de=U._nextUint16(),se=U._nextUint32(),fe=U._nextUint32(),Se=U._nextUint32(),ee=U._nextUint32(),Ge=[];for(let G=0;G<m;G++)Ge.push({imageFlags:U._nextUint32(),rgbSliceByteOffset:U._nextUint32(),rgbSliceByteLength:U._nextUint32(),alphaSliceByteOffset:U._nextUint32(),alphaSliceByteLength:U._nextUint32()});let we=M+U._offset,te=we+se,rt=te+fe,ue=rt+Se,be=new Uint8Array(f.buffer,f.byteOffset+we,se),nt=new Uint8Array(f.buffer,f.byteOffset+te,fe),Oe=new Uint8Array(f.buffer,f.byteOffset+rt,Se),Ne=new Uint8Array(f.buffer,f.byteOffset+ue,ee);return i.globalData={endpointCount:H,selectorCount:de,imageDescs:Ge,endpointsData:be,selectorsData:nt,tablesData:Oe,extendedData:Ne},i}var tt=function(){var f=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(f=f||__filename),function(R){R=R||{};var i=typeof R<"u"?R:{},y,A;i.ready=new Promise(function(e,t){y=e,A=t});var m={},p;for(p in i)i.hasOwnProperty(p)&&(m[p]=i[p]);var V=[],I="./this.program",E=function(e,t){throw t},M=!1,K=!1,g=!1,O=!1;M=typeof window=="object",K=typeof importScripts=="function",g=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",O=!M&&!g&&!K;var d="";function $(e){return i.locateFile?i.locateFile(e,d):d+e}var S,U,H,de,se,fe;g?(K?d=pt("path").dirname(d)+"/":d=__dirname+"/",S=function(t,r){return se||(se=pt("fs")),fe||(fe=pt("path")),t=fe.normalize(t),se.readFileSync(t,r?null:"utf8")},H=function(t){var r=S(t,!0);return r.buffer||(r=new Uint8Array(r)),Oe(r.buffer),r},process.argv.length>1&&(I=process.argv[1].replace(/\\/g,"/")),V=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof oi))throw e}),process.on("unhandledRejection",ce),E=function(e){process.exit(e)},i.inspect=function(){return"[Emscripten Module object]"}):O?(typeof read<"u"&&(S=function(t){return read(t)}),H=function(t){var r;return typeof readbuffer=="function"?new Uint8Array(readbuffer(t)):(r=read(t,"binary"),Oe(typeof r=="object"),r)},typeof scriptArgs<"u"?V=scriptArgs:typeof arguments<"u"&&(V=arguments),typeof quit=="function"&&(E=function(e){quit(e)}),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(M||K)&&(K?d=self.location.href:typeof document<"u"&&document.currentScript&&(d=document.currentScript.src),f&&(d=f),d.indexOf("blob:")!==0?d=d.substr(0,d.lastIndexOf("/")+1):d="",S=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},K&&(H=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),U=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){if(n.status==200||n.status==0&&n.response){t(n.response);return}r()},n.onerror=r,n.send(null)},de=function(e){document.title=e});var Se=i.print||console.log.bind(console),ee=i.printErr||console.warn.bind(console);for(p in m)m.hasOwnProperty(p)&&(i[p]=m[p]);m=null,i.arguments&&(V=i.arguments),i.thisProgram&&(I=i.thisProgram),i.quit&&(E=i.quit);var Ge=0,we=function(e){Ge=e},te;i.wasmBinary&&(te=i.wasmBinary);var rt=i.noExitRuntime||!0;typeof WebAssembly!="object"&&ce("no native wasm support detected");var ue,be=!1,nt;function Oe(e,t){e||ce("Assertion failed: "+t)}var Ne=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function G(e,t,r){for(var n=t+r,_=t;e[_]&&!(_>=n);)++_;if(_-t>16&&e.subarray&&Ne)return Ne.decode(e.subarray(t,_));for(var s="";t<_;){var u=e[t++];if(!(u&128)){s+=String.fromCharCode(u);continue}var o=e[t++]&63;if((u&224)==192){s+=String.fromCharCode((u&31)<<6|o);continue}var a=e[t++]&63;if((u&240)==224?u=(u&15)<<12|o<<6|a:u=(u&7)<<18|o<<12|a<<6|e[t++]&63,u<65536)s+=String.fromCharCode(u);else{var c=u-65536;s+=String.fromCharCode(55296|c>>10,56320|c&1023)}}return s}function pe(e,t){return e?G(w,e,t):""}function Le(e,t,r,n){if(!(n>0))return 0;for(var _=r,s=r+n-1,u=0;u<e.length;++u){var o=e.charCodeAt(u);if(o>=55296&&o<=57343){var a=e.charCodeAt(++u);o=65536+((o&1023)<<10)|a&1023}if(o<=127){if(r>=s)break;t[r++]=o}else if(o<=2047){if(r+1>=s)break;t[r++]=192|o>>6,t[r++]=128|o&63}else if(o<=65535){if(r+2>=s)break;t[r++]=224|o>>12,t[r++]=128|o>>6&63,t[r++]=128|o&63}else{if(r+3>=s)break;t[r++]=240|o>>18,t[r++]=128|o>>12&63,t[r++]=128|o>>6&63,t[r++]=128|o&63}}return t[r]=0,r-_}function Ee(e,t,r){return Le(e,w,t,r)}function cr(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:t+=4}return t}var Ft=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function lr(e,t){for(var r=e,n=r>>1,_=n+t/2;!(n>=_)&&ve[n];)++n;if(r=n<<1,r-e>32&&Ft)return Ft.decode(w.subarray(e,r));for(var s="",u=0;!(u>=t/2);++u){var o=ie[e+u*2>>1];if(o==0)break;s+=String.fromCharCode(o)}return s}function Rr(e,t,r){if(r===void 0&&(r=2147483647),r<2)return 0;r-=2;for(var n=t,_=r<e.length*2?r/2:e.length,s=0;s<_;++s){var u=e.charCodeAt(s);ie[t>>1]=u,t+=2}return ie[t>>1]=0,t-n}function Ar(e){return e.length*2}function Tr(e,t){for(var r=0,n="";!(r>=t/4);){var _=L[e+r*4>>2];if(_==0)break;if(++r,_>=65536){var s=_-65536;n+=String.fromCharCode(55296|s>>10,56320|s&1023)}else n+=String.fromCharCode(_)}return n}function dr(e,t,r){if(r===void 0&&(r=2147483647),r<4)return 0;for(var n=t,_=n+r-4,s=0;s<e.length;++s){var u=e.charCodeAt(s);if(u>=55296&&u<=57343){var o=e.charCodeAt(++s);u=65536+((u&1023)<<10)|o&1023}if(L[t>>2]=u,t+=4,t+4>_)break}return L[t>>2]=0,t-n}function Or(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t}function pr(e,t){return e%t>0&&(e+=t-e%t),e}var it,De,w,ie,ve,L,W,yt,Ct;function Bt(e){it=e,i.HEAP8=De=new Int8Array(e),i.HEAP16=ie=new Int16Array(e),i.HEAP32=L=new Int32Array(e),i.HEAPU8=w=new Uint8Array(e),i.HEAPU16=ve=new Uint16Array(e),i.HEAPU32=W=new Uint32Array(e),i.HEAPF32=yt=new Float32Array(e),i.HEAPF64=Ct=new Float64Array(e)}var Ai=i.INITIAL_MEMORY||16777216,he,mt=[],Ut=[],vr=[],Pt=[],hr=!1;function Kr(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)yr(i.preRun.shift());xe(mt)}function Mr(){hr=!0,xe(Ut)}function gr(){xe(vr)}function Fr(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)Br(i.postRun.shift());xe(Pt)}function yr(e){mt.unshift(e)}function Cr(e){Ut.unshift(e)}function Br(e){Pt.unshift(e)}var _e=0,_t=null,Ke=null;function mr(e){_e++,i.monitorRunDependencies&&i.monitorRunDependencies(_e)}function Ur(e){if(_e--,i.monitorRunDependencies&&i.monitorRunDependencies(_e),_e==0&&(_t!==null&&(clearInterval(_t),_t=null),Ke)){var t=Ke;Ke=null,t()}}i.preloadedImages={},i.preloadedAudios={};function ce(e){i.onAbort&&i.onAbort(e),e+="",ee(e),be=!0,nt=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw A(t),t}function Vt(e,t){return String.prototype.startsWith?e.startsWith(t):e.indexOf(t)===0}var Pr="data:application/octet-stream;base64,";function St(e){return Vt(e,Pr)}var Vr="file://";function Gt(e){return Vt(e,Vr)}var D="basis_transcoder.wasm";St(D)||(D=$(D));function wt(e){try{if(e==D&&te)return new Uint8Array(te);if(H)return H(e);throw"both async and sync fetching of the wasm failed"}catch(t){ce(t)}}function Sr(){if(!te&&(M||K)){if(typeof fetch=="function"&&!Gt(D))return fetch(D,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+D+"'";return e.arrayBuffer()}).catch(function(){return wt(D)});if(U)return new Promise(function(e,t){U(D,function(r){e(new Uint8Array(r))},t)})}return Promise.resolve().then(function(){return wt(D)})}function Gr(){var e={a:ri};function t(u,o){var a=u.exports;i.asm=a,ue=i.asm.K,Bt(ue.buffer),he=i.asm.O,Cr(i.asm.L),Ur("wasm-instantiate")}mr("wasm-instantiate");function r(u){t(u.instance)}function n(u){return Sr().then(function(o){var a=WebAssembly.instantiate(o,e);return a}).then(u,function(o){ee("failed to asynchronously prepare wasm: "+o),ce(o)})}function _(){return!te&&typeof WebAssembly.instantiateStreaming=="function"&&!St(D)&&!Gt(D)&&typeof fetch=="function"?fetch(D,{credentials:"same-origin"}).then(function(u){var o=WebAssembly.instantiateStreaming(u,e);return o.then(r,function(a){return ee("wasm streaming compile failed: "+a),ee("falling back to ArrayBuffer instantiation"),n(r)})}):n(r)}if(i.instantiateWasm)try{var s=i.instantiateWasm(e,t);return s}catch(u){return ee("Module.instantiateWasm callback failed with error: "+u),!1}return _().catch(A),{}}function xe(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t(i);continue}var r=t.func;typeof r=="number"?t.arg===void 0?he.get(r)():he.get(r)(t.arg):r(t.arg===void 0?null:t.arg)}}var Xe={};function Ie(e){for(;e.length;){var t=e.pop(),r=e.pop();r(t)}}function Me(e){return this.fromWireType(W[e>>2])}var le={},oe={},$e={},wr=48,br=57;function He(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=wr&&t<=br?"_"+e:e}function ke(e,t){return e=He(e),new Function("body","return function "+e+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(t)}function ot(e,t){var r=ke(t,function(n){this.name=t,this.message=n;var _=new Error(n).stack;_!==void 0&&(this.stack=this.toString()+`
`+_.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},r}var bt=void 0;function We(e){throw new bt(e)}function re(e,t,r){e.forEach(function(o){$e[o]=t});function n(o){var a=r(o);a.length!==e.length&&We("Mismatched type converter count");for(var c=0;c<e.length;++c)j(e[c],a[c])}var _=new Array(t.length),s=[],u=0;t.forEach(function(o,a){oe.hasOwnProperty(o)?_[a]=oe[o]:(s.push(o),le.hasOwnProperty(o)||(le[o]=[]),le[o].push(function(){_[a]=oe[o],++u,u===s.length&&n(_)}))}),s.length===0&&n(_)}function Nr(e){var t=Xe[e];delete Xe[e];var r=t.rawConstructor,n=t.rawDestructor,_=t.fields,s=_.map(function(u){return u.getterReturnType}).concat(_.map(function(u){return u.setterArgumentType}));re([e],s,function(u){var o={};return _.forEach(function(a,c){var l=a.fieldName,T=u[c],h=a.getter,F=a.getterContext,P=u[c+_.length],b=a.setter,X=a.setterContext;o[l]={read:function(z){return T.fromWireType(h(F,z))},write:function(z,me){var J=[];b(X,z,P.toWireType(J,me)),Ie(J)}}}),[{name:t.name,fromWireType:function(a){var c={};for(var l in o)c[l]=o[l].read(a);return n(a),c},toWireType:function(a,c){for(var l in o)if(!(l in c))throw new TypeError('Missing field:  "'+l+'"');var T=r();for(l in o)o[l].write(T,c[l]);return a!==null&&a.push(n,T),T},argPackAdvance:8,readValueFromPointer:Me,destructorFunction:n}]})}function je(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function Lr(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Nt=e}var Nt=void 0;function B(e){for(var t="",r=e;w[r];)t+=Nt[w[r++]];return t}var Re=void 0;function v(e){throw new Re(e)}function j(e,t,r){if(r=r||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||v('type "'+n+'" must have a positive integer typeid pointer'),oe.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;v("Cannot register type '"+n+"' twice")}if(oe[e]=t,delete $e[e],le.hasOwnProperty(e)){var _=le[e];delete le[e],_.forEach(function(s){s()})}}function Er(e,t,r,n,_){var s=je(r);t=B(t),j(e,{name:t,fromWireType:function(u){return!!u},toWireType:function(u,o){return o?n:_},argPackAdvance:8,readValueFromPointer:function(u){var o;if(r===1)o=De;else if(r===2)o=ie;else if(r===4)o=L;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(o[u>>s])},destructorFunction:null})}function Dr(e){if(!(this instanceof ne)||!(e instanceof ne))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,_=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)_=n.upcast(_),n=n.baseClass;return t===n&&r===_}function xr(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function at(e){function t(r){return r.$$.ptrType.registeredClass.name}v(t(e)+" instance already deleted")}var st=!1;function Lt(e){}function Xr(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function Et(e){e.count.value-=1;var t=e.count.value===0;t&&Xr(e)}function ge(e){return typeof FinalizationGroup>"u"?(ge=function(t){return t},e):(st=new FinalizationGroup(function(t){for(var r=t.next();!r.done;r=t.next()){var n=r.value;n.ptr?Et(n):console.warn("object already deleted: "+n.ptr)}}),ge=function(t){return st.register(t,t.$$,t.$$),t},Lt=function(t){st.unregister(t.$$)},ge(e))}function Ir(){if(this.$$.ptr||at(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=ge(Object.create(Object.getPrototypeOf(this),{$$:{value:xr(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function $r(){this.$$.ptr||at(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&v("Object already scheduled for deletion"),Lt(this),Et(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Hr(){return!this.$$.ptr}var Fe=void 0,ye=[];function ft(){for(;ye.length;){var e=ye.pop();e.$$.deleteScheduled=!1,e.delete()}}function kr(){return this.$$.ptr||at(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&v("Object already scheduled for deletion"),ye.push(this),ye.length===1&&Fe&&Fe(ft),this.$$.deleteScheduled=!0,this}function Wr(){ne.prototype.isAliasOf=Dr,ne.prototype.clone=Ir,ne.prototype.delete=$r,ne.prototype.isDeleted=Hr,ne.prototype.deleteLater=kr}function ne(){}var Dt={};function xt(e,t,r){if(e[t].overloadTable===void 0){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||v("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function ut(e,t,r){i.hasOwnProperty(e)?((r===void 0||i[e].overloadTable!==void 0&&i[e].overloadTable[r]!==void 0)&&v("Cannot register public name '"+e+"' twice"),xt(i,e,e),i.hasOwnProperty(r)&&v("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),i[e].overloadTable[r]=t):(i[e]=t,r!==void 0&&(i[e].numArguments=r))}function jr(e,t,r,n,_,s,u,o){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=_,this.getActualType=s,this.upcast=u,this.downcast=o,this.pureVirtualFunctions=[]}function ct(e,t,r){for(;t!==r;)t.upcast||v("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function zr(e,t){if(t===null)return this.isReference&&v("null is not a valid "+this.name),0;t.$$||v('Cannot pass "'+Ae(t)+'" as a '+this.name),t.$$.ptr||v("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass,n=ct(t.$$.ptr,r,this.registeredClass);return n}function qr(e,t){var r;if(t===null)return this.isReference&&v("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,r),r):0;t.$$||v('Cannot pass "'+Ae(t)+'" as a '+this.name),t.$$.ptr||v("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&v("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;if(r=ct(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&v("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:v("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var _=t.clone();r=this.rawShare(r,Z(function(){_.delete()})),e!==null&&e.push(this.rawDestructor,r)}break;default:v("Unsupporting sharing policy")}return r}function Zr(e,t){if(t===null)return this.isReference&&v("null is not a valid "+this.name),0;t.$$||v('Cannot pass "'+Ae(t)+'" as a '+this.name),t.$$.ptr||v("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&v("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass,n=ct(t.$$.ptr,r,this.registeredClass);return n}function Yr(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Jr(e){this.rawDestructor&&this.rawDestructor(e)}function Qr(e){e!==null&&e.delete()}function Xt(e,t,r){if(t===r)return e;if(r.baseClass===void 0)return null;var n=Xt(e,t,r.baseClass);return n===null?null:r.downcast(n)}function en(){return Object.keys(Ce).length}function tn(){var e=[];for(var t in Ce)Ce.hasOwnProperty(t)&&e.push(Ce[t]);return e}function rn(e){Fe=e,ye.length&&Fe&&Fe(ft)}function nn(){i.getInheritedInstanceCount=en,i.getLiveInheritedInstances=tn,i.flushPendingDeletes=ft,i.setDelayFunction=rn}var Ce={};function _n(e,t){for(t===void 0&&v("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function on(e,t){return t=_n(e,t),Ce[t]}function ze(e,t){(!t.ptrType||!t.ptr)&&We("makeClassHandle requires ptr and ptrType");var r=!!t.smartPtrType,n=!!t.smartPtr;return r!==n&&We("Both smartPtrType and smartPtr must be specified"),t.count={value:1},ge(Object.create(e,{$$:{value:t}}))}function an(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=on(this.registeredClass,t);if(r!==void 0){if(r.$$.count.value===0)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function _(){return this.isSmartPointer?ze(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):ze(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var s=this.registeredClass.getActualType(t),u=Dt[s];if(!u)return _.call(this);var o;this.isConst?o=u.constPointerType:o=u.pointerType;var a=Xt(t,this.registeredClass,o.registeredClass);return a===null?_.call(this):this.isSmartPointer?ze(o.registeredClass.instancePrototype,{ptrType:o,ptr:a,smartPtrType:this,smartPtr:e}):ze(o.registeredClass.instancePrototype,{ptrType:o,ptr:a})}function sn(){q.prototype.getPointee=Yr,q.prototype.destructor=Jr,q.prototype.argPackAdvance=8,q.prototype.readValueFromPointer=Me,q.prototype.deleteObject=Qr,q.prototype.fromWireType=an}function q(e,t,r,n,_,s,u,o,a,c,l){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=_,this.pointeeType=s,this.sharingPolicy=u,this.rawGetPointee=o,this.rawConstructor=a,this.rawShare=c,this.rawDestructor=l,!_&&t.baseClass===void 0?n?(this.toWireType=zr,this.destructorFunction=null):(this.toWireType=Zr,this.destructorFunction=null):this.toWireType=qr}function It(e,t,r){i.hasOwnProperty(e)||We("Replacing nonexistant public symbol"),i[e].overloadTable!==void 0&&r!==void 0?i[e].overloadTable[r]=t:(i[e]=t,i[e].argCount=r)}function fn(e,t,r){var n=i["dynCall_"+e];return r&&r.length?n.apply(null,[t].concat(r)):n.call(null,t)}function un(e,t,r){return e.indexOf("j")!=-1?fn(e,t,r):he.get(t).apply(null,r)}function cn(e,t){var r=[];return function(){r.length=arguments.length;for(var n=0;n<arguments.length;n++)r[n]=arguments[n];return un(e,t,r)}}function k(e,t){e=B(e);function r(){return e.indexOf("j")!=-1?cn(e,t):he.get(t)}var n=r();return typeof n!="function"&&v("unknown function pointer with signature "+e+": "+t),n}var $t=void 0;function Ht(e){var t=qt(e),r=B(t);return Y(t),r}function qe(e,t){var r=[],n={};function _(s){if(!n[s]&&!oe[s]){if($e[s]){$e[s].forEach(_);return}r.push(s),n[s]=!0}}throw t.forEach(_),new $t(e+": "+r.map(Ht).join([", "]))}function ln(e,t,r,n,_,s,u,o,a,c,l,T,h){l=B(l),s=k(_,s),o&&(o=k(u,o)),c&&(c=k(a,c)),h=k(T,h);var F=He(l);ut(F,function(){qe("Cannot construct "+l+" due to unbound types",[n])}),re([e,t,r],n?[n]:[],function(P){P=P[0];var b,X;n?(b=P.registeredClass,X=b.instancePrototype):X=ne.prototype;var z=ke(F,function(){if(Object.getPrototypeOf(this)!==me)throw new Re("Use 'new' to construct "+l);if(J.constructor_body===void 0)throw new Re(l+" has no accessible constructor");var Jt=J.constructor_body[arguments.length];if(Jt===void 0)throw new Re("Tried to invoke ctor of "+l+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(J.constructor_body).toString()+") parameters instead!");return Jt.apply(this,arguments)}),me=Object.create(X,{constructor:{value:z}});z.prototype=me;var J=new jr(l,z,me,h,b,s,o,c),ai=new q(l,J,!0,!1,!1),Zt=new q(l+"*",J,!1,!1,!1),Yt=new q(l+" const*",J,!1,!0,!1);return Dt[e]={pointerType:Zt,constPointerType:Yt},It(F,z),[ai,Zt,Yt]})}function lt(e,t){for(var r=[],n=0;n<e;n++)r.push(L[(t>>2)+n]);return r}function Rn(e,t,r,n,_,s){Oe(t>0);var u=lt(t,r);_=k(n,_);var o=[s],a=[];re([],[e],function(c){c=c[0];var l="constructor "+c.name;if(c.registeredClass.constructor_body===void 0&&(c.registeredClass.constructor_body=[]),c.registeredClass.constructor_body[t-1]!==void 0)throw new Re("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+c.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return c.registeredClass.constructor_body[t-1]=function(){qe("Cannot construct "+c.name+" due to unbound types",u)},re([],u,function(T){return c.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&v(l+" called with "+arguments.length+" arguments, expected "+(t-1)),a.length=0,o.length=t;for(var F=1;F<t;++F)o[F]=T[F].toWireType(a,arguments[F-1]);var P=_.apply(null,o);return Ie(a),T[0].fromWireType(P)},[]}),[]})}function kt(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=ke(e.name||"unknownFunctionName",function(){});r.prototype=e.prototype;var n=new r,_=e.apply(n,t);return _ instanceof Object?_:n}function Wt(e,t,r,n,_){var s=t.length;s<2&&v("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var u=t[1]!==null&&r!==null,o=!1,a=1;a<t.length;++a)if(t[a]!==null&&t[a].destructorFunction===void 0){o=!0;break}for(var c=t[0].name!=="void",l="",T="",a=0;a<s-2;++a)l+=(a!==0?", ":"")+"arg"+a,T+=(a!==0?", ":"")+"arg"+a+"Wired";var h="return function "+He(e)+"("+l+`) {
if (arguments.length !== `+(s-2)+`) {
throwBindingError('function `+e+" called with ' + arguments.length + ' arguments, expected "+(s-2)+` args!');
}
`;o&&(h+=`var destructors = [];
`);var F=o?"destructors":"null",P=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],b=[v,n,_,Ie,t[0],t[1]];u&&(h+="var thisWired = classParam.toWireType("+F+`, this);
`);for(var a=0;a<s-2;++a)h+="var arg"+a+"Wired = argType"+a+".toWireType("+F+", arg"+a+"); // "+t[a+2].name+`
`,P.push("argType"+a),b.push(t[a+2]);if(u&&(T="thisWired"+(T.length>0?", ":"")+T),h+=(c?"var rv = ":"")+"invoker(fn"+(T.length>0?", ":"")+T+`);
`,o)h+=`runDestructors(destructors);
`;else for(var a=u?1:2;a<t.length;++a){var X=a===1?"thisWired":"arg"+(a-2)+"Wired";t[a].destructorFunction!==null&&(h+=X+"_dtor("+X+"); // "+t[a].name+`
`,P.push(X+"_dtor"),b.push(t[a].destructorFunction))}c&&(h+=`var ret = retType.fromWireType(rv);
return ret;
`),h+=`}
`,P.push(h);var z=kt(Function,P).apply(null,b);return z}function An(e,t,r,n,_,s,u,o){var a=lt(r,n);t=B(t),s=k(_,s),re([],[e],function(c){c=c[0];var l=c.name+"."+t;o&&c.registeredClass.pureVirtualFunctions.push(t);function T(){qe("Cannot call "+l+" due to unbound types",a)}var h=c.registeredClass.instancePrototype,F=h[t];return F===void 0||F.overloadTable===void 0&&F.className!==c.name&&F.argCount===r-2?(T.argCount=r-2,T.className=c.name,h[t]=T):(xt(h,t,l),h[t].overloadTable[r-2]=T),re([],a,function(P){var b=Wt(l,P,c,s,u);return h[t].overloadTable===void 0?(b.argCount=r-2,h[t]=b):h[t].overloadTable[r-2]=b,[]}),[]})}function Tn(e,t,r){e=B(e),re([],[t],function(n){return n=n[0],i[e]=n.fromWireType(r),[]})}var Rt=[],x=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function At(e){e>4&&--x[e].refcount===0&&(x[e]=void 0,Rt.push(e))}function dn(){for(var e=0,t=5;t<x.length;++t)x[t]!==void 0&&++e;return e}function On(){for(var e=5;e<x.length;++e)if(x[e]!==void 0)return x[e];return null}function pn(){i.count_emval_handles=dn,i.get_first_emval=On}function Z(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var t=Rt.length?Rt.pop():x.length;return x[t]={refcount:1,value:e},t}}}function vn(e,t){t=B(t),j(e,{name:t,fromWireType:function(r){var n=x[r].value;return At(r),n},toWireType:function(r,n){return Z(n)},argPackAdvance:8,readValueFromPointer:Me,destructorFunction:null})}function hn(e,t,r){switch(t){case 0:return function(n){var _=r?De:w;return this.fromWireType(_[n])};case 1:return function(n){var _=r?ie:ve;return this.fromWireType(_[n>>1])};case 2:return function(n){var _=r?L:W;return this.fromWireType(_[n>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Kn(e,t,r,n){var _=je(r);t=B(t);function s(){}s.values={},j(e,{name:t,constructor:s,fromWireType:function(u){return this.constructor.values[u]},toWireType:function(u,o){return o.value},argPackAdvance:8,readValueFromPointer:hn(t,_,n),destructorFunction:null}),ut(t,s)}function Ze(e,t){var r=oe[e];return r===void 0&&v(t+" has unknown type "+Ht(e)),r}function Mn(e,t,r){var n=Ze(e,"enum");t=B(t);var _=n.constructor,s=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:ke(n.name+"_"+t,function(){})}});_.values[r]=s,_[t]=s}function Ae(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function gn(e,t){switch(t){case 2:return function(r){return this.fromWireType(yt[r>>2])};case 3:return function(r){return this.fromWireType(Ct[r>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Fn(e,t,r){var n=je(r);t=B(t),j(e,{name:t,fromWireType:function(_){return _},toWireType:function(_,s){if(typeof s!="number"&&typeof s!="boolean")throw new TypeError('Cannot convert "'+Ae(s)+'" to '+this.name);return s},argPackAdvance:8,readValueFromPointer:gn(t,n),destructorFunction:null})}function yn(e,t,r,n,_,s){var u=lt(t,r);e=B(e),_=k(n,_),ut(e,function(){qe("Cannot call "+e+" due to unbound types",u)},t-1),re([],u,function(o){var a=[o[0],null].concat(o.slice(1));return It(e,Wt(e,a,null,_,s),t-1),[]})}function Cn(e,t,r){switch(t){case 0:return r?function(_){return De[_]}:function(_){return w[_]};case 1:return r?function(_){return ie[_>>1]}:function(_){return ve[_>>1]};case 2:return r?function(_){return L[_>>2]}:function(_){return W[_>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Bn(e,t,r,n,_){t=B(t),_===-1&&(_=4294967295);var s=je(r),u=function(c){return c};if(n===0){var o=32-8*r;u=function(c){return c<<o>>>o}}var a=t.indexOf("unsigned")!=-1;j(e,{name:t,fromWireType:u,toWireType:function(c,l){if(typeof l!="number"&&typeof l!="boolean")throw new TypeError('Cannot convert "'+Ae(l)+'" to '+this.name);if(l<n||l>_)throw new TypeError('Passing a number "'+Ae(l)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+n+", "+_+"]!");return a?l>>>0:l|0},argPackAdvance:8,readValueFromPointer:Cn(t,s,n!==0),destructorFunction:null})}function mn(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],_=n[t];function s(u){u=u>>2;var o=W,a=o[u],c=o[u+1];return new _(it,c,a)}r=B(r),j(e,{name:r,fromWireType:s,argPackAdvance:8,readValueFromPointer:s},{ignoreDuplicateRegistrations:!0})}function Un(e,t){t=B(t);var r=t==="std::string";j(e,{name:t,fromWireType:function(n){var _=W[n>>2],s;if(r)for(var u=n+4,o=0;o<=_;++o){var a=n+4+o;if(o==_||w[a]==0){var c=a-u,l=pe(u,c);s===void 0?s=l:(s+=String.fromCharCode(0),s+=l),u=a+1}}else{for(var T=new Array(_),o=0;o<_;++o)T[o]=String.fromCharCode(w[n+4+o]);s=T.join("")}return Y(n),s},toWireType:function(n,_){_ instanceof ArrayBuffer&&(_=new Uint8Array(_));var s,u=typeof _=="string";u||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray||_ instanceof Int8Array||v("Cannot pass non-string to std::string"),r&&u?s=function(){return cr(_)}:s=function(){return _.length};var o=s(),a=dt(4+o+1);if(W[a>>2]=o,r&&u)Ee(_,a+4,o+1);else if(u)for(var c=0;c<o;++c){var l=_.charCodeAt(c);l>255&&(Y(a),v("String has UTF-16 code units that do not fit in 8 bits")),w[a+4+c]=l}else for(var c=0;c<o;++c)w[a+4+c]=_[c];return n!==null&&n.push(Y,a),a},argPackAdvance:8,readValueFromPointer:Me,destructorFunction:function(n){Y(n)}})}function Pn(e,t,r){r=B(r);var n,_,s,u,o;t===2?(n=lr,_=Rr,u=Ar,s=function(){return ve},o=1):t===4&&(n=Tr,_=dr,u=Or,s=function(){return W},o=2),j(e,{name:r,fromWireType:function(a){for(var c=W[a>>2],l=s(),T,h=a+4,F=0;F<=c;++F){var P=a+4+F*t;if(F==c||l[P>>o]==0){var b=P-h,X=n(h,b);T===void 0?T=X:(T+=String.fromCharCode(0),T+=X),h=P+t}}return Y(a),T},toWireType:function(a,c){typeof c!="string"&&v("Cannot pass non-string to C++ string type "+r);var l=u(c),T=dt(4+l+t);return W[T>>2]=l>>o,_(c,T+4,l+t),a!==null&&a.push(Y,T),T},argPackAdvance:8,readValueFromPointer:Me,destructorFunction:function(a){Y(a)}})}function Vn(e,t,r,n,_,s){Xe[e]={name:B(t),rawConstructor:k(r,n),rawDestructor:k(_,s),fields:[]}}function Sn(e,t,r,n,_,s,u,o,a,c){Xe[e].fields.push({fieldName:B(t),getterReturnType:r,getter:k(n,_),getterContext:s,setterArgumentType:u,setter:k(o,a),setterContext:c})}function Gn(e,t){t=B(t),j(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(r,n){}})}function Be(e){return e||v("Cannot use deleted val. handle = "+e),x[e].value}function wn(e,t,r){e=Be(e),t=Ze(t,"emval::as");var n=[],_=Z(n);return L[r>>2]=_,t.toWireType(n,e)}var bn={};function Ye(e){var t=bn[e];return t===void 0?B(e):t}var Tt=[];function Nn(e,t,r,n){e=Tt[e],t=Be(t),r=Ye(r),e(t,r,null,n)}function jt(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function Ln(e){return e===0?Z(jt()):(e=Ye(e),Z(jt()[e]))}function En(e){var t=Tt.length;return Tt.push(e),t}function Dn(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=Ze(L[(t>>2)+n],"parameter "+n);return r}function xn(e,t){for(var r=Dn(e,t),n=r[0],_=n.name+"_$"+r.slice(1).map(function(F){return F.name}).join("_")+"$",s=["retType"],u=[n],o="",a=0;a<e-1;++a)o+=(a!==0?", ":"")+"arg"+a,s.push("argType"+a),u.push(r[1+a]);for(var c=He("methodCaller_"+_),l="return function "+c+`(handle, name, destructors, args) {
`,T=0,a=0;a<e-1;++a)l+="    var arg"+a+" = argType"+a+".readValueFromPointer(args"+(T?"+"+T:"")+`);
`,T+=r[a+1].argPackAdvance;l+="    var rv = handle[name]("+o+`);
`;for(var a=0;a<e-1;++a)r[a+1].deleteObject&&(l+="    argType"+a+".deleteObject(arg"+a+`);
`);n.isVoid||(l+=`    return retType.toWireType(destructors, rv);
`),l+=`};
`,s.push(l);var h=kt(Function,s).apply(null,u);return En(h)}function Xn(e){return e=Ye(e),Z(i[e])}function In(e,t){return e=Be(e),t=Be(t),Z(e[t])}function $n(e){e>4&&(x[e].refcount+=1)}function Hn(e){for(var t="",r=0;r<e;++r)t+=(r!==0?", ":"")+"arg"+r;for(var n="return function emval_allocator_"+e+`(constructor, argTypes, args) {
`,r=0;r<e;++r)n+="var argType"+r+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+r+'], "parameter '+r+`");
var arg`+r+" = argType"+r+`.readValueFromPointer(args);
args += argType`+r+`['argPackAdvance'];
`;return n+="var obj = new constructor("+t+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",n)(Ze,i,Z)}var zt={};function kn(e,t,r,n){e=Be(e);var _=zt[t];return _||(_=Hn(t),zt[t]=_),_(e,r,n)}function Wn(e){return Z(Ye(e))}function jn(e){var t=x[e].value;Ie(t),At(e)}function zn(){ce()}function qn(e,t,r){w.copyWithin(e,t,t+r)}function Zn(e){try{return ue.grow(e-it.byteLength+65535>>>16),Bt(ue.buffer),1}catch{}}function Yn(e){var t=w.length;e=e>>>0;var r=2147483648;if(e>r)return!1;for(var n=1;n<=4;n*=2){var _=t*(1+.2/n);_=Math.min(_,e+100663296);var s=Math.min(r,pr(Math.max(e,_),65536)),u=Zn(s);if(u)return!0}return!1}var Je={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var r=Je.buffers[e];t===0||t===10?((e===1?Se:ee)(G(r,0)),r.length=0):r.push(t)},varargs:void 0,get:function(){Je.varargs+=4;var e=L[Je.varargs-4>>2];return e},getStr:function(e){var t=pe(e);return t},get64:function(e,t){return e}};function Jn(e){return 0}function Qn(e,t,r,n,_){}function ei(e,t,r,n){for(var _=0,s=0;s<r;s++){for(var u=L[t+s*8>>2],o=L[t+(s*8+4)>>2],a=0;a<o;a++)Je.printChar(e,w[u+a]);_+=o}return L[n>>2]=_,0}function ti(e){we(e|0)}bt=i.InternalError=ot(Error,"InternalError"),Lr(),Re=i.BindingError=ot(Error,"BindingError"),Wr(),sn(),nn(),$t=i.UnboundTypeError=ot(Error,"UnboundTypeError"),pn();var ri={t:Nr,I:Er,x:ln,w:Rn,d:An,k:Tn,H:vn,n:Kn,a:Mn,A:Fn,i:yn,j:Bn,h:mn,B:Un,v:Pn,u:Vn,c:Sn,J:Gn,m:wn,s:Nn,b:At,y:Ln,p:xn,r:Xn,e:In,g:$n,q:kn,f:Wn,l:jn,o:zn,E:qn,F:Yn,G:Jn,C:Qn,z:ei,D:ti},Ti=Gr(),ni=i.___wasm_call_ctors=function(){return(ni=i.___wasm_call_ctors=i.asm.L).apply(null,arguments)},dt=i._malloc=function(){return(dt=i._malloc=i.asm.M).apply(null,arguments)},Y=i._free=function(){return(Y=i._free=i.asm.N).apply(null,arguments)},qt=i.___getTypeName=function(){return(qt=i.___getTypeName=i.asm.P).apply(null,arguments)},ii=i.___embind_register_native_and_builtin_types=function(){return(ii=i.___embind_register_native_and_builtin_types=i.asm.Q).apply(null,arguments)},_i=i.dynCall_jiji=function(){return(_i=i.dynCall_jiji=i.asm.R).apply(null,arguments)},Qe;function oi(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}Ke=function e(){Qe||Ot(),Qe||(Ke=e)};function Ot(e){if(e=e||V,_e>0||(Kr(),_e>0))return;function t(){Qe||(Qe=!0,i.calledRun=!0,!be&&(Mr(),gr(),y(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Fr()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),t()},1)):t()}if(i.run=Ot,i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return Ot(),R.ready}}();typeof exports=="object"&&typeof module=="object"?module.exports=tt:typeof define=="function"&&define.amd?define([],function(){return tt}):typeof exports=="object"&&(exports.BASIS=tt);var ar=tt;var sr=["positiveX","negativeX","positiveY","negativeY","positiveZ","negativeZ"],fr=163,ur=166,Ve;function fi(f,R){Qt.typeOf.object("transcoderModule",Ve);let i=f.ktx2Buffer,y=f.supportedTargetFormats,A;try{A=or(i)}catch{throw new Q("Invalid KTX2 file.")}if(A.layerCount!==0)throw new Q("KTX2 texture arrays are not supported.");if(A.pixelDepth!==0)throw new Q("KTX2 3D textures are unsupported.");let m=A.dataFormatDescriptor[0],p=new Array(A.levelCount);return A.vkFormat===0&&(m.colorModel===fr||m.colorModel===ur)?ci(i,A,y,Ve,R,p):(R.push(i.buffer),ui(A,p)),p}function ui(f,R){let i=f.vkFormat===Pe.VK_FORMAT_R8G8B8_SRGB?C.RGB:C.RGBA,y;f.vkFormat===Pe.VK_FORMAT_R8G8B8A8_UNORM?y=Te.UNSIGNED_BYTE:f.vkFormat===Pe.VK_FORMAT_R16G16B16A16_SFLOAT?y=Te.HALF_FLOAT:f.vkFormat===Pe.VK_FORMAT_R32G32B32A32_SFLOAT&&(y=Te.FLOAT);for(let A=0;A<f.levels.length;++A){let m={};R[A]=m;let p=f.levels[A].levelData,V=f.pixelWidth>>A,I=f.pixelHeight>>A,E=V*I*C.componentsLength(i);for(let M=0;M<f.faceCount;++M){let K=p.byteOffset+E*f.typeSize*M,g;!Ue(y)||Te.sizeInBytes(y)===1?g=new Uint8Array(p.buffer,K,E):Te.sizeInBytes(y)===2?g=new Uint16Array(p.buffer,K,E):g=new Float32Array(p.buffer,K,E),m[sr[M]]={internalFormat:i,datatype:y,width:V,height:I,levelBuffer:g}}}}function ci(f,R,i,y,A,m){let p=new y.KTX2File(f),V=p.getWidth(),I=p.getHeight(),E=p.getLevels(),M=p.getHasAlpha();if(!(V>0)||!(I>0)||!(E>0))throw p.close(),p.delete(),new Q("Invalid KTX2 file");let K,g,O=R.dataFormatDescriptor[0],d=y.transcoder_texture_format;if(O.colorModel===fr)if(i.etc)K=M?C.RGBA8_ETC2_EAC:C.RGB8_ETC2,g=M?d.cTFETC2_RGBA:d.cTFETC1_RGB;else if(i.etc1&&!M)K=C.RGB_ETC1,g=d.cTFETC1_RGB;else if(i.s3tc)K=M?C.RGBA_DXT5:C.RGB_DXT1,g=M?d.cTFBC3_RGBA:d.cTFBC1_RGB;else if(i.pvrtc)K=M?C.RGBA_PVRTC_4BPPV1:C.RGB_PVRTC_4BPPV1,g=M?d.cTFPVRTC1_4_RGBA:d.cTFPVRTC1_4_RGB;else if(i.astc)K=C.RGBA_ASTC,g=d.cTFASTC_4x4_RGBA;else if(i.bc7)K=C.RGBA_BC7,g=d.cTFBC7_RGBA;else throw new Q("No transcoding format target available for ETC1S compressed ktx2.");else if(O.colorModel===ur)if(i.astc)K=C.RGBA_ASTC,g=d.cTFASTC_4x4_RGBA;else if(i.bc7)K=C.RGBA_BC7,g=d.cTFBC7_RGBA;else if(i.s3tc)K=M?C.RGBA_DXT5:C.RGB_DXT1,g=M?d.cTFBC3_RGBA:d.cTFBC1_RGB;else if(i.etc)K=M?C.RGBA8_ETC2_EAC:C.RGB8_ETC2,g=M?d.cTFETC2_RGBA:d.cTFETC1_RGB;else if(i.etc1&&!M)K=C.RGB_ETC1,g=d.cTFETC1_RGB;else if(i.pvrtc)K=M?C.RGBA_PVRTC_4BPPV1:C.RGB_PVRTC_4BPPV1,g=M?d.cTFPVRTC1_4_RGBA:d.cTFPVRTC1_4_RGB;else throw new Q("No transcoding format target available for UASTC compressed ktx2.");if(!p.startTranscoding())throw p.close(),p.delete(),new Q("startTranscoding() failed");for(let $=0;$<R.levels.length;++$){let S={};m[$]=S,V=R.pixelWidth>>$,I=R.pixelHeight>>$;let U=p.getImageTranscodedSizeInBytes($,0,0,g.value),H=new Uint8Array(U),de=p.transcodeImage(H,$,0,0,g.value,0,-1,-1);if(!Ue(de))throw new Q("transcodeImage() failed.");A.push(H.buffer),S[sr[0]]={internalFormat:K,width:V,height:I,levelBuffer:H}}return p.close(),p.delete(),m}async function li(f,R){let i=f.webAssemblyConfig,y=er(ar,self.BASIS);return Ue(i.wasmBinaryFile)?Ve=await y(i):Ve=await y(),Ve.initializeBasis(),!0}function Ri(f,R){let i=f.webAssemblyConfig;return Ue(i)?li(f,R):fi(f,R)}var Pi=tr(Ri);export{Pi as default};
