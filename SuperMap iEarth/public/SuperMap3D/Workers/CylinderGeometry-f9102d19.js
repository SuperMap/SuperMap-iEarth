define(["exports","./arrayFill-c1a6b724","./buildModuleUrl-36ce0ebc","./Ellipsoid-ca2b8eb1","./Cartesian3-c1138337","./ComponentDatatype-3cfb1146","./CylinderGeometryLibrary-1060f202","./defaultValue-2110bb17","./Check-92c551fb","./GeometryAttribute-b12ab6bd","./GeometryAttributes-3cad3ff9","./GeometryOffsetAttribute-da5a1d35","./IndexDatatype-d833345d","./Math-cd1437d9","./PrimitiveType-d9ba7368","./VertexFormat-295b1d1f"],(function(t,e,o,n,a,r,i,s,u,f,p,d,m,b,c,l){"use strict";var y=new n.o,v=new a.o,h=new a.o,w=new a.o,A=new a.o;function g(t){var e=(t=s.u(t,s.u.EMPTY_OBJECT)).length,o=t.topRadius,n=t.bottomRadius,a=s.u(t.vertexFormat,l.n.DEFAULT),r=s.u(t.slices,128);if(!s.e(e))throw new u.t("options.length must be defined.");if(!s.e(o))throw new u.t("options.topRadius must be defined.");if(!s.e(n))throw new u.t("options.bottomRadius must be defined.");if(r<3)throw new u.t("options.slices must be greater than or equal to 3.");if(s.e(t.offsetAttribute)&&t.offsetAttribute===d.z.TOP)throw new u.t("GeometryOffsetAttribute.TOP is not a supported options.offsetAttribute for this geometry.");this._length=e,this._topRadius=o,this._bottomRadius=n,this._vertexFormat=l.n.clone(a),this._slices=r,this._offsetAttribute=t.offsetAttribute,this._workerName="createCylinderGeometry"}g.packedLength=l.n.packedLength+5,g.pack=function(t,e,o){if(!s.e(t))throw new u.t("value is required");if(!s.e(e))throw new u.t("array is required");return o=s.u(o,0),l.n.pack(t._vertexFormat,e,o),o+=l.n.packedLength,e[o++]=t._length,e[o++]=t._topRadius,e[o++]=t._bottomRadius,e[o++]=t._slices,e[o]=s.u(t._offsetAttribute,-1),e};var _,x=new l.n,R={vertexFormat:x,length:void 0,topRadius:void 0,bottomRadius:void 0,slices:void 0,offsetAttribute:void 0};g.unpack=function(t,e,o){if(!s.e(t))throw new u.t("array is required");e=s.u(e,0);var n=l.n.unpack(t,e,x);e+=l.n.packedLength;var a=t[e++],r=t[e++],i=t[e++],f=t[e++],p=t[e];return s.e(o)?(o._vertexFormat=l.n.clone(n,o._vertexFormat),o._length=a,o._topRadius=r,o._bottomRadius=i,o._slices=f,o._offsetAttribute=-1===p?void 0:p,o):(R.length=a,R.topRadius=r,R.bottomRadius=i,R.slices=f,R.offsetAttribute=-1===p?void 0:p,new g(R))},g.createGeometry=function(t){var u=t._length,l=t._topRadius,g=t._bottomRadius,_=t._vertexFormat,x=t._slices;if(!(u<=0||l<0||g<0||0===l&&0===g)){var R,F=x+x,D=x+F,O=F+F,T=i.I.computePositions(u,l,g,x,!0),C=_.st?new Float32Array(2*O):void 0,L=_.normal?new Float32Array(3*O):void 0,P=_.tangent?new Float32Array(3*O):void 0,z=_.bitangent?new Float32Array(3*O):void 0,k=_.normal||_.tangent||_.bitangent;if(k){var E=_.tangent||_.bitangent,G=0,I=0,M=0,N=Math.atan2(g-l,u),U=v;U.z=Math.sin(N);var q=Math.cos(N),S=w,B=h;for(R=0;R<x;R++){var Y=R/x*b.e.TWO_PI,V=q*Math.cos(Y),Z=q*Math.sin(Y);k&&(U.x=V,U.y=Z,E&&(S=a.o.normalize(a.o.cross(a.o.UNIT_Z,U,S),S)),_.normal&&(L[G++]=U.x,L[G++]=U.y,L[G++]=U.z,L[G++]=U.x,L[G++]=U.y,L[G++]=U.z),_.tangent&&(P[I++]=S.x,P[I++]=S.y,P[I++]=S.z,P[I++]=S.x,P[I++]=S.y,P[I++]=S.z),_.bitangent&&(B=a.o.normalize(a.o.cross(U,S,B),B),z[M++]=B.x,z[M++]=B.y,z[M++]=B.z,z[M++]=B.x,z[M++]=B.y,z[M++]=B.z))}for(R=0;R<x;R++)_.normal&&(L[G++]=0,L[G++]=0,L[G++]=-1),_.tangent&&(P[I++]=1,P[I++]=0,P[I++]=0),_.bitangent&&(z[M++]=0,z[M++]=-1,z[M++]=0);for(R=0;R<x;R++)_.normal&&(L[G++]=0,L[G++]=0,L[G++]=1),_.tangent&&(P[I++]=1,P[I++]=0,P[I++]=0),_.bitangent&&(z[M++]=0,z[M++]=1,z[M++]=0)}var J=12*x-12,W=m.IndexDatatype.createTypedArray(O,J),j=0,H=0;for(R=0;R<x-1;R++)W[j++]=H,W[j++]=H+2,W[j++]=H+3,W[j++]=H,W[j++]=H+3,W[j++]=H+1,H+=2;for(W[j++]=F-2,W[j++]=0,W[j++]=1,W[j++]=F-2,W[j++]=1,W[j++]=F-1,R=1;R<x-1;R++)W[j++]=F+R+1,W[j++]=F+R,W[j++]=F;for(R=1;R<x-1;R++)W[j++]=D,W[j++]=D+R,W[j++]=D+R+1;var K=0;if(_.st){var Q=Math.max(l,g);for(R=0;R<O;R++){var X=a.o.fromArray(T,3*R,A);C[K++]=(X.x+Q)/(2*Q),C[K++]=(X.y+Q)/(2*Q)}}var $=new p.a;_.position&&($.position=new f.o({componentDatatype:r.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:T})),_.normal&&($.normal=new f.o({componentDatatype:r.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:L})),_.tangent&&($.tangent=new f.o({componentDatatype:r.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:P})),_.bitangent&&($.bitangent=new f.o({componentDatatype:r.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:z})),_.st&&($.st=new f.o({componentDatatype:r.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:C})),y.x=.5*u,y.y=Math.max(g,l);var tt=new o.i(a.o.ZERO,n.o.magnitude(y));if(s.e(t._offsetAttribute)){u=T.length;var et=new Uint8Array(u/3),ot=t._offsetAttribute===d.z.NONE?0:1;e.d(et,ot),$.applyOffset=new f.o({componentDatatype:r.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:1,values:et})}return new f.I({attributes:$,indices:W,primitiveType:c._0xa706e5.TRIANGLES,boundingSphere:tt,offsetAttribute:t._offsetAttribute})}},g.getUnitCylinder=function(){return s.e(_)||(_=g.createGeometry(new g({topRadius:1,bottomRadius:1,length:1,vertexFormat:l.n.POSITION_ONLY}))),_},t.l=g}));
