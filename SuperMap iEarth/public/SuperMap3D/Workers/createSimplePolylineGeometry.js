define(["./when-92c6cf3c","./Cartesian2-b72655a5","./ArcType-31298545","./buildModuleUrl-9eef8841","./Cartesian3-3a8bdb0b","./Color-98063b35","./ComponentDatatype-98414d16","./Check-52a7d806","./GeometryAttribute-f47bd1cb","./GeometryAttributes-7f66ea53","./IndexDatatype-86677ec4","./Math-ecf82623","./PolylinePipeline-f0970409","./FeatureDetection-cec0163f","./Cartographic-a2c313d7","./Event-3390cd7d","./RuntimeError-c6a62a80","./WebGLConstants-42651efd","./Cartesian4-72b88c9e","./EllipsoidGeodesic-03c935a0","./EllipsoidRhumbLine-b1a766ae","./IntersectionTests-6e80d61c","./Plane-33393da8"],(function(e,t,r,o,a,n,i,l,s,c,p,u,y,f,h,d,g,m,T,v,_,b,w){"use strict";function B(e,t,r,o,a,i,l){var s,c=y.m.numberOfPoints(e,t,a),p=r.red,u=r.green,f=r.blue,h=r.alpha,d=o.red,g=o.green,m=o.blue,T=o.alpha;if(n.e.equals(r,o)){for(s=0;s<c;s++)i[l++]=n.e.floatToByte(p),i[l++]=n.e.floatToByte(u),i[l++]=n.e.floatToByte(f),i[l++]=n.e.floatToByte(h);return l}var v=(d-p)/c,_=(g-u)/c,b=(m-f)/c,w=(T-h)/c,B=l;for(s=0;s<c;s++)i[B++]=n.e.floatToByte(p+s*v),i[B++]=n.e.floatToByte(u+s*_),i[B++]=n.e.floatToByte(f+s*b),i[B++]=n.e.floatToByte(h+s*w);return B}function k(o){var i=(o=e.u(o,e.u.EMPTY_OBJECT)).positions,s=o.colors,c=e.u(o.colorsPerVertex,!1);if(!e.e(i)||i.length<2)throw new l.t("At least two positions are required.");if(e.e(s)&&(c&&s.length<i.length||!c&&s.length<i.length-1))throw new l.t("colors has an invalid length.");this._positions=i,this._colors=s,this._colorsPerVertex=c,this._arcType=e.u(o.arcType,r.L.GEODESIC),this._granularity=e.u(o.granularity,u.e.RADIANS_PER_DEGREE),this._ellipsoid=e.u(o.ellipsoid,t.t.WGS84),this._workerName="createSimplePolylineGeometry";var p=1+i.length*a.o.packedLength;p+=e.e(s)?1+s.length*n.e.packedLength:1,this.packedLength=p+t.t.packedLength+3}k.pack=function(r,o,i){if(!e.e(r))throw new l.t("value is required");if(!e.e(o))throw new l.t("array is required");i=e.u(i,0);var s,c=r._positions,p=c.length;for(o[i++]=p,s=0;s<p;++s,i+=a.o.packedLength)a.o.pack(c[s],o,i);var u=r._colors;for(p=e.e(u)?u.length:0,o[i++]=p,s=0;s<p;++s,i+=n.e.packedLength)n.e.pack(u[s],o,i);return t.t.pack(r._ellipsoid,o,i),i+=t.t.packedLength,o[i++]=r._colorsPerVertex?1:0,o[i++]=r._arcType,o[i]=r._granularity,o},k.unpack=function(r,o,i){if(!e.e(r))throw new l.t("array is required");o=e.u(o,0);var s,c=r[o++],p=new Array(c);for(s=0;s<c;++s,o+=a.o.packedLength)p[s]=a.o.unpack(r,o);var u=(c=r[o++])>0?new Array(c):void 0;for(s=0;s<c;++s,o+=n.e.packedLength)u[s]=n.e.unpack(r,o);var y=t.t.unpack(r,o);o+=t.t.packedLength;var f=1===r[o++],h=r[o++],d=r[o];return e.e(i)?(i._positions=p,i._colors=u,i._ellipsoid=y,i._colorsPerVertex=f,i._arcType=h,i._granularity=d,i):new k({positions:p,colors:u,ellipsoid:y,colorsPerVertex:f,arcType:h,granularity:d})};var E=new Array(2),L=new Array(2),A={positions:E,height:L,ellipsoid:void 0,minDistance:void 0,granularity:void 0};return k.createGeometry=function(t){var l,h,d,g,m,T=t._positions,v=t._colors,_=t._colorsPerVertex,b=t._arcType,w=t._granularity,k=t._ellipsoid,D=u.e.chordLength(w,k.maximumRadius),P=e.e(v)&&!_,C=T.length,G=0;if(b===r.L.GEODESIC||b===r.L.RHUMB){var x,I,R;b===r.L.GEODESIC?(x=u.e.chordLength(w,k.maximumRadius),I=y.m.numberOfPoints,R=y.m.generateArc):(x=w,I=y.m.numberOfPointsRhumbLine,R=y.m.generateRhumbArc);var S=y.m.extractHeights(T,k),O=A;if(b===r.L.GEODESIC?O.minDistance=D:O.granularity=w,O.ellipsoid=k,P){var U=0;for(l=0;l<C-1;l++)U+=I(T[l],T[l+1],x)+1;h=new Float64Array(3*U),g=new Uint8Array(4*U),O.positions=E,O.height=L;var V=0;for(l=0;l<C-1;++l){E[0]=T[l],E[1]=T[l+1],L[0]=S[l],L[1]=S[l+1];var q=R(O);if(e.e(v)){var N=q.length/3;m=v[l];for(var F=0;F<N;++F)g[V++]=n.e.floatToByte(m.red),g[V++]=n.e.floatToByte(m.green),g[V++]=n.e.floatToByte(m.blue),g[V++]=n.e.floatToByte(m.alpha)}h.set(q,G),G+=q.length}}else if(O.positions=T,O.height=S,h=new Float64Array(R(O)),e.e(v)){for(g=new Uint8Array(h.length/3*4),l=0;l<C-1;++l){G=B(T[l],T[l+1],v[l],v[l+1],D,g,G)}var M=v[C-1];g[G++]=n.e.floatToByte(M.red),g[G++]=n.e.floatToByte(M.green),g[G++]=n.e.floatToByte(M.blue),g[G++]=n.e.floatToByte(M.alpha)}}else{d=P?2*C-2:C,h=new Float64Array(3*d),g=e.e(v)?new Uint8Array(4*d):void 0;var H=0,W=0;for(l=0;l<C;++l){var Y=T[l];if(P&&l>0&&(a.o.pack(Y,h,H),H+=3,m=v[l-1],g[W++]=n.e.floatToByte(m.red),g[W++]=n.e.floatToByte(m.green),g[W++]=n.e.floatToByte(m.blue),g[W++]=n.e.floatToByte(m.alpha)),P&&l===C-1)break;a.o.pack(Y,h,H),H+=3,e.e(v)&&(m=v[l],g[W++]=n.e.floatToByte(m.red),g[W++]=n.e.floatToByte(m.green),g[W++]=n.e.floatToByte(m.blue),g[W++]=n.e.floatToByte(m.alpha))}}var z=new c.a;z.position=new s.o({componentDatatype:i.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:h}),e.e(v)&&(z.color=new s.o({componentDatatype:i.ComponentDatatype.UNSIGNED_BYTE,componentsPerAttribute:4,values:g,normalize:!0}));var J=2*((d=h.length/3)-1),j=p.IndexDatatype.createTypedArray(d,J),K=0;for(l=0;l<d-1;++l)j[K++]=l,j[K++]=l+1;return new s.I({attributes:z,indices:j,primitiveType:f._0x4b6a27.LINES,boundingSphere:o.i.fromPoints(T)})},function(r,o){return e.e(o)&&(r=k.unpack(r,o)),r._ellipsoid=t.t.clone(r._ellipsoid),k.createGeometry(r)}}));
