define(["exports","./Cartographic-81e9e8b2","./when-39df26e1","./Check-ff445961","./buildModuleUrl-1b968a9d","./Math-5e067eb3","./GeometryAttribute-9b3921a3","./Cartesian2-59a54ee7"],(function(t,n,a,r,e,o,s,i){"use strict";var h=Math.cos,g=Math.sin,u=Math.sqrt,l={computePosition:function(t,n,r,e,o,s,i){var l=n.radiiSquared,c=t.nwCorner,C=t.boundingRectangle,d=c.latitude-t.granYCos*e+o*t.granXSin,S=h(d),w=g(d),f=l.z*w,X=c.longitude+e*t.granYSin+o*t.granXCos,Y=S*h(X),O=S*g(X),v=l.x*Y,_=l.y*O,M=u(v*Y+_*O+f*w);if(s.x=v/M,s.y=_/M,s.z=f/M,r){var p=t.stNwCorner;a.e(p)?(d=p.latitude-t.stGranYCos*e+o*t.stGranXSin,X=p.longitude+e*t.stGranYSin+o*t.stGranXCos,i.x=(X-t.stWest)*t.lonScalar,i.y=(d-t.stSouth)*t.latScalar):(i.x=(X-C.west)*t.lonScalar,i.y=(d-C.south)*t.latScalar)}}},c=new s.f,C=new n.o,d=new n.a,S=new n.o,w=new e.n;function f(t,a,r,e,o,i,h){var g=Math.cos(a),u=e*g,l=r*g,d=Math.sin(a),f=e*d,X=r*d;C=w.project(t,C),C=n.o.subtract(C,S,C);var Y=s.f.fromRotation(a,c);C=s.f.multiplyByVector(Y,C,C),C=n.o.add(C,S,C),i-=1,h-=1;var O=(t=w.unproject(C,t)).latitude,v=O+i*X,_=O-u*h,M=O-u*h+i*X,p=Math.max(O,v,_,M),R=Math.min(O,v,_,M),W=t.longitude,b=W+i*l,m=W+h*f,G=W+h*f+i*l;return{north:p,south:R,east:Math.max(W,b,m,G),west:Math.min(W,b,m,G),granYCos:u,granYSin:f,granXCos:l,granXSin:X,nwCorner:t}}l.computeOptions=function(t,n,a,e,s,h,g){var u=t.east,l=t.west,c=t.north,C=t.south,X=!1,Y=!1;c===o.e.PI_OVER_TWO&&(X=!0),C===-o.e.PI_OVER_TWO&&(Y=!0);var O,v,_,M,p,R=c-C;_=(p=l>u?o.e.TWO_PI-l+u:u-l)/((O=Math.ceil(p/n)+1)-1),M=R/((v=Math.ceil(R/n)+1)-1);var W=i.h.northwest(t,h),b=i.h.center(t,d);(0!==a||0!==e)&&(b.longitude<W.longitude&&(b.longitude+=o.e.TWO_PI),S=w.project(b,S));var m=M,G=_,I=i.h.clone(t,s),P={granYCos:m,granYSin:0,granXCos:G,granXSin:0,nwCorner:W,boundingRectangle:I,width:O,height:v,northCap:X,southCap:Y};if(0!==a){var T=f(W,a,_,M,0,O,v);if(c=T.north,C=T.south,u=T.east,l=T.west,c<-o.e.PI_OVER_TWO||c>o.e.PI_OVER_TWO||C<-o.e.PI_OVER_TWO||C>o.e.PI_OVER_TWO)throw new r.t("Rotated rectangle is invalid.  It crosses over either the north or south pole.");P.granYCos=T.granYCos,P.granYSin=T.granYSin,P.granXCos=T.granXCos,P.granXSin=T.granXSin,I.north=c,I.south=C,I.east=u,I.west=l}if(0!==e){a-=e;var x=i.h.northwest(I,g),y=f(x,a,_,M,0,O,v);P.stGranYCos=y.granYCos,P.stGranXCos=y.granXCos,P.stGranYSin=y.granYSin,P.stGranXSin=y.granXSin,P.stNwCorner=x,P.stWest=y.west,P.stSouth=y.south}return P},t.j=l}));
