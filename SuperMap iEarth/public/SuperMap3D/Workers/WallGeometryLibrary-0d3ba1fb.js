define(["exports","./arrayRemoveDuplicates-3deab545","./Cartographic-81e9e8b2","./when-39df26e1","./Math-5e067eb3","./PolylinePipeline-0d72c6c0","./GeometryAttribute-9b3921a3","./FeatureDetection-2d4141ff"],(function(e,t,r,i,o,n,a,s){"use strict";var h={};function l(e,t){return o.e.equalsEpsilon(e.latitude,t.latitude,o.e.EPSILON10)&&o.e.equalsEpsilon(e.longitude,t.longitude,o.e.EPSILON10)}var g=new r.a,p=new r.a;var u=new Array(2),c=new Array(2),m={positions:void 0,height:void 0,granularity:void 0,ellipsoid:void 0};function v(e,t){for(var i=new Array(e.length),o=0;o<e.length;o+=3){var n=new r.o(e[o],e[o+1],e[o+2]);s.p.multiplyByPoint(t,n,n),i[o]=n.x,i[o+1]=n.y,i[o+2]=n.z}return i}h.computePositions=function(e,h,A,y,w,d,f){var P=function(e,o,n,a){var s=(o=t.D(o,r.o.equalsEpsilon)).length;if(!(s<2)){var h=i.e(a),u=i.e(n),c=!0,m=new Array(s),v=new Array(s),A=new Array(s),y=o[0];m[0]=y;var w=e.cartesianToCartographic(y,g);u&&(w.height=n[0]),c=c&&0==w.height,v[0]=w.height,A[0]=h?a[0]:0;for(var d=1,f=1;f<s;++f){var P=o[f],F=e.cartesianToCartographic(P,p);u&&(F.height=n[f]),c=c&&0==F.height,l(w,F)?w.height<F.height&&(v[d-1]=F.height):(m[d]=P,v[d]=F.height,A[d]=h?a[f]:0,r.a.clone(F,w),++d)}if(!(c||d<2))return m.length=d,v.length=d,A.length=d,{positions:m,topHeights:v,bottomHeights:A}}}(e,h,A,y);if(i.e(P)){var F=a.m.eastNorthUpToFixedFrame(P.positions[0],e,new s.p),b=s.p.inverse(F,new s.p);h=P.positions,A=P.topHeights,y=P.bottomHeights;var C,D,E,x,H=h.length,q=H-2,L=o.e.chordLength(w,e.maximumRadius),N=m;if(N.minDistance=L,N.ellipsoid=e,d){var O,T=0;for(O=0;O<H-1;O++)T+=n.m.numberOfPoints(h[O],h[O+1],L)+1;C=new Float64Array(3*T),D=new Float64Array(3*T),i.e(f)&&(E=new Float64Array(3*T),x=new Float64Array(3*T));var I=u,R=c;N.positions=I,N.height=R;var S=0;for(O=0;O<H-1;O++){I[0]=h[O],I[1]=h[O+1],R[0]=A[O],R[1]=A[O+1];var z=n.m.generateArc(N);C.set(z,S),i.e(f)&&E.set(v(z,b),S),R[0]=y[O],R[1]=y[O+1],D.set(n.m.generateArc(N),S),i.e(f)&&x.set(v(n.m.generateArc(N),b),S),S+=z.length}}else N.positions=h,N.height=A,C=new Float64Array(n.m.generateArc(N)),i.e(f)&&(E=new Float64Array(v(n.m.generateArc(N)))),N.height=y,D=new Float64Array(n.m.generateArc(N)),i.e(f)&&(x=new Float64Array(v(n.m.generateArc(N))));var B={pos:{bottomPositions:D,topPositions:C,numCorners:q}};return i.e(f)&&(B.localPos={bottomPositions:x,topPositions:E,numCorners:q}),B}},e.D=h}));
