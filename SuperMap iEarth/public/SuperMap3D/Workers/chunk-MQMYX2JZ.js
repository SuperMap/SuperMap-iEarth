import{a as g}from"./chunk-7TOCOFC3.js";import{a as v}from"./chunk-LBR6REQR.js";import{a as f}from"./chunk-GXFCHGTA.js";import{a as c}from"./chunk-EDZQSM3T.js";import{a as h}from"./chunk-PJGSCWXZ.js";import{a as b}from"./chunk-NUC3LT2W.js";var F=1/256,M=256,t={};t.octEncodeInRange=function(o,a,n){c.defined("vector",o),c.defined("result",n);var e=v.magnitudeSquared(o);if(Math.abs(e-1)>f.EPSILON6)throw new h("vector must be normalized.");if(n.x=o.x/(Math.abs(o.x)+Math.abs(o.y)+Math.abs(o.z)),n.y=o.y/(Math.abs(o.x)+Math.abs(o.y)+Math.abs(o.z)),o.z<0){var r=n.x,d=n.y;n.x=(1-Math.abs(d))*f.signNotZero(r),n.y=(1-Math.abs(r))*f.signNotZero(d)}return n.x=f.toSNorm(n.x,a),n.y=f.toSNorm(n.y,a),n};t.octEncode=function(o,a){return t.octEncodeInRange(o,255,a)};var y=new g,w=new Uint8Array(1);function x(o){return w[0]=o,w[0]}t.octEncodeToCartesian4=function(o,a){return t.octEncodeInRange(o,65535,y),a.x=x(y.x*F),a.y=x(y.x),a.z=x(y.y*F),a.w=x(y.y),a};t.octDecodeInRange=function(o,a,n,e){if(c.defined("result",e),o<0||o>n||a<0||a>n)throw new h("x and y must be unsigned normalized integers between 0 and "+n);if(e.x=f.fromSNorm(o,n),e.y=f.fromSNorm(a,n),e.z=1-(Math.abs(e.x)+Math.abs(e.y)),e.z<0){var r=e.x;e.x=(1-Math.abs(e.y))*f.signNotZero(r),e.y=(1-Math.abs(r))*f.signNotZero(e.y)}return v.normalize(e,e)};t.octDecode=function(o,a,n){return t.octDecodeInRange(o,a,255,n)};t.octDecodeFromCartesian4=function(o,a){c.typeOf.object("encoded",o),c.typeOf.object("result",a);var n=o.x,e=o.y,r=o.z,d=o.w;if(n<0||n>255||e<0||e>255||r<0||r>255||d<0||d>255)throw new h("x, y, z, and w must be unsigned normalized integers between 0 and 255");var m=n*M+e,i=r*M+d;return t.octDecodeInRange(m,i,65535,a)};t.octPackFloat=function(o){return c.defined("encoded",o),256*o.x+o.y};var z=new g;t.octEncodeFloat=function(o){return t.octEncode(o,z),t.octPackFloat(z)};t.octDecodeFloat=function(o,a){c.defined("value",o);var n=o/256,e=Math.floor(n),r=(n-e)*256;return t.octDecode(e,r,a)};t.octPack=function(o,a,n,e){c.defined("v1",o),c.defined("v2",a),c.defined("v3",n),c.defined("result",e);var r=t.octEncodeFloat(o),d=t.octEncodeFloat(a),m=t.octEncode(n,z);return e.x=65536*m.x+r,e.y=65536*m.y+d,e};t.octUnpack=function(o,a,n,e){c.defined("packed",o),c.defined("v1",a),c.defined("v2",n),c.defined("v3",e);var r=o.x/65536,d=Math.floor(r),m=(r-d)*65536;r=o.y/65536;var i=Math.floor(r),D=(r-i)*65536;t.octDecodeFloat(m,a),t.octDecodeFloat(D,n),t.octDecode(d,i,e)};t.compressTextureCoordinates=function(o){c.defined("textureCoordinates",o);var a=o.x*4095|0,n=o.y*4095|0;return 4096*a+n};t.decompressTextureCoordinates=function(o,a){c.defined("compressed",o),c.defined("result",a);var n=o/4096,e=Math.floor(n);return a.x=e/4095,a.y=(o-e*4096)/4095,a};function p(o){return o>>1^-(o&1)}t.zigZagDeltaDecode=function(o,a,n){c.defined("uBuffer",o),c.defined("vBuffer",a),c.typeOf.number.equals("uBuffer.length","vBuffer.length",o.length,a.length),b(n)&&c.typeOf.number.equals("uBuffer.length","heightBuffer.length",o.length,n.length);for(var e=o.length,r=0,d=0,m=0,i=0;i<e;++i)r+=p(o[i]),d+=p(a[i]),o[i]=r,a[i]=d,b(n)&&(m+=p(n[i]),n[i]=m)};t.octShortToFloat=function(o){return f.clamp(o*3051850947599719e-20,-1,1)};t.octShortDecode=function(o,a,n){if(c.defined("result",n),n.x=t.octShortToFloat(o),n.y=t.octShortToFloat(a),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0){var e=n.x;n.x=(1-Math.abs(n.y))*f.signNotZero(e),n.y=(1-Math.abs(e))*f.signNotZero(n.y)}return v.normalize(n,n)};var Z=t;export{Z as a};
