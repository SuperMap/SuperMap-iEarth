define(["require","./arrayFill-0358accf","./Check-52a7d806","./when-92c6cf3c","./FeatureDetection-cec0163f","./buildModuleUrl-9eef8841","./Cartesian2-b72655a5","./Cartesian3-3a8bdb0b","./Cartesian4-72b88c9e","./Cartographic-a2c313d7","./Color-98063b35","./ComponentDatatype-98414d16","./CompressedTextureBuffer-d0bacc6b","./S3MEdgeProcessor-d09e57c2","./getStringFromTypedArray-1e6dda18","./PixelFormat-ab56b0d6","./RuntimeError-c6a62a80","./S3MPixelFormat-339a4168","./IndexDatatype-86677ec4","./BoundingRectangle-82c0e2a7","./pako_inflate-f73548c4","./createTaskProcessorWorker","./unzip-e2c14141","./Math-ecf82623","./WebGLConstants-42651efd","./Event-3390cd7d"],(function(t,e,r,a,n,A,o,B,E,i,C,s,y,l,u,P,c,f,p,d,L,T,D,g,F,I){"use strict";function M(t,e,A){if(r.o.defined("array",t),a.e(e)&&r.o.typeOf.number("begin",e),a.e(A)&&r.o.typeOf.number("end",A),"function"==typeof t.slice)return t.slice(e,A);for(var o=Array.prototype.slice.call(t,e,A),B=n.s.typedArrayTypes,E=B.length,i=0;i<E;++i)if(t instanceof B[i]){o=new B[i](o);break}return o}var m,v=(m=!0,function(t,e){var r=m?function(){if(e){var r=e.apply(t,arguments);return e=null,r}}:function(){};return m=!1,r}),_=v(void 0,(function(){return _.toString().search("(((.+)+)+)+$").toString().constructor(_).search("(((.+)+)+)+$")}));_();var S,O,N=Object.freeze({S3M:49,S3M4:1}),h=(S=!0,function(t,e){var r=S?function(){if(e){var r=e.apply(t,arguments);return e=null,r}}:function(){};return S=!1,r}),R=h(void 0,(function(){return R.toString().search("(((.+)+)+)+$").toString().constructor(R).search("(((.+)+)+)+$")}));function b(){}function G(t,e,r){var n,A=t.num_points(),o=r.num_components(),B=new O.AttributeQuantizationTransform;if(B.InitFromAttribute(r)){for(var E=new Array(o),i=0;i<o;++i)E[i]=B.min_value(i);n={quantizationBits:B.quantization_bits(),minValues:E,range:B.range(),octEncoded:!1}}O.destroy(B),(B=new O.AttributeOctahedronTransform).InitFromAttribute(r)&&(n={quantizationBits:B.quantization_bits(),octEncoded:!0}),O.destroy(B);var C,y=A*o;C=a.e(n)?function(t,e,r,a,n){var A,o;a.quantizationBits<=8?(o=new O.DracoUInt8Array,A=new Uint8Array(n),e.GetAttributeUInt8ForAllPoints(t,r,o)):(o=new O.DracoUInt16Array,A=new Uint16Array(n),e.GetAttributeUInt16ForAllPoints(t,r,o));for(var B=0;B<n;++B)A[B]=o.GetValue(B);return O.destroy(o),A}(t,e,r,n,y):function(t,e,r,a){var n,A;switch(r.data_type()){case 1:case 11:A=new O.DracoInt8Array,n=new Int8Array(a),e.GetAttributeInt8ForAllPoints(t,r,A);break;case 2:A=new O.DracoUInt8Array,n=new Uint8Array(a),e.GetAttributeUInt8ForAllPoints(t,r,A);break;case 3:A=new O.DracoInt16Array,n=new Int16Array(a),e.GetAttributeInt16ForAllPoints(t,r,A);break;case 4:A=new O.DracoUInt16Array,n=new Uint16Array(a),e.GetAttributeUInt16ForAllPoints(t,r,A);break;case 5:case 7:A=new O.DracoInt32Array,n=new Int32Array(a),e.GetAttributeInt32ForAllPoints(t,r,A);break;case 6:case 8:A=new O.DracoUInt32Array,n=new Uint32Array(a),e.GetAttributeUInt32ForAllPoints(t,r,A);break;case 9:case 10:A=new O.DracoFloat32Array,n=new Float32Array(a),e.GetAttributeFloatForAllPoints(t,r,A)}for(var o=0;o<a;++o)n[o]=A.GetValue(o);return O.destroy(A),n}(t,e,r,y);var l=s.ComponentDatatype.fromTypedArray(C);if(s.ComponentDatatype.getSizeInBytes(l)*o%4!=0){var u=function(t,e,r){var a=e,n=s.ComponentDatatype.getSizeInBytes(r),A=n*e,o=4*Math.ceil(A/4)-A;a=e+o/n;var B,E=t.length/e,i=E*a;t instanceof Uint16Array?B=new Uint16Array(i):t instanceof Int16Array?B=new Int16Array(i):t instanceof Uint8Array?B=new Uint8Array(i):console.log("convertArrayToMutiple4Array dont support array type.");var C,y=0;for(y=0;y<E;y++)for(C=0;C<a;C++)B[y*a+C]=C<e?t[y*e+C]:0;return{numComponents:a,vertexArray:B}}(C,o,l);C=u.vertexArray,o=u.numComponents}return{array:C,data:{componentsPerAttribute:o,componentDatatype:l,byteOffset:r.byte_offset(),byteStride:s.ComponentDatatype.getSizeInBytes(l)*o,normalized:r.normalized(),quantization:n}}}R();var U=new B.o(40680631590769,40680631590769,40408299984661.445),x=new B.o,K=new B.o;function H(t,e,r,n){var A=Math.cos(e);x.x=A*Math.cos(t),x.y=A*Math.sin(t),x.z=Math.sin(e),x=B.o.normalize(x,x),B.o.multiplyComponents(U,x,K);var o=Math.sqrt(B.o.dot(x,K));return K=B.o.divideByScalar(K,o,K),x=B.o.multiplyByScalar(x,r,x),a.e(n)||(n=new B.o),B.o.add(K,x,n)}var w=new n.p,V=new n.p,Y=new B.o,J=new i.a;function k(t,e,r,A,C,y,u,P){var c=void 0,f=void 0,p=void 0,d=void 0,L=r.vertexAttributes,T=r.attrLocation;if(r.nCompressOptions=0,a.e(A.posUniqueID)&&A.posUniqueID>=0){a.e(P)||(r.nCompressOptions|=l.VertexCompressOption.SVC_Vertex);var D=e.GetAttribute(t,A.posUniqueID),g=G(t,e,D),F=g.data.componentsPerAttribute;r.verticesCount=g.array.length/F,r.vertCompressConstant=g.data.quantization.range/(1<<g.data.quantization.quantizationBits);var I=g.data.quantization.minValues;r.minVerticesValue=new E.e(I[0],I[1],I[2],1),F>3&&(r.minVerticesValue.w=I[3]);var M=r.verticesCount;if(y&&(c=new i.a,f=new i.a,p=new Float32Array(2*M),d=new Float64Array(2*M)),a.e(P)){var m=g.array,v=3===F?B.o.unpackArray(m):E.e.unpackArray(m);for(let t=0,e=v.length;t<e;t++){let e=v[t];B.o.multiplyByScalar(e,r.vertCompressConstant,e),B.o.add(e,r.minVerticesValue,e)}var _=n.p.multiply(P.sphereMatrix,P.geoMatrix,w),S=n.p.multiply(P.ellipsoidMatrix,P.geoMatrix,V);n.p.inverse(S,S);var O=new o.t(6378137,6378137,6378137);for(let t=0,e=v.length;t<e;t++){let e=v[t];n.p.multiplyByPoint(_,e,Y);let r=O.cartesianToCartographic(Y,J);y&&(d[2*t]=r.longitude,d[2*t+1]=r.latitude,0===t?(c.longitude=r.longitude,c.latitude=r.latitude,f.longitude=r.longitude,f.latitude=r.latitude):(c.longitude=Math.max(r.longitude,c.longitude),c.latitude=Math.max(r.latitude,c.latitude),f.longitude=Math.min(r.longitude,f.longitude),f.latitude=Math.min(r.latitude,f.latitude)));let a=H(r.longitude,r.latitude,r.height,Y);n.p.multiplyByPoint(S,a,e)}var N=new Array(3*v.length);3===F?B.o.packArray(v,N):E.e.packArray(v,N),g.array=new Float32Array(N),g.data.componentDatatype=s.ComponentDatatype.FLOAT,g.data.byteStride=4*F}if(T.aPosition=L.length,L.push({index:T.aPosition,typedArray:g.array,componentsPerAttribute:F,componentDatatype:g.data.componentDatatype,offsetInBytes:g.data.byteOffset,strideInBytes:g.data.byteStride,normalize:g.data.normalized}),!a.e(P)&&y)for(var h=new B.o,R=new B.o,b=new i.a,U=0;U<M;U++)n.p.multiplyByPoint(C,B.o.fromElements(g.array[3*U]*r.vertCompressConstant+I[0],g.array[3*U+1]*r.vertCompressConstant+I[1],g.array[3*U+2]*r.vertCompressConstant+I[2],h),R),b=i.a.fromCartesian(R),d[2*U]=b.longitude,d[2*U+1]=b.latitude,0===U?(c.longitude=b.longitude,c.latitude=b.latitude,f.longitude=b.longitude,f.latitude=b.latitude):(c.longitude=Math.max(b.longitude,c.longitude),c.latitude=Math.max(b.latitude,c.latitude),f.longitude=Math.min(b.longitude,f.longitude),f.latitude=Math.min(b.latitude,f.latitude));if(y){for(U=0;U<M;U++)p[2*U]=d[2*U]-f.longitude,p[2*U+1]=d[2*U+1]-f.latitude;T.img=L.length,L.push({index:T.img,typedArray:p,componentsPerAttribute:2,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),u.max=c,u.min=f}}if(a.e(A.normalUniqueID)&&A.normalUniqueID>=0){r.nCompressOptions|=l.VertexCompressOption.SVC_Normal;var x=e.GetAttribute(t,A.normalUniqueID),K=G(t,e,x),k=K.data.quantization;r.normalRangeConstant=(1<<k.quantizationBits)-1,T.aNormal=L.length,L.push({index:T.aNormal,typedArray:K.array,componentsPerAttribute:K.data.componentsPerAttribute,componentDatatype:K.data.componentDatatype,offsetInBytes:K.data.byteOffset,strideInBytes:K.data.byteStride,normalize:K.data.normalized})}if(a.e(A.colorUniqueID)&&A.colorUniqueID>=0){r.nCompressOptions|=l.VertexCompressOption.SVC_VertexColor;var W=e.GetAttribute(t,A.colorUniqueID),Z=G(t,e,W);T.aColor=L.length,L.push({index:T.aColor,typedArray:Z.array,componentsPerAttribute:Z.data.componentsPerAttribute,componentDatatype:Z.data.componentDatatype,offsetInBytes:Z.data.byteOffset,strideInBytes:Z.data.byteStride,normalize:Z.data.normalized})}for(U=0;U<A.texCoordUniqueIDs.length;U++){r.texCoordCompressConstant=[],r.minTexCoordValue=[];var X=A.texCoordUniqueIDs[U];if(!(X<0)){var z=e.GetAttribute(t,X),Q=G(t,e,z);if(a.e(Q.data.quantization)){r.nCompressOptions|=l.VertexCompressOption.SVC_TexutreCoord,r.texCoordCompressConstant.push(Q.data.quantization.range/(1<<Q.data.quantization.quantizationBits));I=Q.data.quantization.minValues;r.minTexCoordValue.push(new o.o(I[0],I[1]))}var j="aTexCoord"+U;T[j]=L.length,L.push({index:T[j],typedArray:Q.array,componentsPerAttribute:Q.data.componentsPerAttribute,componentDatatype:Q.data.componentDatatype,offsetInBytes:Q.data.byteOffset,strideInBytes:Q.data.byteStride,normalize:Q.data.normalized}),r.textureCoordIsW=!0}}for(U=0;U<A.vertexAttrUniqueIDs.length;U++){var q=A.vertexAttrUniqueIDs[U];if(!(q<0)){var $=e.GetAttribute(t,q),tt=G(t,e,$);T.aVertexWeight=L.length,L.push({index:T.aVertexWeight,typedArray:tt.array,componentsPerAttribute:tt.data.componentsPerAttribute,componentDatatype:tt.data.componentDatatype,offsetInBytes:tt.data.byteOffset,strideInBytes:tt.data.byteStride,normalize:tt.data.normalized}),r.customVertexAttribute={VertexWeight:0}}}}b.dracoDecodePointCloud=function(t,e,r,a,n){for(var A=new(O=t).Decoder,o=["POSITION","NORMAL","COLOR"],B=0;B<o.length;++B)A.SkipAttributeTransform(O[o[B]]);var E=new O.DecoderBuffer;if(E.Init(e,r),A.GetEncodedGeometryType(E)!==O.POINT_CLOUD)throw new c.t("Draco geometry type must be POINT_CLOUD.");var i=new O.PointCloud,C=A.DecodeBufferToPointCloud(E,i);if(!C.ok()||0===i.ptr)throw new c.t("Error decoding draco point cloud: "+C.error_msg());O.destroy(E),k(i,A,a,n),O.destroy(i),O.destroy(A)},b.dracoDecodeMesh=function(t,e,r,a,A,o,B,E,i,C){for(var s=new(O=t).Decoder,y=["POSITION","NORMAL","COLOR","TEX_COORD"],l=0;l<y.length;++l)s.SkipAttributeTransform(O[y[l]]);var u=new O.DecoderBuffer;if(u.Init(e,r),s.GetEncodedGeometryType(u)!==O.TRIANGULAR_MESH)throw new c.t("Unsupported draco mesh geometry type.");var P=new O.Mesh;if(!s.DecodeBufferToMesh(u,P).ok()||0===P.ptr)return!1;O.destroy(u),k(P,s,a,o,B,E,i,C);var f=function(t,e){for(var r=t.num_points(),a=t.num_faces(),n=new O.DracoInt32Array,A=3*a,o=p.IndexDatatype.createTypedArray(r,A),B=0,E=0;E<a;++E)e.GetFaceFromMesh(t,E,n),o[B+0]=n.GetValue(0),o[B+1]=n.GetValue(1),o[B+2]=n.GetValue(2),B+=3;var i=p.IndexDatatype.UNSIGNED_SHORT;return o instanceof Uint32Array&&(i=p.IndexDatatype.UNSIGNED_INT),O.destroy(n),{typedArray:o,numberOfIndices:A,indexDataType:i}}(P,s);A.indicesTypedArray=f.typedArray,A.indicesCount=f.numberOfIndices,A.indexType=f.indexDataType,A.primitiveType=n._0x4b6a27.TRIANGLES,O.destroy(P),O.destroy(s)};var W,Z=(W=!0,function(t,e){var r=W?function(){if(e){var r=e.apply(t,arguments);return e=null,r}}:function(){};return W=!1,r}),X=Z(void 0,(function(){return X.toString().search("(((.+)+)+)+$").toString().constructor(X).search("(((.+)+)+)+$")}));X();var z,Q=Object.freeze({OSGBFile:0,OSGBCacheFile:1,ClampGroundPolygon:2,ClampObjectPolygon:3,ClampGroundLine:4,ClampObjectLine:5,IconPoint:6,Text:7,PointCloudFile:8,ExtendRegion3D:9,ExtendClampPolygonCache:10,PolylineEffect:11,RegionEffect:12,ClampGroundAndObjectLineCache:13,ClampGroundRealtimeRasterCache:14}),j=(z=!0,function(t,e){var r=z?function(){if(e){var r=e.apply(t,arguments);return e=null,r}}:function(){};return z=!1,r}),q=j(void 0,(function(){return q.toString().search("(((.+)+)+)+$").toString().constructor(q).search("(((.+)+)+)+$")}));function $(){}function tt(t){var e=new A.i,r=t.instanceBounds;if(!a.e(r))return e;var n=new B.o(r[0],r[1],r[2]),o=new B.o(r[3],r[4],r[5]),E=B.o.lerp(n,o,.5,new B.o),i=B.o.distance(E,n);return e.center=E,e.radius=i,e}function et(t){var e,r,n=new A.i,o=new B.o,E=t.vertexAttributes[0],i=E.componentsPerAttribute,C=a.e(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,s=1;C?(s=t.vertCompressConstant,e=new B.o(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),r=new Uint16Array(E.typedArray.buffer,E.typedArray.byteOffset,E.typedArray.byteLength/2)):r=new Float32Array(E.typedArray.buffer,E.typedArray.byteOffset,E.typedArray.byteLength/4);for(var y=[],u=0;u<t.verticesCount;u++)B.o.fromArray(r,i*u,o),C&&(o=B.o.multiplyByScalar(o,s,o),o=B.o.add(o,e,o)),y.push(B.o.clone(o));return A.i.fromPoints(y,n),y.length=0,n}function rt(t){var e,r,n=new A.i,o=new B.o,E=a.e(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,i=t.vertexAttributes[0],C=i.componentsPerAttribute,s=1;E?(s=t.vertCompressConstant,r=new B.o(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),e=new Uint16Array(i.typedArray.buffer,i.typedArray.byteOffset,i.typedArray.byteLength/2)):e=new Float32Array(i.typedArray.buffer,i.typedArray.byteOffset,i.typedArray.byteLength/4);for(var y=[],u=0;u<t.verticesCount;u++)B.o.fromArray(e,C*u,o),E&&(o=B.o.multiplyByScalar(o,s,o),o=B.o.add(o,r,o)),y.push(B.o.clone(o));return A.i.fromPoints(y,n),y.length=0,n}function at(t){var e,r,n=a.e(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,o=new A.i,i=new B.o,C=new B.o,s=t.vertexAttributes[0],y=s.componentsPerAttribute,u=t.attrLocation.aPosition,P=t.vertexAttributes[u],c=t.attrLocation.aTexCoord5,f=t.vertexAttributes[c],p=f.componentsPerAttribute;n?(y=3,p=3,e=At(t,P),r=function(t,e,r){for(var a,n,A,o=e.componentsPerAttribute,B=t.texCoordCompressConstant[r],i=new E.e(t.minTexCoordValue[r].x,t.minTexCoordValue[r].y,t.minTexCoordValue[r].z,t.minTexCoordValue[r].w),C=new Uint16Array(e.typedArray.buffer,e.typedArray.byteOffset,e.typedArray.byteLength/2),s=new Float32Array(3*t.verticesCount),y=0;y<t.verticesCount;y++)a=C[o*y]*B+i.x,n=C[o*y+1]*B+i.y,A=C[o*y+2]*B+i.z,s[3*y]=a,s[3*y+1]=n,s[3*y+2]=A;return s}(t,f,5)):(e=new Float32Array(s.typedArray.buffer,s.typedArray.byteOffset,s.typedArray.byteLength/4),r=new Float32Array(f.typedArray.buffer,f.typedArray.byteOffset,f.typedArray.byteLength/4));for(var d=[],L=0;L<t.verticesCount;L++)B.o.fromArray(e,y*L,i),B.o.fromArray(r,p*L,C),B.o.add(i,C,i),d.push(B.o.clone(i));return A.i.fromPoints(d,o),d.length=0,o}function nt(t){var e=n._0x4b6a27.TRIANGLES;switch(t){case 1:e=n._0x4b6a27.POINTS;break;case 2:e=n._0x4b6a27.LINES;break;case 3:e=n._0x4b6a27.LINE_STRIP;break;case 4:e=n._0x4b6a27.TRIANGLES}return e}function At(t,e){for(var r,a,n,A=e.componentsPerAttribute,o=t.vertCompressConstant,E=new B.o(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),i=new Uint16Array(e.typedArray.buffer,e.typedArray.byteOffset,e.typedArray.byteLength/2),C=new Float32Array(3*t.verticesCount),s=0;s<t.verticesCount;s++)r=i[A*s]*o+E.x,a=i[A*s+1]*o+E.y,n=i[A*s+2]*o+E.z,C[3*s]=r,C[3*s+1]=a,C[3*s+2]=n;return C}q(),$.calcBoundingSphereInWorker=function(t,e){return e.instanceIndex>-1?tt(e):a.e(e.clampRegionEdge)?at(e):t>=Q.ClampGroundPolygon&&t<=Q.ClampObjectLine?rt(e):t==Q.ClampGroundAndObjectLineCache?at(e):et(e)},$.calcBoundingSphere=function(t,e,r){var n,o=t._fileType;return n=e.instanceIndex>-1?tt(e):a.e(e.clampRegionEdge)?at(e):o>=Q.ClampGroundPolygon&&o<=Q.ClampObjectLine?rt(e):o==Q.ClampGroundAndObjectLineCache?at(e):et(e),A.i.transform(n,r,n),n},$.calcBoundingRectangle=function(t,e){var r;return t._fileType===Q.ClampGroundPolygon&&(r=function(t){var e,r,n=a.e(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,A=new d.f,E=t.vertexAttributes[0],i=E.componentsPerAttribute,C=1;n?(C=t.vertCompressConstant,r=new B.o(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),e=new Uint16Array(E.typedArray.buffer,E.typedArray.byteOffset,E.typedArray.byteLength/2)):e=new Float32Array(E.typedArray.buffer,E.typedArray.byteOffset,E.typedArray.byteLength/4);for(var s=[],y=0;y<t.verticesCount;y++){var u=e[i*y],P=e[i*y+1];n&&(u=C*u+r.x,P=C*P+r.y),s.push(new o.o(u,P))}return d.f.fromPoints(s,A),s.length=0,A}(e)),r},$.createEdge=function(t,e){if(!(e.length<1)){var r=function(t){for(var e=[],r=t.length,a=0;a<r;a++){var A=nt(t[a].primitiveType);(A===n._0x4b6a27.LINES||A===n._0x4b6a27.LINE_STRIP)&&e.push(t[a])}return e}(e);if(0!=r.length){var A,o=function(t){for(var e=0,r=t.length,a=0;a<r;a++){var A=t[a],o=nt(A.primitiveType);o==n._0x4b6a27.LINES?e+=A.indicesCount/2:o==n._0x4b6a27.LINE_STRIP&&e++}return e}(r),E=t.attrLocation.aPosition,i=t.vertexAttributes[E],C=a.e(t.nCompressOptions)&&(t.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,y=i.componentsPerAttribute;C?(y=3,A=At(t,i)):A=new Float32Array(i.typedArray.buffer,i.typedArray.byteOffset,i.typedArray.byteLength/4);for(var u=function(t){for(var e=0,r=t.length,a=0;a<r;a++)e+=t[a].indicesCount;return e}(r),P=function(t,e,r){for(var a,A=[],o=r.length,E=0;E<o;E++){var i,C=r[E];i=0===C.indexType?new Uint16Array(C.indicesTypedArray.buffer,C.indicesTypedArray.byteOffset,C.indicesTypedArray.byteLength/2):new Uint32Array(C.indicesTypedArray.buffer,C.indicesTypedArray.byteOffset,C.indicesTypedArray.byteLength/4);var s=nt(C.primitiveType);if(s==n._0x4b6a27.LINES)for(a=0;a<C.indicesCount;a+=2){var y=[],l=new B.o;l.x=t[i[a]*e],l.y=t[i[a]*e+1],l.z=t[i[a]*e+2],y.push(l);var u=new B.o;u.x=t[i[a+1]*e],u.y=t[i[a+1]*e+1],u.z=t[i[a+1]*e+2],y.push(u),A.push(y)}else if(s==n._0x4b6a27.LINE_STRIP){for(y=[],a=0;a<C.indicesCount;a++){var P=new B.o;P.x=t[i[a]*e],P.y=t[i[a]*e+1],P.z=t[i[a]*e+2],y.push(P)}A.push(y)}}return A}(A,y,r),c=4*u-4*o,f=new Float32Array(3*c),p=new Float32Array(3*c),d=new Float32Array(3*c),L=new Int8Array(2*c),T=0,D=0;D<o;D++){for(var g=P[D].length,F=0;F<g;F++){var I=4*T-4*D,M=3*I+12*F,m=P[D][F];0!=F&&(f[M-6]=m.x,f[M-5]=m.y,f[M-4]=m.z,f[M-3]=m.x,f[M-2]=m.y,f[M-1]=m.z),F!=g-1&&(f[M]=m.x,f[M+1]=m.y,f[M+2]=m.z,f[M+3]=m.x,f[M+4]=m.y,f[M+5]=m.z);var v=m;F+1<g&&(v=P[D][F+1]),0!=F&&(d[M-6]=v.x,d[M-5]=v.y,d[M-4]=v.z,d[M-3]=v.x,d[M-2]=v.y,d[M-1]=v.z),F!=g-1&&(d[M]=v.x,d[M+1]=v.y,d[M+2]=v.z,d[M+3]=v.x,d[M+4]=v.y,d[M+5]=v.z);var _=m;F>=1&&(_=P[D][F-1]),0!=F&&(p[M-6]=_.x,p[M-5]=_.y,p[M-4]=_.z,p[M-3]=_.x,p[M-2]=_.y,p[M-1]=_.z),F!=g-1&&(p[M]=_.x,p[M+1]=_.y,p[M+2]=_.z,p[M+3]=_.x,p[M+4]=_.y,p[M+5]=_.z),M=2*I+8*F,0!=F&&(L[M-4]=-1,L[M-3]=-1,L[M-2]=1,L[M-1]=-1),F!=g-1&&(L[M]=-1,L[M+1]=1,L[M+2]=1,L[M+3]=1)}T+=P[D].length}var S={vertexAttributes:[],attrLocation:{}},O=S.vertexAttributes,N=S.attrLocation;S.instanceCount=0,S.instanceMode=0,N.aPosition=0,O.push({index:N.aPosition,typedArray:f,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aNormal=1,O.push({index:N.aNormal,typedArray:p,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aTexCoord0=2,O.push({index:N.aTexCoord0,typedArray:d,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aTexCoord1=3,O.push({index:N.aTexCoord1,typedArray:L,componentsPerAttribute:2,componentDatatype:s.ComponentDatatype.BYTE,offsetInBytes:0,strideInBytes:2*Int8Array.BYTES_PER_ELEMENT,normalize:!1});for(var h=[],R=0;R<P.length;R++)h.push(P[R].length);return{vertexPackage:S,indexPackage:function(t,e,r,a){var A,o={};o.indicesCount=6*(t-e),o.indexType=a>65535?1:0,o.primitiveType=n._0x4b6a27.TRIANGLES,A=0===o.indexType?new Uint16Array(o.indicesCount):new Uint32Array(o.indicesCount);for(var B=0,E=0;E<e;E++){for(var i=0;i<r[E]-1;i++)A[6*(B-E+i)]=4*(B-E+i),A[6*(B-E+i)+1]=4*(B-E+i)+2,A[6*(B-E+i)+2]=4*(B-E+i)+1,A[6*(B-E+i)+3]=4*(B-E+i)+1,A[6*(B-E+i)+4]=4*(B-E+i)+2,A[6*(B-E+i)+5]=4*(B-E+i)+3;B+=r[E]}return o.indicesTypedArray=A,o}(u,o,h,c)}}}};var ot,Bt,Et=function(){var t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};var r="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";WebAssembly.validate(t)&&(r="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");var a,n=WebAssembly.instantiate(function(t){for(var r=new Uint8Array(t.length),a=0;a<t.length;++a){var n=t.charCodeAt(a);r[a]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}var A=0;for(a=0;a<t.length;++a)r[A++]=r[a]<60?e[r[a]]:64*(r[a]-60)+r[++a];return r.buffer.slice(0,A)}(r),{}).then((function(t){(a=t.instance).exports.__wasm_call_ctors()}));function A(t,e,r,n,A,o){var B=a.exports.sbrk,E=r+3&-4,i=B(E*n),C=B(A.length),s=new Uint8Array(a.exports.memory.buffer);s.set(A,C);var y=t(i,r,n,C,A.length);if(0==y&&o&&o(i,E,n),e.set(s.subarray(i,i+r*n)),B(i-B(0)),0!=y)throw new Error("Malformed buffer data: "+y)}var o={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},B={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:n,supported:!0,decodeVertexBuffer:function(t,e,r,n,B){A(a.exports.meshopt_decodeVertexBuffer,t,e,r,n,a.exports[o[B]])},decodeIndexBuffer:function(t,e,r,n){A(a.exports.meshopt_decodeIndexBuffer,t,e,r,n)},decodeIndexSequence:function(t,e,r,n){A(a.exports.meshopt_decodeIndexSequence,t,e,r,n)},decodeGltfBuffer:function(t,e,r,n,E,i){A(a.exports[B[E]],t,e,r,n,a.exports[o[i]])}}}(),it=1,Ct=2,st={};st[0]=P.PixelFormat.RGB_DXT1,st[it]=P.PixelFormat.RGBA_DXT3,st[Ct]=P.PixelFormat.RGBA_DXT5;var yt,lt=0,ut=!1;function Pt(t,e){var r=t.data,n=r.byteLength,A=new Uint8Array(r),o=yt._malloc(n);!function(t,e,r,a){var n,A=r/4,o=a%4,B=new Uint32Array(t.buffer,0,(a-o)/4),E=new Uint32Array(e.buffer);for(n=0;n<B.length;n++)E[A+n]=B[n];for(n=a-o;n<a;n++)e[r+n]=t[n]}(A,yt.HEAPU8,o,n);var B=yt._crn_get_dxt_format(o,n),E=st[B];if(!a.e(E))throw new c.t("Unsupported compressed format.");var i,C=yt._crn_get_levels(o,n),s=yt._crn_get_width(o,n),l=yt._crn_get_height(o,n),u=0;for(i=0;i<C;++i)u+=P.PixelFormat.compressedTextureSizeInBytes(E,s>>i,l>>i);if(lt<u&&(a.e(ot)&&yt._free(ot),ot=yt._malloc(u),Bt=new Uint8Array(yt.HEAPU8.buffer,ot,u),lt=u),yt._crn_decompress(o,n,ot,u,0,C),yt._free(o),a.u(t.bMipMap,!1)){var f=Bt.slice(0,u);return e.push(f.buffer),new y.e(E,s,l,f)}var p=P.PixelFormat.compressedTextureSizeInBytes(E,s,l),d=Bt.subarray(0,p),L=new Uint8Array(p);return L.set(d,0),e.push(L.buffer),new y.e(E,s,l,L)}var ct,ft=1,pt=0,dt=1,Lt=2,Tt=3,Dt=0,gt=1,Ft=2;new C.e;var It,Mt=!1,mt=!1,vt=null;if(a.e(D.unzip)){D.unzip.onRuntimeInitialized=function(){Mt=!0};var _t=D.unzip.cwrap("unzip","number",["number","number","number","number"]),St=D.unzip.cwrap("freePointer",null,["number"])}function Ot(t,e,r,a,n,A){this.left=t,this.bottom=e,this.right=r,this.top=a,this.minHeight=n,this.maxHeight=A,this.width=r-t,this.length=a-e,this.height=A-n}function Nt(t,e,r){var a=r,n=t.getUint32(a,!0),A=a+=Uint32Array.BYTES_PER_ELEMENT,o=new Uint8Array(e,a,n);return{dataViewByteOffset:A,byteOffset:a+=n*Uint8Array.BYTES_PER_ELEMENT,buffer:o}}function ht(t,e,r,a){var n=t.getUint32(a+e,!0);a+=Uint32Array.BYTES_PER_ELEMENT;var A=r.subarray(a,a+n);return{string:u.a(A),bytesOffset:a+=n}}function Rt(t,e,r,a,n,A){var o=r,B=t.getUint16(r+a,!0);o+=Uint16Array.BYTES_PER_ELEMENT,A||(o+=Uint16Array.BYTES_PER_ELEMENT);for(var E=0;E<B;E++){var i=t.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var C=t.getUint16(o+a,!0);if(o+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(o+a,!0),o+=Uint16Array.BYTES_PER_ELEMENT,20==C||35==C);else{var y=i*C*Float32Array.BYTES_PER_ELEMENT,l=e.subarray(o,o+y);o+=y;var u="aTexCoord"+E,P=n.vertexAttributes,c=n.attrLocation;c[u]=P.length,P.push({index:c[u],typedArray:l,componentsPerAttribute:C,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:C*Float32Array.BYTES_PER_ELEMENT,normalize:!1})}}return{bytesOffset:o}}function bt(t,e,r,a,n){var A=r,o=t.getUint16(A+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,A+=Uint16Array.BYTES_PER_ELEMENT;for(var B=n.vertexAttributes,E=n.attrLocation,i=0;i<o;i++){var C=t.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var y=t.getUint16(A+a,!0);if(A+=Uint16Array.BYTES_PER_ELEMENT,16===y){A-=Uint16Array.BYTES_PER_ELEMENT;var l=C*(y*Float32Array.BYTES_PER_ELEMENT+Uint16Array.BYTES_PER_ELEMENT),u=e.subarray(A,A+l);A+=l;var P=new Uint8Array(Float32Array.BYTES_PER_ELEMENT*y*C);n.instanceCount=C,n.instanceMode=y,n.instanceBuffer=P,n.instanceIndex=1;for(var c=Float32Array.BYTES_PER_ELEMENT*y+Uint16Array.BYTES_PER_ELEMENT,f=0;f<C;f++){var p=f*c+Uint16Array.BYTES_PER_ELEMENT,d=u.subarray(p,p+c);P.set(d,f*(c-Uint16Array.BYTES_PER_ELEMENT))}L=16*Float32Array.BYTES_PER_ELEMENT,E.uv2=B.length,B.push({index:E.uv2,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:L,instanceDivisor:1}),E.uv3=B.length,B.push({index:E.uv3,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),E.uv4=B.length,B.push({index:E.uv4,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),E.secondary_colour=B.length,B.push({index:E.secondary_colour,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1})}else{t.getUint16(A+a,!0),A+=Uint16Array.BYTES_PER_ELEMENT;l=C*y*Float32Array.BYTES_PER_ELEMENT;if(17===y||29===y){var L;P=e.subarray(A,A+l);n.instanceCount=C,n.instanceMode=y,n.instanceBuffer=P,n.instanceIndex=1,17===y?(L=17*Float32Array.BYTES_PER_ELEMENT,E.uv2=B.length,B.push({index:E.uv2,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:L,instanceDivisor:1}),E.uv3=B.length,B.push({index:E.uv3,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),E.uv4=B.length,B.push({index:E.uv4,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),E.secondary_colour=B.length,B.push({index:E.secondary_colour,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),E.uv6=B.length,B.push({index:E.uv6,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1})):29===y&&(L=29*Float32Array.BYTES_PER_ELEMENT,E.uv1=B.length,B.push({index:E.uv1,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:L,instanceDivisor:1,byteLength:l}),E.uv2=B.length,B.push({index:E.uv2,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),E.uv3=B.length,B.push({index:E.uv3,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),E.uv4=B.length,B.push({index:E.uv4,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),E.uv5=B.length,B.push({index:E.uv5,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),E.uv6=B.length,B.push({index:E.uv6,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:20*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),E.uv7=B.length,B.push({index:E.uv7,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:24*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),E.secondary_colour=B.length,B.push({index:E.secondary_colour,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:27*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),E.uv9=B.length,B.push({index:E.uv9,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:28*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}))}else{var T=C*y;n.instanceBounds=new Float32Array(T);for(var D=0;D<T;D++)n.instanceBounds[D]=t.getFloat32(A+a+D*Float32Array.BYTES_PER_ELEMENT,!0)}A+=l}}return{bytesOffset:A}}var Gt=new B.o(40680631590769,40680631590769,40408299984661.445),Ut=new B.o,xt=new B.o;function Kt(t,e,r,n){var A=Math.cos(e);Ut.x=A*Math.cos(t),Ut.y=A*Math.sin(t),Ut.z=Math.sin(e),Ut=B.o.normalize(Ut,Ut),B.o.multiplyComponents(Gt,Ut,xt);var o=Math.sqrt(B.o.dot(Ut,xt));return xt=B.o.divideByScalar(xt,o,xt),Ut=B.o.multiplyByScalar(Ut,r,Ut),a.e(n)||(n=new B.o),B.o.add(xt,Ut,n)}var Ht=new B.o,wt=new i.a,Vt=new n.p,Yt=new n.p;function Jt(t,e,r,A,C,y,l,u){var P=A,c=e.getUint32(P+r,!0);if(C.verticesCount=c,P+=Uint32Array.BYTES_PER_ELEMENT,c<=0)return{bytesOffset:P};var f=e.getUint16(P+r,!0);P+=Uint16Array.BYTES_PER_ELEMENT;var p=e.getUint16(P+r,!0);p=f*Float32Array.BYTES_PER_ELEMENT,P+=Uint16Array.BYTES_PER_ELEMENT;var d=c*f*Float32Array.BYTES_PER_ELEMENT,L=t.subarray(P,P+d);P+=d;var T=C.vertexAttributes,D=C.attrLocation,g=void 0,F=void 0;if(l){g=new i.a,F=new i.a;var I=new Float32Array(2*c),M=new Float64Array(2*c);if(a.e(u)){var m=new Float32Array(L.byteLength/4),v=new Float32Array(L.buffer,L.byteOffset,L.byteLength/4);k=3===f?B.o.unpackArray(v):E.e.unpackArray(v);var _=n.p.multiply(u.sphereMatrix,u.geoMatrix,Vt),S=n.p.multiply(u.ellipsoidMatrix,u.geoMatrix,Yt);n.p.inverse(S,S);for(var O=new o.t(6378137,6378137,6378137),N=0,h=0,R=k.length;h<R;h++){var b=k[h];n.p.multiplyByPoint(_,b,Ht);var G=Kt((W=O.cartesianToCartographic(Ht,wt)).longitude,W.latitude,W.height,Ht);n.p.multiplyByPoint(S,G,b),3===f?(B.o.pack(b,m,N),N+=3):(E.e.pack(b,m,N),N+=4),M[2*h]=W.longitude,M[2*h+1]=W.latitude,0===h?(g.longitude=W.longitude,g.latitude=W.latitude,F.longitude=W.longitude,F.latitude=W.latitude):(g.longitude=Math.max(W.longitude,g.longitude),g.latitude=Math.max(W.latitude,g.latitude),F.longitude=Math.min(W.longitude,F.longitude),F.latitude=Math.min(W.latitude,F.latitude))}L=m}else{var U=new B.o,x=new B.o,K=new Float32Array(L.buffer,L.byteOffset,L.byteLength/4),H=new i.a;O=$t?new o.t(6378137,6378137,6356752.314245179):new o.t(6378137,6378137,6378137);for(var w=0;w<c;w++)n.p.multiplyByPoint(y,B.o.fromElements(K[3*w],K[3*w+1],K[3*w+2],U),x),H=O.cartesianToCartographic(x,wt),M[2*w]=H.longitude,M[2*w+1]=H.latitude,0===w?(g.longitude=H.longitude,g.latitude=H.latitude,F.longitude=H.longitude,F.latitude=H.latitude):(g.longitude=Math.max(H.longitude,g.longitude),g.latitude=Math.max(H.latitude,g.latitude),F.longitude=Math.min(H.longitude,F.longitude),F.latitude=Math.min(H.latitude,F.latitude))}for(w=0;w<c;w++)I[2*w]=M[2*w]-F.longitude,I[2*w+1]=M[2*w+1]-F.latitude;D.aPosition=T.length,T.push({index:D.aPosition,typedArray:L,componentsPerAttribute:f,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:p,normalize:!1}),D.img=T.length,T.push({index:D.img,typedArray:I,componentsPerAttribute:2,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1})}else{if(3===f&&a.e(y)){x=new B.o,K=new Float32Array(L.buffer,L.byteOffset,L.byteLength/4);for(var V=new Float32Array(L.byteLength/4+c),Y=K.length,J=(w=0,0);w<Y;w+=3,J+=4)V[J]=K[w],V[J+1]=K[w+1],V[J+2]=K[w+2],n.p.multiplyByPoint(y,B.o.fromElements(V[J],V[J+1],V[J+2],U),x),V[J+3]=i.a.fromCartesian(x).height;L=V,p=(f=4)*Float32Array.BYTES_PER_ELEMENT}if(a.e(u)){var k;m=new Float32Array(L.byteLength/4),v=new Float32Array(L.buffer,L.byteOffset,L.byteLength/4);k=3===f?B.o.unpackArray(v):E.e.unpackArray(v);_=n.p.multiply(u.sphereMatrix,u.geoMatrix,Vt),S=n.p.multiply(u.ellipsoidMatrix,u.geoMatrix,Yt);n.p.inverse(S,S);for(O=new o.t(6378137,6378137,6378137),N=0,h=0,R=k.length;h<R;h++){b=k[h];n.p.multiplyByPoint(_,b,Ht);var W;G=Kt((W=O.cartesianToCartographic(Ht,wt)).longitude,W.latitude,W.height,Ht);n.p.multiplyByPoint(S,G,b),3===f?(B.o.pack(b,m,N),N+=3):(E.e.pack(b,m,N),N+=4)}L=m}D.aPosition=T.length,T.push({index:D.aPosition,typedArray:L,componentsPerAttribute:f,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:p,normalize:!1})}return{bytesOffset:P,cartographicBounds:{max:g,min:F}}}function kt(t,e,r,a,n){var A=a,o=e.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,o<=0)return{bytesOffset:A};var B=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var E=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var i=o*B*Float32Array.BYTES_PER_ELEMENT,C=t.subarray(A,A+i);if(A+=i,!n.ignoreNormal){var y=n.vertexAttributes,l=n.attrLocation;l.aNormal=y.length,y.push({index:l.aNormal,typedArray:C,componentsPerAttribute:B,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:E,normalize:!1})}return{bytesOffset:A}}var Wt={0:Uint32Array.BYTES_PER_ELEMENT,1:Float32Array.BYTES_PER_ELEMENT,2:Float64Array.BYTES_PER_ELEMENT};function Zt(t,e,r,a,n){var A,o=a,B=e.getUint32(o+r,!0);if(o+=Uint32Array.BYTES_PER_ELEMENT,n.verticesCount,B>0){e.getUint16(o+r,!0),o+=Uint16Array.BYTES_PER_ELEMENT,o+=2*Uint8Array.BYTES_PER_ELEMENT;var E=B*Uint8Array.BYTES_PER_ELEMENT*4;A=t.subarray(o,o+E),o+=E;var i=n.vertexAttributes,C=n.attrLocation;C.aColor=i.length,i.push({index:C.aColor,typedArray:A,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:4,normalize:!0})}return{bytesOffset:o}}function Xt(t,e,r,a,n){var A=a,o=e.getUint32(A+r,!0);return A+=Uint32Array.BYTES_PER_ELEMENT,o<=0?{bytesOffset:A}:(e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT,A+=2*Uint8Array.BYTES_PER_ELEMENT,{bytesOffset:A+=o*Uint8Array.BYTES_PER_ELEMENT*4})}function zt(t,e,r,a,n){var A=n,o=[],B=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var E=0;E<B;E++){var i={};3===t&&(r.getUint32(A+a,!0),A+=Uint32Array.BYTES_PER_ELEMENT);var C=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var s=r.getUint8(A+a,!0);A+=Uint8Array.BYTES_PER_ELEMENT,r.getUint8(A+a,!0),A+=Uint8Array.BYTES_PER_ELEMENT;var y=r.getUint8(A+a,!0);if(A+=Uint8Array.BYTES_PER_ELEMENT,A+=Uint8Array.BYTES_PER_ELEMENT,C>0){var l=0,u=null;1===s||3===s?(l=C*Uint32Array.BYTES_PER_ELEMENT,u=e.subarray(A,A+l)):(l=C*Uint16Array.BYTES_PER_ELEMENT,u=e.subarray(A,A+l),C%2!=0&&(l+=2)),i.indicesTypedArray=u,A+=l}i.indicesCount=C,i.indexType=s,i.primitiveType=y;var P=[],c=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var f=0;f<c;f++){var p=ht(r,a,e,A),d=p.string;A=p.bytesOffset,P.push(d),i.materialCode=d}if(0===c&&(i.materialCode="OSGBEmpty"),o.push(i),0!==A%4)A+=4-A%4}return{bytesOffset:A,arrIndexPackage:o}}function Qt(t,e,r,A,i,C,y,u,P){var c,f,p=A,d=e.getUint32(p+r,!0);return i.nCompressOptions=d,p+=Uint32Array.BYTES_PER_ELEMENT,(d&l.VertexCompressOption.SVC_Vertex)==l.VertexCompressOption.SVC_Vertex?(c=function(t,e,r,A,i,C){var y=A,l=e.getUint32(y+r,!0);if(i.verticesCount=l,y+=Uint32Array.BYTES_PER_ELEMENT,l<=0)return{bytesOffset:y};var u=e.getUint16(y+r,!0);y+=Uint16Array.BYTES_PER_ELEMENT;var P=e.getUint16(y+r,!0);P=u*Int16Array.BYTES_PER_ELEMENT,y+=Uint16Array.BYTES_PER_ELEMENT;var c=e.getFloat32(y+r,!0);y+=Float32Array.BYTES_PER_ELEMENT;var f=new E.e;f.x=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,f.y=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,f.z=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,f.w=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,i.vertCompressConstant=c,i.minVerticesValue=f;var p=l*u*Int16Array.BYTES_PER_ELEMENT,d=t.subarray(y,y+p);if(y+=p,a.e(C)){var L=new Uint16Array(d.byteLength/2),T=new Uint16Array(d.buffer,d.byteOffset,d.byteLength/2),D=E.e.unpackArray(T);for(let t=0,e=D.length;t<e;t++){let e=D[t];B.o.multiplyByScalar(e,c,e),B.o.add(e,f,e)}var g=n.p.multiply(C.sphereMatrix,C.geoMatrix,Vt),F=n.p.multiply(C.ellipsoidMatrix,C.geoMatrix,Yt);n.p.inverse(F,F);var I=new o.t(6378137,6378137,6378137),M=0;for(let t=0,e=D.length;t<e;t++){let e=D[t];n.p.multiplyByPoint(g,e,Ht);let r=I.cartesianToCartographic(Ht,wt),a=Kt(r.longitude,r.latitude,r.height,Ht);n.p.multiplyByPoint(F,a,e),B.o.subtract(e,f,e),B.o.divideByScalar(e,c,e),E.e.pack(e,L,M),M+=4}d=L}var m=i.vertexAttributes,v=i.attrLocation;return v.aPosition=m.length,m.push({index:v.aPosition,typedArray:d,componentsPerAttribute:u,componentDatatype:s.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:P,normalize:!1}),{bytesOffset:y}}(t,e,r,p,i,P),p=c.bytesOffset):(p=(c=Jt(t,e,r,p,i,y,u,P)).bytesOffset,f=c.cartographicBounds),(d&l.VertexCompressOption.SVC_Normal)==l.VertexCompressOption.SVC_Normal?(c=function(t,e,r,a,n){var A=a,o=e.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,o<=0)return{bytesOffset:A};e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT;var B=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var E=2*o*Int16Array.BYTES_PER_ELEMENT,i=t.subarray(A,A+E);if(A+=E,!n.ignoreNormal){var C=n.vertexAttributes,y=n.attrLocation;y.aNormal=C.length,C.push({index:y.aNormal,typedArray:i,componentsPerAttribute:2,componentDatatype:s.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:B,normalize:!1})}return{bytesOffset:A}}(t,e,r,p,i),p=c.bytesOffset):p=(c=kt(t,e,r,p,i)).bytesOffset,p=(c=Xt(0,e,r,p=(c=Zt(t,e,r,p,i)).bytesOffset)).bytesOffset,(d&l.VertexCompressOption.SVC_TexutreCoord)==l.VertexCompressOption.SVC_TexutreCoord?(c=function(t,e,r,a,n){n.texCoordCompressConstant=[],n.minTexCoordValue=[];var A=r,o=t.getUint16(r+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,A+=Uint16Array.BYTES_PER_ELEMENT;for(var B=0,i=0;i<o;i++){var C=t.getUint8(A+a,!0);A+=Uint8Array.BYTES_PER_ELEMENT,A+=3*Uint8Array.BYTES_PER_ELEMENT;var y=t.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var l=t.getUint16(A+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(A+a,!0),A+=Uint16Array.BYTES_PER_ELEMENT;var u=t.getFloat32(A+a,!0);A+=Float32Array.BYTES_PER_ELEMENT,n.texCoordCompressConstant.push(u);var P=new E.e;P.x=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,P.y=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,P.z=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,P.w=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,n.minTexCoordValue.push(P);var c=y*l*Int16Array.BYTES_PER_ELEMENT,f=e.subarray(A,A+c),p=(A+=c)%4;0!==p&&(A+=4-p);var d="aTexCoord"+B,L=n.vertexAttributes,T=n.attrLocation;if(T[d]=L.length,L.push({index:T[d],typedArray:f,componentsPerAttribute:l,componentDatatype:s.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:l*Int16Array.BYTES_PER_ELEMENT,normalize:!1}),C){c=y*Float32Array.BYTES_PER_ELEMENT;var D=e.subarray(A,A+c);A+=c,n.texCoordZMatrix=!0,T[d="aTexCoordZ"+B]=L.length,L.push({index:T[d],typedArray:D,componentsPerAttribute:1,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:Float32Array.BYTES_PER_ELEMENT,normalize:!1})}B++}return{bytesOffset:A}}(e,t,p,r,i),p=c.bytesOffset):p=(c=Rt(e,t,p,r,i,C)).bytesOffset,(d&l.VertexCompressOption.SVC_TexutreCoordIsW)==l.VertexCompressOption.SVC_TexutreCoordIsW&&(i.textureCoordIsW=!0),{bytesOffset:p=(c=bt(e,t,p,r,i)).bytesOffset,cartographicBounds:f}}function jt(t,e,r,n,A,o,B,E,i,C){3===t&&(r.getUint32(A,!0),A+=Uint32Array.BYTES_PER_ELEMENT,a.e(i)&&i||(E=void 0));var y,l=A;l=(y=Jt(e,r,n,l,o,E,i,C)).bytesOffset;var u=y.cartographicBounds;if(l=(y=Zt(e,r,n,l=(y=kt(e,r,n,l,o)).bytesOffset,o)).bytesOffset,3!==t&&(l=(y=Xt(0,r,n,l)).bytesOffset),l=(y=bt(r,e,l=(y=Rt(r,e,l,n,o,B)).bytesOffset,n,o)).bytesOffset,3===t&&(y=function(t,e,r,a,n){var A=a,o=e.getUint32(A+r,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var B=0;B<o;B++){var E=e.getUint32(A+r,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var i=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var C=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var y=E*i*Wt[C],l=t.subarray(A,A+y);A+=y;var u=n.vertexAttributes,P=n.attrLocation,c="aCustom"+B;P[c]=u.length,u.push({index:P[c],typedArray:l,componentsPerAttribute:i,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1})}return{bytesOffset:A}}(e,r,n,l,o),l=y.bytesOffset),3==t){var P=ht(r,n,e,l);l=P.bytesOffset,o.customVertexAttribute=JSON.parse(P.string);var c="aCustom"+o.customVertexAttribute.TextureCoordMatrix,f="aCustom"+o.customVertexAttribute.VertexWeight,p="aCustom"+o.customVertexAttribute.VertexWeight_1;a.e(o.attrLocation[c])&&(o.attrLocation.aTextureCoordMatrix=o.attrLocation[c],delete o.attrLocation[c]),a.e(o.attrLocation[f])&&(o.attrLocation.aVertexWeight=o.attrLocation[f],delete o.attrLocation[f]),a.e(o.attrLocation[p])&&(o.attrLocation.aVertexWeight_1=o.attrLocation[p],delete o.attrLocation[p]);for(var d=Object.keys(o.attrLocation),L=d.length,T=0;T<L;++T){var D=d[T];-1!==D.indexOf("aCustom")&&delete o.attrLocation[D]}var g=(l+n)%4;g&&(g=4-g),l+=g}return 3===t&&(y=function(t,e,r,a,n){var A=a,o=e.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,o<=0)return{bytesOffset:A};var B=e.getUint16(A+r,!0);return A+=Uint16Array.BYTES_PER_ELEMENT,e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT,{bytesOffset:A+=o*B*Float32Array.BYTES_PER_ELEMENT}}(0,r,n,l),l=y.bytesOffset),{bytesOffset:l,cartographicBounds:u}}function qt(t){return 0!==t.length&&"ClampGroundAndObjectLinePass"===t[0].materialCode}var $t,te=1,ee=4,re=8,ae=16,ne=32,Ae=64,oe=128,Be=512,Ee=1024;function ie(t,e,r,A,i,C,y,u,P,c,f,p,d){var L=t,T=0,D=e.getUint32(T+r,!0);T+=Uint32Array.BYTES_PER_ELEMENT,c=a.u(c,a.u.EMPTY_OBJECT);for(var g=void 0,F=0;F<D;F++){3===u&&(e.getUint32(T+r,!0),T+=Uint32Array.BYTES_PER_ELEMENT);var I=(Rt=ht(e,r,L,T)).string;if(a.e(P)){var m=a.u(c[I],n.p.IDENTITY);g=new n.p,n.p.multiply(P,m,g)}a.e(d)&&(d.geoMatrix=a.u(c[I],n.p.IDENTITY));var v=(T=Rt.bytesOffset)%4;0!==v&&(T+=4-v);var _=pt;if(_=e.getUint32(T+r,!0),T+=Int32Array.BYTES_PER_ELEMENT,(Pe={vertexAttributes:[],attrLocation:{},instanceCount:0,instanceMode:0,instanceIndex:-1}).ignoreNormal=A.ignoreNormal,3===u)switch(_){case Dt:_=dt;break;case gt:_=Tt;break;case Ft:_=Lt}if(_===Tt){3===u&&(e.getInt32(T+r,!0),T+=Int32Array.BYTES_PER_ELEMENT),u>=2&&(e.getInt32(T+r,!0),T+=Int32Array.BYTES_PER_ELEMENT);var S,O={};O.posUniqueID=e.getInt32(T+r,!0),T+=Int32Array.BYTES_PER_ELEMENT,O.normalUniqueID=e.getInt32(T+r,!0),T+=Int32Array.BYTES_PER_ELEMENT,O.colorUniqueID=e.getInt32(T+r,!0),T+=Int32Array.BYTES_PER_ELEMENT,O.secondColorUniqueID=e.getInt32(T+r,!0),T+=Int32Array.BYTES_PER_ELEMENT,3===u?(S=e.getUint32(T+r,!0),T+=Int32Array.BYTES_PER_ELEMENT):(S=e.getUint16(T+r,!0),T+=Int16Array.BYTES_PER_ELEMENT);for(var N=[],h=0;h<S;h++){var R=e.getInt32(T+r,!0);N.push(R),T+=Int32Array.BYTES_PER_ELEMENT}O.texCoordUniqueIDs=N;var G=[];if(3===u){var U=e.getUint32(T+r,!0);T+=Int32Array.BYTES_PER_ELEMENT;for(var x=0;x<U;x++){var K=e.getInt32(T+r,!0);T+=Int32Array.BYTES_PER_ELEMENT,G.push(K)}}O.vertexAttrUniqueIDs=G;var H=e.getInt32(T+r,!0);T+=Int32Array.BYTES_PER_ELEMENT;var w=[],V={};if(H>0){var Y=(J=ht(e,r,L,T)).string;T=J.bytesOffset,V.materialCode=Y,w.push(V)}3===u&&((xt=(T+r)%4)&&(xt=4-xt),T+=xt);var J,k=new Object,W=e.getUint32(T+r,!0),Z=M(L,T+=Int32Array.BYTES_PER_ELEMENT,T+W);if(H>0?b.dracoDecodeMesh(ct,Z,W,Pe,V,O,g,f,k,d):b.dracoDecodePointCloud(ct,Z,W,Pe,O),a.e(k.min)&&a.e(k.max)||(k=void 0),T+=W,3===u)(xt=(T+r)%4)&&(xt=4-xt),(xt=((T=(J=ht(e,r,L,T+=xt)).bytesOffset)+r)%4)&&(xt=4-xt),T+=xt;A[I]={vertexPackage:Pe,arrIndexPackage:w,cartographicBounds:k}}else if(_==Lt&&3==u){var X=e.getUint32(T+r,!0);T+=Uint32Array.BYTES_PER_ELEMENT;var z=e.getUint32(T+r,!0);T+=Uint32Array.BYTES_PER_ELEMENT,Pe.minVerticesValue=new E.e,Pe.minTexCoordValue=[new o.o,new o.o],Pe.texCoordCompressConstant=[new B.o,new B.o];w=[];for(var Q=0;Q<z;Q++){var j=e.getUint32(T+r,!0);T+=Uint32Array.BYTES_PER_ELEMENT,Pe.vertCompressConstant=e.getFloat32(T+r,!0),T+=Float32Array.BYTES_PER_ELEMENT,Pe.minVerticesValue.x=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,Pe.minVerticesValue.y=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,Pe.minVerticesValue.z=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT;var q=e.getFloat64(T+r,!0);T+=Float64Array.BYTES_PER_ELEMENT;var $=e.getFloat64(T+r,!0);T+=Float64Array.BYTES_PER_ELEMENT;var tt=e.getFloat64(T+r,!0);T+=Float64Array.BYTES_PER_ELEMENT;var et=e.getFloat64(T+r,!0);T+=Float64Array.BYTES_PER_ELEMENT;var rt=e.getFloat64(T+r,!0);T+=Float64Array.BYTES_PER_ELEMENT;var at=e.getFloat64(T+r,!0);T+=Float64Array.BYTES_PER_ELEMENT;var nt=e.getFloat64(T+r,!0);T+=Float64Array.BYTES_PER_ELEMENT;var At=e.getFloat64(T+r,!0);T+=Float64Array.BYTES_PER_ELEMENT,Pe.minTexCoordValue[0].x=tt,Pe.minTexCoordValue[0].y=et,Pe.minTexCoordValue[1].x=nt,Pe.minTexCoordValue[1].y=At,Pe.texCoordCompressConstant[0].x=q,Pe.texCoordCompressConstant[0].y=$,Pe.texCoordCompressConstant[1].x=rt,Pe.texCoordCompressConstant[1].y=at;var ot=e.getInt32(T+r,!0);T+=Int32Array.BYTES_PER_ELEMENT;k=new Object;for(var Bt=0;Bt<ot;Bt++){var it=e.getInt32(T+r,!0);T+=Int32Array.BYTES_PER_ELEMENT;var Ct=it,st=0;Ct!=Be&&Ct!=Ee||(st=e.getInt32(T+r,!0),T+=Int32Array.BYTES_PER_ELEMENT);var yt=e.getInt32(T+r,!0);T+=Int32Array.BYTES_PER_ELEMENT;var lt=new Uint8Array(e.buffer,T+r,yt);(xt=((T+=Uint8Array.BYTES_PER_ELEMENT*yt)+r)%4)&&(xt=4-xt),T+=xt,se(j,Ct,st,lt,Pe,X,d,f,k,g,C)}T=(Ut=ht(e,r,L,T)).bytesOffset,Pe.customVertexAttribute=JSON.parse(Ut.string),(xt=(T+r)%4)&&(xt=4-xt),T+=xt;var ut=e.getInt32(T+r,!0);T+=Int32Array.BYTES_PER_ELEMENT;for(var Pt=0;Pt<ut;Pt++){V={};var ft=e.getInt32(T+r,!0);if(T+=Int32Array.BYTES_PER_ELEMENT,ft>0){var It=e.getInt8(T+r,!0);T+=Int8Array.BYTES_PER_ELEMENT,e.getInt8(T+r,!0),T+=Int8Array.BYTES_PER_ELEMENT;var Mt=e.getInt8(T+r,!0);T+=Int8Array.BYTES_PER_ELEMENT,e.getInt8(T+r,!0),T+=Int8Array.BYTES_PER_ELEMENT;var mt,vt,_t=e.getInt32(T+r,!0);T+=Int32Array.BYTES_PER_ELEMENT,13!==Mt?(mt=new Uint8Array(e.buffer,T+r,_t),T+=Uint8Array.BYTES_PER_ELEMENT*_t):(mt=new Uint32Array(e.buffer,T+r,_t),T+=Uint32Array.BYTES_PER_ELEMENT*_t),(xt=(T+r)%4)&&(xt=4-xt),T+=xt,13!==Mt?(vt=s.ComponentDatatype.createTypedArray(s.ComponentDatatype.UNSIGNED_BYTE,ft*Uint32Array.BYTES_PER_ELEMENT),Et.decodeIndexBuffer(vt,ft,Uint32Array.BYTES_PER_ELEMENT,mt)):vt=mt;var St,Ot=e.getInt32(T+r,!0);T+=Int32Array.BYTES_PER_ELEMENT,V.indexType=It,0===It?St=new Uint16Array(ft):1===It&&(St=new Uint32Array(ft)),V.indicesCount=ft;var Nt=new Uint32Array(vt.buffer,vt.byteOffset,vt.byteLength/4);St.set(Nt,0),V.indicesTypedArray=St,C.push(St.buffer),V.primitiveType=Mt;for(Bt=0;Bt<Ot;Bt++){var Rt;Y=(Rt=ht(e,r,L,T)).string;T=Rt.bytesOffset,V.materialCode=Y}if(w.length>0&&13!==Mt){var bt=Pe.preVertexCount;V.indicesTypedArray=Nt.map((function(t){return t+bt})),V.indexType=1}w.push(V),(xt=(T+r)%4)&&(xt=4-xt),T+=xt}}}Pe.nCompressOptions=X,2===w.length&&13===w[1].primitiveType&&w[1].indicesCount>=3&&(Gt=l._0x30c9ea.createEdgeDataByIndices(Pe,w[1],C)),a.e(k.min)&&a.e(k.max)||(k=void 0),A[I]={vertexPackage:Pe,arrIndexPackage:w,edgeGeometry:Gt,cartographicBounds:k}}else{var Gt;if(_===dt||_===pt)T=(Rt=jt(u,L,e,r,T,Pe,i,g,f,d)).bytesOffset,k=Rt.cartographicBounds;else if(_===Lt&&(T=(Rt=Qt(L,e,r,T,Pe,i,g,f,d)).bytesOffset,k=Rt.cartographicBounds,3==u)){var Ut;T=(Ut=ht(e,r,L,T)).bytesOffset,Pe.customVertexAttribute=JSON.parse(Ut.string);var xt,Kt="aCustom"+Pe.customVertexAttribute.TextureCoordMatrix,Ht="aCustom"+Pe.customVertexAttribute.VertexWeight,wt="aCustom"+Pe.customVertexAttribute.VertexWeight_1;a.e(Pe.attrLocation[Kt])&&(Pe.attrLocation.aTextureCoordMatrix=Pe.attrLocation[Kt],delete Pe.attrLocation[Kt]),a.e(Pe.attrLocation[Ht])&&(Pe.attrLocation.aVertexWeight=Pe.attrLocation[Ht],delete Pe.attrLocation[Ht]),a.e(Pe.attrLocation[wt])&&(Pe.attrLocation.aVertexWeight_1=Pe.attrLocation[wt],delete Pe.attrLocation[wt]);for(var Vt=Object.keys(Pe.attrLocation),Yt=Vt.length,Jt=0;Jt<Yt;++Jt){var kt=Vt[Jt];-1!==kt.indexOf("aCustom")&&delete Pe.attrLocation[kt]}(xt=(T+r)%4)&&(xt=4-xt),T+=xt}qt(w=(Rt=zt(u,L,e,r,T)).arrIndexPackage)&&(Pe.clampRegionEdge=!0),2===w.length&&13===w[1].primitiveType&&w[1].indicesCount>=3&&(Gt=l._0x30c9ea.createEdgeDataByIndices(Pe,w[1],C)),T=Rt.bytesOffset,a.e(k)&&a.e(k.min)&&a.e(k.max)||(k=void 0),A[I]={vertexPackage:Pe,arrIndexPackage:w,edgeGeometry:Gt,cartographicBounds:k}}if(3!==u&&a.e(y)&&y){var Wt=e.getUint16(T+r,!0);if(T+=Uint16Array.BYTES_PER_ELEMENT,1===Wt){var Zt=e.getUint32(T+r,!0);T+=Uint32Array.BYTES_PER_ELEMENT;var Xt,$t=e.getUint32(T+r,!0);T+=Uint32Array.BYTES_PER_ELEMENT,e.getFloat32(T+r,!0),T+=Float32Array.BYTES_PER_ELEMENT;var te=new Array(Zt),ee=new Array(Zt),re=new Array(Zt),ae=new Array(Zt);for(Xt=0;Xt<Zt;Xt++){var ne=e.getFloat32(T+r,!0);T+=Float32Array.BYTES_PER_ELEMENT,te[Xt]=ne;var Ae=e.getUint16(T+r,!0);T+=Uint16Array.BYTES_PER_ELEMENT,ee[Xt]=Ae;var oe=e.getUint16(T+r,!0);T+=Uint16Array.BYTES_PER_ELEMENT,re[Xt]=oe;for(var ie=oe*$t,Ce=new Array(ie),ye=0;ye<ie;ye++){Kt=e.getFloat32(T+r,!0);T+=Float32Array.BYTES_PER_ELEMENT,Ce[ye]=Kt}ae[Xt]=Ce}}var le=new B.o,ue=new B.o;le.x=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,le.y=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,le.z=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,ue.x=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,ue.y=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,ue.z=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,A[I].min=le,A[I].max=ue;var Pe=A[I].vertexPackage;a.e(Pe.instanceBuffer)&&2===u&&(Pe.instanceBounds=new Float32Array(6),B.o.pack(le,Pe.instanceBounds,0),B.o.pack(ue,Pe.instanceBounds,3))}if(3===u){var ce=new B.o;ce.x=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,ce.y=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,ce.z=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT;var fe=new B.o;fe.x=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,fe.y=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,fe.z=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT;var pe=new B.o;pe.x=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,pe.y=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,pe.z=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT;var de=new B.o;de.x=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,de.y=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT,de.z=e.getFloat64(T+r,!0),T+=Float64Array.BYTES_PER_ELEMENT}}}function Ce(t,e,r){var a=t.typedArray,n=new r(a.length+e.length);n.set(a,0),n.set(e,a.length),t.typedArray=n}function se(t,e,r,A,C,y,l,u,P,c,f){var p,d=0,L=C.vertexAttributes,T=C.attrLocation;switch(e){case ee:case re:case ae:case ne:d=2*Uint16Array.BYTES_PER_ELEMENT,0!=(16&y)||e!==ae&&e!==ne||(d=2*Float32Array.BYTES_PER_ELEMENT),p=s.ComponentDatatype.createTypedArray(s.ComponentDatatype.UNSIGNED_BYTE,t*d);break;case Ae:case oe:d=4*Uint8Array.BYTES_PER_ELEMENT,p=s.ComponentDatatype.createTypedArray(s.ComponentDatatype.UNSIGNED_BYTE,4*t);break;case Be:case Ee:d=Float32Array.BYTES_PER_ELEMENT*r,p=s.ComponentDatatype.createTypedArray(s.ComponentDatatype.UNSIGNED_BYTE,t*r*4);break;default:d=4*Uint16Array.BYTES_PER_ELEMENT,p=s.ComponentDatatype.createTypedArray(s.ComponentDatatype.UNSIGNED_BYTE,t*d)}switch(Et.decodeVertexBuffer(p,t,d,A,A.length),f.push(p.buffer),e){case te:var D=new Uint16Array(p.buffer,0,p.length/2),g=s.ComponentDatatype.SHORT;if(a.e(l)){var F=E.e.unpackArray(D);for(let t=0,e=F.length;t<e;t++){let e=F[t];B.o.multiplyByScalar(e,C.vertCompressConstant,e),B.o.add(e,C.minVerticesValue,e)}var I=n.p.multiply(l.sphereMatrix,l.geoMatrix,Vt),M=n.p.multiply(l.ellipsoidMatrix,l.geoMatrix,Yt);n.p.inverse(M,M);var m=new o.t(6378137,6378137,6378137),v=0;for(let t=0,e=F.length;t<e;t++){let e=F[t];n.p.multiplyByPoint(I,e,Ht);let r=m.cartesianToCartographic(Ht,wt),a=Kt(r.longitude,r.latitude,r.height,Ht);n.p.multiplyByPoint(M,a,e),B.o.subtract(e,C.minVerticesValue,e),B.o.divideByScalar(e,C.vertCompressConstant,e),E.e.pack(e,D,v),v+=4}}if(void 0!==(U=T.aPosition)?(Ce(L[U],D,Uint16Array),C.preVertexCount=C.verticesCount,C.verticesCount+=t):(T.aPosition=L.length,L.push({index:T.aPosition,typedArray:D,componentsPerAttribute:4,componentDatatype:g,offsetInBytes:0,strideInBytes:0,normalize:!1}),C.verticesCount=t),!a.e(l)&&u){var _=new i.a,S=new i.a,O=new Float32Array(2*t),N=new Float64Array(2*t),h=new B.o,R=new B.o,b=new i.a;m=$t?new o.t(6378137,6378137,6356752.314245179):new o.t(6378137,6378137,6378137);for(var G=0;G<t;G++)n.p.multiplyByPoint(c,B.o.fromElements(D[4*G]*C.vertCompressConstant+C.minVerticesValue.x,D[4*G+1]*C.vertCompressConstant+C.minVerticesValue.y,D[4*G+2]*C.vertCompressConstant+C.minVerticesValue.z,h),R),b=m.cartesianToCartographic(R,wt),N[2*G]=b.longitude,N[2*G+1]=b.latitude,0===G?(_.longitude=b.longitude,_.latitude=b.latitude,S.longitude=b.longitude,S.latitude=b.latitude):(_.longitude=Math.max(b.longitude,_.longitude),_.latitude=Math.max(b.latitude,_.latitude),S.longitude=Math.min(b.longitude,S.longitude),S.latitude=Math.min(b.latitude,S.latitude));for(G=0;G<t;G++)O[2*G]=N[2*G]-S.longitude,O[2*G+1]=N[2*G+1]-S.latitude;T.img=L.length,L.push({index:T.img,typedArray:O,componentsPerAttribute:2,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),P.max=_,P.min=S}break;case ee:var U=T.aNormal,x=new Int16Array(p.buffer,0,p.length/2);void 0!==U?Ce(L[U],x,Uint16Array):(T.aNormal=L.length,L.push({index:T.aNormal,typedArray:x,componentsPerAttribute:2,componentDatatype:s.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case ae:var K=new Uint16Array(p.buffer,0,p.length/2),H=(U=T.aTexCoord0,g=s.ComponentDatatype.SHORT,Uint16Array);0==(16&y)&&(g=s.ComponentDatatype.FLOAT,H=Float32Array,K=new Float32Array(p.buffer,0,p.length/4)),void 0!==U?Ce(L[U],K,H):(T.aTexCoord0=L.length,L.push({index:T.aTexCoord0,typedArray:K,componentsPerAttribute:2,componentDatatype:g,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case ne:K=new Uint16Array(p.buffer,0,p.length/2),U=T.aTexCoord1,g=s.ComponentDatatype.SHORT,H=Uint16Array;0==(16&y)&&(g=s.ComponentDatatype.FLOAT,H=Float32Array,K=new Float32Array(p.buffer,0,p.length/4)),void 0!==U?Ce(L[U],K,H):(T.aTexCoord1=L.length,L.push({index:T.aTexCoord1,typedArray:K,componentsPerAttribute:2,componentDatatype:g,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case Ae:void 0!==(U=T.aColor)?Ce(L[U],p,Uint8Array):(T.aColor=L.length,L.push({index:T.aColor,typedArray:p,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:0,normalize:!0}));break;case oe:void 0!==(U=T.aSecondColor)?Ce(L[U],p,Uint8Array):(T.aSecondColor=L.length,L.push({index:T.aSecondColor,typedArray:p,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.BYTE,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case Be:K=new Float32Array(p.buffer,0,p.length/4);void 0!==(U=T.aVertexWeight)?Ce(L[U],K,Float32Array):(T.aVertexWeight=L.length,L.push({index:T.aVertexWeight,typedArray:K,componentsPerAttribute:r,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case Ee:var w=new Float32Array(p.buffer,0,p.length/4);void 0!==(U=T.aTextureCoordMatrix)?Ce(L[U],w,Float32Array):(T.aTextureCoordMatrix=L.length,L.push({index:T.aTextureCoordMatrix,typedArray:w,componentsPerAttribute:r,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1}))}}function ye(t,e,r,A,o){var B={},E=[],i=new n.p,C=t;o=a.u(o,{});for(var s=0;s<16;s++)i[s]=e.getFloat64(r+A,!0),r+=Float64Array.BYTES_PER_ELEMENT;B.matrix=i,B.skeletonNames=E;var y=e.getUint32(r+A,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var l=0;l<y;l++){var u=ht(e,A,C,r),P=u.string;r=u.bytesOffset,E.push(P),o[P]=i}return{byteOffset:r,geode:B}}function le(t){var e=t.indexOf("Geometry");if(-1===e)return t;var r=t.substring(e,t.length);return t.replace(r,"")}function ue(t,e,r,E,i,C,s){var y={},l=r.getFloat32(E+i,!0);E+=Float32Array.BYTES_PER_ELEMENT;var u=r.getUint16(E+i,!0);E+=Uint16Array.BYTES_PER_ELEMENT,y.rangeMode=u,y.rangeList=l;var P=new B.o;P.x=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT,P.y=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT,P.z=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT;var c=r.getFloat64(E+i,!0);if(E+=Float64Array.BYTES_PER_ELEMENT,a.e(s)){var f=n.p.clone(s.sphereMatrix,Vt),p=n.p.clone(s.ellipsoidMatrix,Yt);n.p.inverse(p,p);var d=new o.t(6378137,6378137,6378137);n.p.multiplyByPoint(f,P,Ht);let t=d.cartesianToCartographic(Ht,wt),e=Kt(t.longitude,t.latitude,t.height,Ht);n.p.multiplyByPoint(p,e,P)}if(y.boundingSphere=new A.i(P,c),3===t){var L=new B.o;L.x=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT,L.y=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT,L.z=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT;var T=new B.o;T.x=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT,T.y=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT,T.z=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT;var D=new B.o;D.x=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT,D.y=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT,D.z=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT;var g=new B.o;g.x=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT,g.y=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT,g.z=r.getFloat64(E+i,!0),E+=Float64Array.BYTES_PER_ELEMENT,0==T.x&&0==T.y&&0==T.z&&(T.x=1),0==D.x&&0==D.y&&0==D.z&&(D.y=1),0==g.x&&0==g.y&&0==g.z&&(g.z=1),y._obb={xExtent:T,yExtent:D,zExtent:g,obbCenter:L}}var F=e,I=(v=ht(r,i,F,E)).string;E=v.bytesOffset,I=le(I=(I=I.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,"")).replace(/\\/gi,"/")),y.childTile=I,y.geodes=[];var M=r.getUint32(E+i,!0);E+=Uint32Array.BYTES_PER_ELEMENT;for(var m=0;m<M;m++){var v;E=(v=ye(e,r,E,i,C)).byteOffset,y.geodes.push(v.geode)}return 3===t&&(E=(v=ht(r,i,F,E)).bytesOffset),{pageLOD:y,bytesOffset:E}}function Pe(t,e,r,a,n,A){var o=0,B={},E=[],i=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;for(var C=0;C<i;C++){var s=ue(t,e,r,o,a,n,A);o=s.bytesOffset,E.push(s.pageLOD)}return B.pageLods=E,B}function ce(t,r){var a=t.vertexAttributes,n=t.attrLocation,A=a.length;n.aTextureBatchId=A;var o,B=t.verticesCount,E=Object.keys(r).length;if(1==E)o=r[0];else if(E>1)for(var i in o=new Float32Array(B*E),e.d(o,-1),r)for(var C=r[i],y=parseInt(i),l=0;l<B;l++)o[2*l+y]=C[l];a.push({index:A,typedArray:o,componentsPerAttribute:E,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0})}function fe(t,r,n,A){for(var o=n.length,B=0;B<o;B++)for(var E=n[B],i=E.subName.split("_")[0],C=E.subVertexOffsetArr,s=0;s<C.length;s++){var y=C[s],l=y.geoName,u=y.offset,P=y.count,c=y.texUnitIndex,f=r[l].vertexPackage.verticesCount,p=A[l];a.e(p)||(p=A[l]={});var d=p[c];a.e(d)||(d=p[c]=new Float32Array(f),e.d(d,-1));var L=a.e(t)?t[i]:B;e.d(d,L,u,u+P)}}function pe(t,e,r){var a=t.vertexAttributes,n=t.attrLocation,A=a.length;n[1===r?"instanceId":"batchId"]=A,a.push({index:A,typedArray:e,componentsPerAttribute:1,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,instanceDivisor:r})}function de(t,r,n,A,o,B){var E=0,i=t,C=r.getUint32(E+n,!0);E+=Uint32Array.BYTES_PER_ELEMENT;for(var s=0;s<C;s++){var y=ht(r,n,i,E),u=y.string;E=y.bytesOffset;var P=r.getUint32(E+n,!0);E+=Uint32Array.BYTES_PER_ELEMENT;var c={};A[u].pickInfo=c;var f=A[u].edgeGeometry;if(-1==A[u].vertexPackage.instanceIndex){var p=new Float32Array(A[u].vertexPackage.verticesCount);B.push(p.buffer);for(var d=0;d<P;d++){var L=r.getUint32(E+n,!0);E+=Uint32Array.BYTES_PER_ELEMENT;var T=r.getUint32(E+n,!0);E+=Uint32Array.BYTES_PER_ELEMENT;var D=0,g=0;c[L]={batchId:d};for(var F=0;F<T;F++)g=r.getUint32(E+n,!0),E+=Uint32Array.BYTES_PER_ELEMENT,D=r.getUint32(E+n,!0),E+=Uint32Array.BYTES_PER_ELEMENT,e.d(p,d,g,g+D);c[L].vertexColorOffset=g,c[L].vertexCount=D}pe(A[u].vertexPackage,p,void 0)}else{var I=A[u].vertexPackage.instanceCount;A[u].vertexPackage.instanceBuffer,A[u].vertexPackage.instanceMode;var M=new Float32Array(I);B.push(M.buffer);var m=0;for(d=0;d<P;d++){var v=r.getUint32(E+n,!0);E+=Uint32Array.BYTES_PER_ELEMENT;T=r.getUint32(E+n,!0);E+=Uint32Array.BYTES_PER_ELEMENT;for(F=0;F<T;F++){var _=r.getUint32(E+n,!0);if(E+=Uint32Array.BYTES_PER_ELEMENT,M[m]=m,void 0===c[v]&&(c[v]={vertexColorCount:1,instanceIds:[],vertexColorOffset:m}),c[v].instanceIds.push(_),m++,3===o){D=r.getUint32(E+n,!0);E+=Uint32Array.BYTES_PER_ELEMENT}}}pe(A[u].vertexPackage,M,1)}f=A[u].edgeGeometry;if(a.e(f)){var S,O,N=f.regular.instancesData,h=l._0x30c9ea.RegularInstanceStride;if(a.e(N))for(O=N.length,S=0;S<O;S+=h){var R=N[S+9];N[S+9]=p[R]}var b=f.silhouette.instancesData;if(h=l._0x30c9ea.SilhouetteInstanceStride,a.e(b))for(O=b.length,S=0;S<O;S+=h){R=b[S+12];b[S+12]=p[R]}}}}function Le(t){return t<1e-10&&t>-1e-10}function Te(t,e,r,n,A,o,B,E){var i=new DataView(t),C=new Uint8Array(t),s=i.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var y=u.a(C,r,s);y=y.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,""),r+=s;var l=i.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var P=0;P<l;P++){var c={},p=i.getFloat32(r,!0);r+=Float32Array.BYTES_PER_ELEMENT;var d=i.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT,c.rangeMode=d,c.rangeList=p;var T={};T.x=i.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,T.y=i.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,T.z=i.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;var D=i.getFloat64(r,!0);r+=Float64Array.BYTES_PER_ELEMENT,c.boundingSphere={center:T,radius:D},s=i.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var g=u.a(C,r,s);r+=s,g=le(g=g.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,"")),c.childTile=g}var F={},I=i.getFloat32(r,!0);r+=Float32Array.BYTES_PER_ELEMENT;I>=3&&(i.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT),i.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var M=i.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var m=new Uint8Array(t,r,M),v=r+M,_=L.pako.inflate(m).buffer;E.push(_),i=new DataView(_);C=new Uint8Array(_);r=0;var S=i.getUint32(r,!0),O=Nt(i,_,r+=Uint32Array.BYTES_PER_ELEMENT),h=O.buffer;r=O.byteOffset;var R=Pe(I,h,i,O.dataViewByteOffset),b=r%4;0!==b&&(r+=4-b),ie((O=Nt(i,_,r)).buffer,i,O.dataViewByteOffset,F,!1,E,void 0,I),r=O.byteOffset,3!==I&&((O=Nt(i,_,r)).buffer,r=O.byteOffset);var G={};!function(t,e,r,n,A,o,B,E,i,C){var s=E,y=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;for(var l={},P=0;P<y;P++){var c=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var p=u.a(o,s-E,c),d=(s+=c)%4;0!==d&&(s+=4-d),B.getUint32(s,!0),s+=Uint32Array.BYTES_PER_ELEMENT;var L=B.getUint8(s,!0);s+=Uint8Array.BYTES_PER_ELEMENT;var T=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var D=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var g=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var F=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var I,M=B.getUint32(s,!0);if(s+=Uint32Array.BYTES_PER_ELEMENT,n&&L){var m=s-E;I=o.subarray(m,m+F),s+=F}var v=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;for(var _=[],S=0;S<v;S++){c=B.getUint32(s,!0),s+=Uint32Array.BYTES_PER_ELEMENT;var O=u.a(o,s-E,c);s+=c,_.push(O),r[O]=p}var N=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var h=[];for(S=0;S<N;S++){c=B.getUint32(s,!0),s+=Uint32Array.BYTES_PER_ELEMENT;var R=u.a(o,s-E,c);s+=c,h.push(R)}var b=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var G=[],U=void 0,x=p;if(n)U=e[p]={};else{var K=r[p];for(x=K;a.e(K)&&K!==p;)x=K,K=r[K];a.e(x)&&(U=e[x])}var H=0;for(S=0;S<b;S++){c=B.getUint32(s,!0),s+=Uint32Array.BYTES_PER_ELEMENT;var w=u.a(o,s-E,c);if(s+=c,n){var V=w.split("_")[0];a.e(U[V])?H++:U[V]=S-H}var Y=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var J=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var k=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var W=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var Z=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;for(var X=[],z=0;z<Z;z++){c=B.getUint32(s,!0),s+=Uint32Array.BYTES_PER_ELEMENT;var Q=u.a(o,s-E,c);s+=c;var j=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var q=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var $=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT,X.push({geoName:Q,offset:j,count:q,texUnitIndex:$})}G.push({subName:w,offsetX:Y,offsetY:J,width:k,height:W,subVertexOffsetArr:X})}fe(U,t,G,l),a.e(I)&&g===f.S3MPixelFormat.CRN_DXT5&&ut&&(I=Pt({data:I},C).bufferView),i[p]={id:p,rootTextureName:x,width:T,height:D,compressType:g,size:F,format:M,textureData:I,subTexInfos:G,requestNames:h}}for(var Q in l)l.hasOwnProperty(Q)&&ce(t[Q].vertexPackage,l[Q])}(F,n,A,o,0,(O=Nt(i,_,r)).buffer,i,O.dataViewByteOffset,G,E),r=O.byteOffset;var U=i.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var x=C.subarray(r,r+U),K=u.a(x);r+=U;var H=JSON.parse(K);(3===I&&(S=i.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT),(S&ft)==ft)&&(de((O=Nt(i,_,r)).buffer,i,O.dataViewByteOffset,F,I,E),r=O.byteOffset);if(1==I){var w=R.pageLods,V=!0;for(P=0;P<w.length;P++){var Y=w[P];V=""===Y.childTile;for(var J=Y.geodes,k=0;k<J.length;k++)for(var W=J[k].skeletonNames,Z=0;Z<W.length;Z++){var X=W[Z];if(V){var z=F[X].vertexPackage;z.boundingSphere=$.calcBoundingSphereInWorker(1,z)}}}}B[y]={result:!0,groupNode:R,geoPackage:F,matrials:H,texturePackage:G,version:N.S3M4,dataVersion:I,rootBatchIdMap:n,ancestorMap:A},v<e&&Te(t,e,v,n,A,!1,B,E)}function De(e,r){var n=e.buffer;if($t=e.ellipsoid,e.isOSGB){if(a.e(It)||new Promise((function(e,r){t(["./OSGBToS3M-f8fa8fe0"],e,r)})).then((function(t){(It=t.default).onRuntimeInitialized=function(){mt=!0},vt=It.cwrap("OSGBToS3MB","number",["number","number","number","number"])})),!mt)return null;var A;switch(e.suffix){case"dae":case"DAE":A=4;break;case"x":case"X":A=2;break;default:A=0}n=function(t,e,r){var a=It._malloc(20*e),n=It._malloc(Uint8Array.BYTES_PER_ELEMENT*e);It.HEAPU8.set(t,n/Uint8Array.BYTES_PER_ELEMENT);var A=vt(n,e,a,r),o=new Uint8Array(It.HEAPU8.buffer,a,A);return t=null,t=new Uint8Array(o).buffer,It._free(a),It._free(n),t}(new Uint8Array(n),n.byteLength,A)}var o=e.isS3MZ,B=e.fileType,E=e.supportCompressType,i=e.bVolume,C=e.isS3MBlock,s=e.modelMatrix,y=e.materialType,P=e.isCoverImageryLayer,c=e.transformPar,p=null,d=null,T=null;if(i&&e.volbuffer.byteLength<8&&(i=!1),i){var g=e.volbuffer,F=new Uint8Array(g,8),I=L.pako.inflate(F).buffer,M=new Float64Array(I,0,1),m=new Uint32Array(I,48,1);if(0===M[0]||3200===m[0]||3201===m[0]){var v=0;0==M[0]&&(v=8),r.push(I);var _=new Float64Array(I,v,6),S=_[0],O=_[1],h=_[2],R=_[3],b=_[4]<_[5]?_[4]:_[5],G=_[4]>_[5]?_[4]:_[5];d={left:S,top:O,right:h,bottom:R,minHeight:b,maxHeight:G,width:(p=new Ot(S,R,h,O,b,G)).width,length:p.length,height:p.height};var U=new Uint32Array(I,48+v,7),x=U[0],K=U[1],H=U[2],w=U[3];T={nFormat:x,nSideBlockCount:K,nBlockLength:H,nLength:w,nWidth:U[4],nHeight:U[5],nDepth:U[6],imageArray:new Uint8Array(I,76+v,w*w*4)}}}var V=0,Y={};Y.ignoreNormal=e.ignoreNormal;var J=e.rootBatchIdMap||{},k=e.ancestorMap||{},W={},Z=new DataView(n),X=Z.getFloat32(V,!0);if(V+=Float32Array.BYTES_PER_ELEMENT,C)return Z.getUint32(V,!0),V+=Uint32Array.BYTES_PER_ELEMENT,Te(n,n.byteLength,V,J,k,e.isRoot,W,r),W;var z,Q=!1,j=0;if(X>=3&&(j=Z.getUint32(V,!0),V+=Uint32Array.BYTES_PER_ELEMENT),X>=2&&(z=Z.getUint32(V,!0),V+=Uint32Array.BYTES_PER_ELEMENT),Le(X-1)||Le(X-2)||Le(X-3)||X>2.09&&X<2.11){var q=Z.getUint32(V,!0);V+=Uint32Array.BYTES_PER_ELEMENT;var tt=new Uint8Array(n,V,q);X>=3&&0===j?n=tt.buffer:(n=!0===Mt?function(t,e){var r=e||4*t.length,a=D.unzip._malloc(Uint8Array.BYTES_PER_ELEMENT*r),n=new Uint8Array(r);D.unzip.HEAPU8.set(n,a/Uint8Array.BYTES_PER_ELEMENT);var A,o=D.unzip._malloc(Uint8Array.BYTES_PER_ELEMENT*t.length);for(D.unzip.HEAPU8.set(t,o/Uint8Array.BYTES_PER_ELEMENT);0==(A=_t(a,r,o,t.length));)St(a),r*=4,a=D.unzip._malloc(Uint8Array.BYTES_PER_ELEMENT*r),n=new Uint8Array(r),D.unzip.HEAPU8.set(n,a/Uint8Array.BYTES_PER_ELEMENT);var B=new Uint8Array(D.unzip.HEAPU8.buffer,a,A);t=null,n=null;var E=new Uint8Array(B).buffer;return St(a),St(o),E}(tt,z):L.pako.inflate(tt).buffer,V=0),r.push(n),Z=new DataView(n)}else if(X>1.199&&X<1.201){q=Z.getUint32(V,!0);V+=Uint32Array.BYTES_PER_ELEMENT,r.push(n)}else{Q=!0,V=0;q=Z.getInt32(V,!0);if(V+=Int32Array.BYTES_PER_ELEMENT,V+=Uint8Array.BYTES_PER_ELEMENT*q,o){Z.getUint32(V,!0),V+=Uint32Array.BYTES_PER_ELEMENT;F=new Uint8Array(n,V);n=L.pako.inflate(F).buffer,r.push(n),Z=new DataView(n),V=0}}var et=Z.getUint32(V,!0),rt=Nt(Z,n,V+=Uint32Array.BYTES_PER_ELEMENT),at=rt.buffer;V=rt.byteOffset;var nt={},At=Pe(X,at,Z,rt.dataViewByteOffset,nt,c),ot=V%4;0!==ot&&(V+=4-ot);var Bt=X>2.09&&3!==X;if(ie((rt=Nt(Z,n,V)).buffer,Z,rt.dataViewByteOffset,Y,Q,r,Bt,X,s,nt,P,e.fileType,c),V=rt.byteOffset,Bt)for(var Et=0;Et<At.pageLods.length;Et++)for(var it=At.pageLods[Et],Ct=it.geodes,st=0;st<Ct.length;st++)for(var yt=Ct[st].skeletonNames,lt=0;lt<yt.length;lt++){var ut=yt[lt];a.e(Y[ut].max)&&(a.e(it.max)?(it.max.x=Math.max(Y[ut].max.x,it.max.x),it.max.y=Math.max(Y[ut].max.y,it.max.y),it.max.z=Math.max(Y[ut].max.z,it.max.z),it.min.x=Math.min(Y[ut].min.x,it.min.x),it.min.y=Math.min(Y[ut].min.y,it.min.y),it.min.z=Math.min(Y[ut].min.z,it.min.z)):(it.max=Y[ut].max,it.min=Y[ut].min))}3!==X&&((rt=Nt(Z,n,V)).buffer,V=rt.byteOffset);var Pt={};!function(t,e,r,a,n,A){var o=0,B=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;for(var E=0;E<B;E++){var i=ht(r,a,e,o),C=i.string,s=(o=i.bytesOffset)%4;0!==s&&(o+=4-s);var y=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var u=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var P=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var c=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var p=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var d=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var L=e.subarray(o,o+p);o+=p;var T=null,D=c;c===l.S3MCompressType.enrS3TCDXTN&&1!=t?(l.L.decode(T,u,P,L,d),T=d>f.S3MPixelFormat.BGR||d===f.S3MPixelFormat.LUMINANCE_ALPHA?new Uint8Array(u*P*4):new Uint16Array(u*P),l.L.decode(T,u,P,L,d),A.push(T.buffer),c=0):T=L,n[C]={id:C,width:u,height:P,compressType:c,oriCompressType:D,nFormat:d,imageBuffer:T,mipmapLevel:y}}}(E,(rt=Nt(Z,n,V)).buffer,Z,rt.dataViewByteOffset,Pt,r),V=rt.byteOffset;var ct=Z.getUint32(V,!0);V+=Uint32Array.BYTES_PER_ELEMENT;var pt=new Uint8Array(n).subarray(V,V+ct),dt=u.a(pt);V+=ct,dt=dt.replace(/\n\0/,"");var Lt=JSON.parse(dt);(3===X&&(et=Z.getUint32(V,!0),V+=Uint32Array.BYTES_PER_ELEMENT),(et&ft)==ft)&&de((rt=Nt(Z,n,V)).buffer,Z,rt.dataViewByteOffset,Y,X,r);if(1==X){var Tt=At.pageLods,Dt=!0;for(Et=0;Et<Tt.length;Et++){var gt=Tt[Et];Dt=""===gt.childTile;for(var Ft=gt.geodes,Rt=0;Rt<Ft.length;Rt++){yt=Ft[Rt].skeletonNames;for(var bt=0;bt<yt.length;bt++){var Gt=yt[bt];if(Dt){var Ut=Y[Gt].vertexPackage;Ut.boundingSphere=$.calcBoundingSphereInWorker(B,Ut)}}}}}return"BatchPBR"===y&&function(t,e,r,n){for(var A in delete t.ignoreNormal,t)if(t.hasOwnProperty(A)){var o=t[A],B=o.arrIndexPackage;if(B.length<1)continue;if(1===B.length||2===B.length&&13===B[1].primitiveType){var E=o.vertexPackage.attrLocation.aTextureCoordMatrix;if(void 0!==E){if((i=(N=o.vertexPackage.vertexAttributes[E]).typedArray)[0]<0)continue}else if(void 0!==(E=o.vertexPackage.attrLocation.aTextureCoordMatrix||o.vertexPackage.attrLocation.aTexCoord0)){N=o.vertexPackage.vertexAttributes[E];var i=new Float32Array(N.typedArray.buffer,N.typedArray.byteOffset,N.typedArray.byteLength/4);if(3===N.componentsPerAttribute&&i[2]<0)continue}}var C,s,y=0,u={},P=void 0;for(C=0,s=B.length;C<s;C++)13!==(h=B[C]).primitiveType?y+=0===h.indexType?h.indicesTypedArray.byteLength/2:h.indicesTypedArray.byteLength/4:P=B[C],0===C&&(u.indicesCount=0,u.indexType=B[C].indexType,u.primitiveType=B[C].primitiveType,u.materialCode=B[C].materialCode);u.indicesCount=y;var c=o.vertexPackage.verticesCount>65535?new Uint32Array(y):new Uint16Array(y),f=0;for(C=0,s=B.length;C<s;C++)if(13!==(h=B[C]).primitiveType){var p=0===h.indexType?Uint16Array:Uint32Array,d=0===h.indexType?h.indicesTypedArray.byteLength/2:h.indicesTypedArray.byteLength/4,L=new p(h.indicesTypedArray.buffer,h.indicesTypedArray.byteOffset,d);c.set(L,f),f+=L.length}u.indicesTypedArray=c,o.arrIndexPackage=[u],a.e(P)&&(o.arrIndexPackage.push(P),o.edgeGeometry=l._0x30c9ea.createEdgeDataByIndices(o.vertexPackage,P));var T=2*B.length*4,D=new Float32Array(T),g={};for(C=0,s=r.material.length;C<s;C++)g[(R=r.material[C].material).id]=R;for(C=0,s=B.length;C<s;C++)if(R=g[(h=B[C]).materialCode]){var F=R.pbrMetallicRoughness;if(F){D[8*C]=F.metallicFactor,D[8*C+1]=F.roughnessFactor,D[8*C+2]=R.alphaCutoff;var I=""===R.alphaMode?0:1,M="none"===R.cullMode?0:1;D[8*C+3]=M|I<<16,D[8*C+4]=F.emissiveFactor.x,D[8*C+5]=F.emissiveFactor.y,D[8*C+6]=F.emissiveFactor.z,D[8*C+7]=0,R.pbrIndex=C}}var m="PBRMaterialParam_"+A;for(C=0,s=r.material.length;C<s;C++)if((R=r.material[C].material).id===u.materialCode){R.textureunitstates.push({textureunitstate:{addressmode:{u:0,v:0,w:0},filteringoption:0,filtermax:2,filtermin:2,id:m,texmodmatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],url:""}});break}var v,_,S=o.vertexPackage,O=S.attrLocation.aTexCoord1;if(void 0!==O){var N=S.vertexAttributes[O];v=new Float32Array(2*S.verticesCount),N.typedArray=v}else v=new Float32Array(2*S.verticesCount),O=S.vertexAttributes.length,S.attrLocation.aTexCoord1=O,S.vertexAttributes.push({index:O,typedArray:v,componentsPerAttribute:2,componentDatatype:5126,offsetInBytes:0,strideInBytes:8,normalize:!1});for(n.push(v.buffer),void 0!==(O=S.attrLocation.aColor)&&(_=(N=S.vertexAttributes[O]).typedArray),C=0,s=B.length;C<s;C++){var h,R;if((R=g[(h=B[C]).materialCode])&&R.pbrMetallicRoughness)for(var b=R.pbrMetallicRoughness.baseColor,G=void 0!==_,U=R.pbrIndex,x=(c=h.indicesTypedArray,{}),K=0,H=(c=0===h.indexType?new Uint16Array(c.buffer,c.byteOffset,c.byteLength/2):new Uint32Array(c.buffer,c.byteOffset,c.byteLength/4)).length;K<H;K++){var w=c[K];v[2*w]=U,G&&void 0===x[w]&&(x[w]=!0,_[4*w]*=b.x,_[4*w+1]*=b.y,_[4*w+2]*=b.z,_[4*w+3]*=b.w)}}e[m]={id:m,width:2*B.length,height:1,compressType:0,nFormat:25,imageBuffer:D,mipmapLevel:0}}}(Y,Pt,Lt,r),{result:!0,groupNode:At,geoPackage:Y,matrials:Lt,texturePackage:Pt,version:N.S3M4,dataVersion:X,volImageBuffer:T,volBounds:d}}function ge(){a.e(yt)&&a.e(ct)&&(yt.onRuntimeInitialized=function(){ut=!0},self.onmessage=T(De),self.postMessage(!0))}return function(e){if("undefined"==typeof WebAssembly)return self.onmessage=T(De),void self.postMessage(!0);var r=e.data.webAssemblyConfig;return a.e(r)?n.s.isInternetExplorer()?t([A.n$1("ThirdParty/Workers/ie-webworker-promise-polyfill.js")],(function(e){return self.Promise=e,-1!==r.modulePath.indexOf("crunch")?t([r.modulePath],(function(t){a.e(r.wasmBinaryFile)?(a.e(t)||(t=self.Module),yt=t,ge()):(yt=t,ge())})):t([r.modulePath],(function(t){a.e(r.wasmBinaryFile)?(a.e(t)||(t=self.DracoDecoderModule),t(r).then((function(t){ct=t,ge()}))):(ct=t(),ge())}))})):-1!==r.modulePath.indexOf("crunch")?t([r.modulePath],(function(t){a.e(r.wasmBinaryFile)?(a.e(t)||(t=self.Module),yt=t,ge()):(yt=t,ge())})):t([r.modulePath],(function(t){a.e(r.wasmBinaryFile)?(a.e(t)||(t=self.DracoDecoderModule),t(r).then((function(t){ct=t,ge()}))):(ct=t(),ge())})):void 0}}));
