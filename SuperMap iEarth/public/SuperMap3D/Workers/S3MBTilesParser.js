define(["require","./arrayFill-0e93951b","./Check-737bd4ec","./FeatureDetection-07e177c7","./buildModuleUrl-9403d69d","./Cartesian2-54f49cd5","./Cartographic-9ee1f1bd","./Cartesian4-6d2e270a","./Color-1274f10e","./ComponentDatatype-94b9147c","./CompressedTextureBuffer-2887af78","./when-7d8885d2","./S3MEdgeProcessor-f55a84b7","./getStringFromTypedArray-b22242fb","./PixelFormat-2a9a60eb","./RuntimeError-f53bcb51","./S3MPixelFormat-4f2b7689","./IndexDatatype-cb5f74b7","./BoundingRectangle-0828d65a","./pako_inflate-f73548c4","./createTaskProcessorWorker","./unzip-7fd7fbf8","./Math-4ffce144","./WebGLConstants-6b41cc89","./Event-1c0f5ff4"],(function(t,e,r,a,n,A,i,o,B,E,C,s,y,l,d,u,f,P,p,c,T,L,D,g,F){"use strict";function M(t,e,r){if("function"==typeof t.slice)return t.slice(e,r);for(var n=Array.prototype.slice.call(t,e,r),A=a.FeatureDetection.typedArrayTypes,i=A.length,o=0;o<i;++o)if(t instanceof A[o]){n=new A[o](n);break}return n}var m,I=Object.freeze({S3M:49,S3M4:1});function v(){}function _(t,e,r){var a,n=t.num_points(),A=r.num_components(),i=new m.AttributeQuantizationTransform;if(i.InitFromAttribute(r)){for(var o=new Array(A),B=0;B<A;++B)o[B]=i.min_value(B);a={quantizationBits:i.quantization_bits(),minValues:o,range:i.range(),octEncoded:!1}}m.destroy(i),(i=new m.AttributeOctahedronTransform).InitFromAttribute(r)&&(a={quantizationBits:i.quantization_bits(),octEncoded:!0}),m.destroy(i);var C,y=n*A;C=s.defined(a)?function(t,e,r,a,n){var A,i;a.quantizationBits<=8?(i=new m.DracoUInt8Array,A=new Uint8Array(n),e.GetAttributeUInt8ForAllPoints(t,r,i)):(i=new m.DracoUInt16Array,A=new Uint16Array(n),e.GetAttributeUInt16ForAllPoints(t,r,i));for(var o=0;o<n;++o)A[o]=i.GetValue(o);return m.destroy(i),A}(t,e,r,a,y):function(t,e,r,a){var n,A;switch(r.data_type()){case 1:case 11:A=new m.DracoInt8Array,n=new Int8Array(a),e.GetAttributeInt8ForAllPoints(t,r,A);break;case 2:A=new m.DracoUInt8Array,n=new Uint8Array(a),e.GetAttributeUInt8ForAllPoints(t,r,A);break;case 3:A=new m.DracoInt16Array,n=new Int16Array(a),e.GetAttributeInt16ForAllPoints(t,r,A);break;case 4:A=new m.DracoUInt16Array,n=new Uint16Array(a),e.GetAttributeUInt16ForAllPoints(t,r,A);break;case 5:case 7:A=new m.DracoInt32Array,n=new Int32Array(a),e.GetAttributeInt32ForAllPoints(t,r,A);break;case 6:case 8:A=new m.DracoUInt32Array,n=new Uint32Array(a),e.GetAttributeUInt32ForAllPoints(t,r,A);break;case 9:case 10:A=new m.DracoFloat32Array,n=new Float32Array(a),e.GetAttributeFloatForAllPoints(t,r,A)}for(var i=0;i<a;++i)n[i]=A.GetValue(i);return m.destroy(A),n}(t,e,r,y);var l=E.ComponentDatatype.fromTypedArray(C);if(E.ComponentDatatype.getSizeInBytes(l)*A%4!=0){var d=function(t,e,r){var a=e,n=E.ComponentDatatype.getSizeInBytes(r),A=n*e,i=4*Math.ceil(A/4)-A;a=e+i/n;var o,B=t.length/e,C=B*a;t instanceof Uint16Array?o=new Uint16Array(C):t instanceof Int16Array?o=new Int16Array(C):console.log("convertArrayToMutiple4Array dont support array type.");var s,y=0;for(y=0;y<B;y++)for(s=0;s<a;s++)o[y*a+s]=s<e?t[y*e+s]:0;return{numComponents:a,vertexArray:o}}(C,A,l);C=d.vertexArray,A=d.numComponents}return{array:C,data:{componentsPerAttribute:A,componentDatatype:l,byteOffset:r.byte_offset(),byteStride:E.ComponentDatatype.getSizeInBytes(l)*A,normalized:r.normalized(),quantization:a}}}var S=new i.Cartesian3(40680631590769,40680631590769,40408299984661.445),O=new i.Cartesian3,N=new i.Cartesian3;function h(t,e,r,a){var n=Math.cos(e);O.x=n*Math.cos(t),O.y=n*Math.sin(t),O.z=Math.sin(e),O=i.Cartesian3.normalize(O,O),i.Cartesian3.multiplyComponents(S,O,N);var A=Math.sqrt(i.Cartesian3.dot(O,N));return N=i.Cartesian3.divideByScalar(N,A,N),O=i.Cartesian3.multiplyByScalar(O,r,O),s.defined(a)||(a=new i.Cartesian3),i.Cartesian3.add(N,O,a)}var R=new a.Matrix4,b=new a.Matrix4,G=new i.Cartesian3,x=new i.Cartographic;function U(t,e,r,n,B,C,l,d){var u=void 0,f=void 0,P=void 0,p=void 0,c=r.vertexAttributes,T=r.attrLocation;if(r.nCompressOptions=0,s.defined(n.posUniqueID)&&n.posUniqueID>=0){s.defined(d)||(r.nCompressOptions|=y.VertexCompressOption.SVC_Vertex);var L=e.GetAttribute(t,n.posUniqueID),D=_(t,e,L),g=D.data.componentsPerAttribute;r.verticesCount=D.array.length/g,r.vertCompressConstant=D.data.quantization.range/(1<<D.data.quantization.quantizationBits);var F=D.data.quantization.minValues;r.minVerticesValue=new o.Cartesian4(F[0],F[1],F[2],1),g>3&&(r.minVerticesValue.w=F[3]);var M=r.verticesCount;if(C&&(u=new i.Cartographic,f=new i.Cartographic,P=new Float32Array(2*M),p=new Float64Array(2*M)),s.defined(d)){var m=D.array,I=3===g?i.Cartesian3.unpackArray(m):o.Cartesian4.unpackArray(m);for(let t=0,e=I.length;t<e;t++){let e=I[t];i.Cartesian3.multiplyByScalar(e,r.vertCompressConstant,e),i.Cartesian3.add(e,r.minVerticesValue,e)}var v=a.Matrix4.multiply(d.sphereMatrix,d.geoMatrix,R),S=a.Matrix4.multiply(d.ellipsoidMatrix,d.geoMatrix,b);a.Matrix4.inverse(S,S);var O=new A.Ellipsoid(6378137,6378137,6378137);for(let t=0,e=I.length;t<e;t++){let e=I[t];a.Matrix4.multiplyByPoint(v,e,G);let r=O.cartesianToCartographic(G,x);C&&(p[2*t]=r.longitude,p[2*t+1]=r.latitude,0===t?(u.longitude=r.longitude,u.latitude=r.latitude,f.longitude=r.longitude,f.latitude=r.latitude):(u.longitude=Math.max(r.longitude,u.longitude),u.latitude=Math.max(r.latitude,u.latitude),f.longitude=Math.min(r.longitude,f.longitude),f.latitude=Math.min(r.latitude,f.latitude)));let n=h(r.longitude,r.latitude,r.height,G);a.Matrix4.multiplyByPoint(S,n,e)}var N=new Array(3*I.length);3===g?i.Cartesian3.packArray(I,N):o.Cartesian4.packArray(I,N),D.array=new Float32Array(N),D.data.componentDatatype=E.ComponentDatatype.FLOAT,D.data.byteStride=4*g}if(T.aPosition=c.length,c.push({index:T.aPosition,typedArray:D.array,componentsPerAttribute:g,componentDatatype:D.data.componentDatatype,offsetInBytes:D.data.byteOffset,strideInBytes:D.data.byteStride,normalize:D.data.normalized}),!s.defined(d)&&C)for(var U=new i.Cartesian3,K=new i.Cartesian3,H=new i.Cartographic,w=0;w<M;w++)a.Matrix4.multiplyByPoint(B,i.Cartesian3.fromElements(D.array[3*w]*r.vertCompressConstant+F[0],D.array[3*w+1]*r.vertCompressConstant+F[1],D.array[3*w+2]*r.vertCompressConstant+F[2],U),K),H=i.Cartographic.fromCartesian(K),p[2*w]=H.longitude,p[2*w+1]=H.latitude,0===w?(u.longitude=H.longitude,u.latitude=H.latitude,f.longitude=H.longitude,f.latitude=H.latitude):(u.longitude=Math.max(H.longitude,u.longitude),u.latitude=Math.max(H.latitude,u.latitude),f.longitude=Math.min(H.longitude,f.longitude),f.latitude=Math.min(H.latitude,f.latitude));if(C){for(w=0;w<M;w++)P[2*w]=p[2*w]-f.longitude,P[2*w+1]=p[2*w+1]-f.latitude;T.img=c.length,c.push({index:T.img,typedArray:P,componentsPerAttribute:2,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),l.max=u,l.min=f}}if(s.defined(n.normalUniqueID)&&n.normalUniqueID>=0){r.nCompressOptions|=y.VertexCompressOption.SVC_Normal;var V=e.GetAttribute(t,n.normalUniqueID),Y=_(t,e,V),J=Y.data.quantization;r.normalRangeConstant=(1<<J.quantizationBits)-1,T.aNormal=c.length,c.push({index:T.aNormal,typedArray:Y.array,componentsPerAttribute:Y.data.componentsPerAttribute,componentDatatype:Y.data.componentDatatype,offsetInBytes:Y.data.byteOffset,strideInBytes:Y.data.byteStride,normalize:Y.data.normalized})}if(s.defined(n.colorUniqueID)&&n.colorUniqueID>=0){r.nCompressOptions|=y.VertexCompressOption.SVC_VertexColor;var k=e.GetAttribute(t,n.colorUniqueID),W=_(t,e,k);T.aColor=c.length,c.push({index:T.aColor,typedArray:W.array,componentsPerAttribute:W.data.componentsPerAttribute,componentDatatype:W.data.componentDatatype,offsetInBytes:W.data.byteOffset,strideInBytes:W.data.byteStride,normalize:W.data.normalized})}for(w=0;w<n.texCoordUniqueIDs.length;w++){r.texCoordCompressConstant=[],r.minTexCoordValue=[];var Z=n.texCoordUniqueIDs[w];if(!(Z<0)){var X=e.GetAttribute(t,Z),z=_(t,e,X);if(s.defined(z.data.quantization)){r.nCompressOptions|=y.VertexCompressOption.SVC_TexutreCoord,r.texCoordCompressConstant.push(z.data.quantization.range/(1<<z.data.quantization.quantizationBits));F=z.data.quantization.minValues;r.minTexCoordValue.push(new A.Cartesian2(F[0],F[1]))}var Q="aTexCoord"+w;T[Q]=c.length,c.push({index:T[Q],typedArray:z.array,componentsPerAttribute:z.data.componentsPerAttribute,componentDatatype:z.data.componentDatatype,offsetInBytes:z.data.byteOffset,strideInBytes:z.data.byteStride,normalize:z.data.normalized}),r.textureCoordIsW=!0}}for(w=0;w<n.vertexAttrUniqueIDs.length;w++){var j=n.vertexAttrUniqueIDs[w];if(!(j<0)){var q=e.GetAttribute(t,j),$=_(t,e,q);T.aVertexWeight=c.length,c.push({index:T.aVertexWeight,typedArray:$.array,componentsPerAttribute:$.data.componentsPerAttribute,componentDatatype:$.data.componentDatatype,offsetInBytes:$.data.byteOffset,strideInBytes:$.data.byteStride,normalize:$.data.normalized}),r.customVertexAttribute={VertexWeight:0}}}}v.dracoDecodePointCloud=function(t,e,r,a,n){for(var A=new(m=t).Decoder,i=["POSITION","NORMAL","COLOR"],o=0;o<i.length;++o)A.SkipAttributeTransform(m[i[o]]);var B=new m.DecoderBuffer;if(B.Init(e,r),A.GetEncodedGeometryType(B)!==m.POINT_CLOUD)throw new u.RuntimeError("Draco geometry type must be POINT_CLOUD.");var E=new m.PointCloud,C=A.DecodeBufferToPointCloud(B,E);if(!C.ok()||0===E.ptr)throw new u.RuntimeError("Error decoding draco point cloud: "+C.error_msg());m.destroy(B),U(E,A,a,n),m.destroy(E),m.destroy(A)},v.dracoDecodeMesh=function(t,e,r,n,A,i,o,B,E,C){for(var s=new(m=t).Decoder,y=["POSITION","NORMAL","COLOR","TEX_COORD"],l=0;l<y.length;++l)s.SkipAttributeTransform(m[y[l]]);var d=new m.DecoderBuffer;if(d.Init(e,r),s.GetEncodedGeometryType(d)!==m.TRIANGULAR_MESH)throw new u.RuntimeError("Unsupported draco mesh geometry type.");var f=new m.Mesh;if(!s.DecodeBufferToMesh(d,f).ok()||0===f.ptr)return!1;m.destroy(d),U(f,s,n,i,o,B,E,C);var p=function(t,e){for(var r=t.num_points(),a=t.num_faces(),n=new m.DracoInt32Array,A=3*a,i=P.IndexDatatype.createTypedArray(r,A),o=0,B=0;B<a;++B)e.GetFaceFromMesh(t,B,n),i[o+0]=n.GetValue(0),i[o+1]=n.GetValue(1),i[o+2]=n.GetValue(2),o+=3;var E=P.IndexDatatype.UNSIGNED_SHORT;return i instanceof Uint32Array&&(E=P.IndexDatatype.UNSIGNED_INT),m.destroy(n),{typedArray:i,numberOfIndices:A,indexDataType:E}}(f,s);A.indicesTypedArray=p.typedArray,A.indicesCount=p.numberOfIndices,A.indexType=p.indexDataType,A.primitiveType=a.PrimitiveType.TRIANGLES,m.destroy(f),m.destroy(s)};var K=Object.freeze({OSGBFile:0,OSGBCacheFile:1,ClampGroundPolygon:2,ClampObjectPolygon:3,ClampGroundLine:4,ClampObjectLine:5,IconPoint:6,Text:7,PointCloudFile:8,ExtendRegion3D:9,ExtendClampPolygonCache:10,PolylineEffect:11,RegionEffect:12,ClampGroundAndObjectLineCache:13,ClampGroundRealtimeRasterCache:14});function H(){}function w(t){var e=new n.BoundingSphere,r=t.instanceBounds;if(!s.defined(r))return e;var a=new i.Cartesian3(r[0],r[1],r[2]),A=new i.Cartesian3(r[3],r[4],r[5]),o=i.Cartesian3.lerp(a,A,.5,new i.Cartesian3),B=i.Cartesian3.distance(o,a);return e.center=o,e.radius=B,e}function V(t){var e,r,a=new n.BoundingSphere,A=new i.Cartesian3,o=t.vertexAttributes[0],B=o.componentsPerAttribute,E=s.defined(t.nCompressOptions)&&(t.nCompressOptions&y.VertexCompressOption.SVC_Vertex)===y.VertexCompressOption.SVC_Vertex,C=1;E?(C=t.vertCompressConstant,e=new i.Cartesian3(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),r=new Uint16Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/2)):r=new Float32Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/4);for(var l=[],d=0;d<t.verticesCount;d++)i.Cartesian3.fromArray(r,B*d,A),E&&(A=i.Cartesian3.multiplyByScalar(A,C,A),A=i.Cartesian3.add(A,e,A)),l.push(i.Cartesian3.clone(A));return n.BoundingSphere.fromPoints(l,a),l.length=0,a}function Y(t){var e,r,a=new n.BoundingSphere,A=new i.Cartesian3,o=s.defined(t.nCompressOptions)&&(t.nCompressOptions&y.VertexCompressOption.SVC_Vertex)===y.VertexCompressOption.SVC_Vertex,B=t.vertexAttributes[0],E=B.componentsPerAttribute,C=1;o?(C=t.vertCompressConstant,r=new i.Cartesian3(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),e=new Uint16Array(B.typedArray.buffer,B.typedArray.byteOffset,B.typedArray.byteLength/2)):e=new Float32Array(B.typedArray.buffer,B.typedArray.byteOffset,B.typedArray.byteLength/4);for(var l=[],d=0;d<t.verticesCount;d++)i.Cartesian3.fromArray(e,E*d,A),o&&(A=i.Cartesian3.multiplyByScalar(A,C,A),A=i.Cartesian3.add(A,r,A)),l.push(i.Cartesian3.clone(A));return n.BoundingSphere.fromPoints(l,a),l.length=0,a}function J(t){var e,r,a=s.defined(t.nCompressOptions)&&(t.nCompressOptions&y.VertexCompressOption.SVC_Vertex)===y.VertexCompressOption.SVC_Vertex,A=new n.BoundingSphere,B=new i.Cartesian3,E=new i.Cartesian3,C=t.vertexAttributes[0],l=C.componentsPerAttribute,d=t.attrLocation.aPosition,u=t.vertexAttributes[d],f=t.attrLocation.aTexCoord5,P=t.vertexAttributes[f],p=P.componentsPerAttribute;a?(l=3,p=3,e=W(t,u),r=function(t,e,r){for(var a,n,A,i=e.componentsPerAttribute,B=t.texCoordCompressConstant[r],E=new o.Cartesian4(t.minTexCoordValue[r].x,t.minTexCoordValue[r].y,t.minTexCoordValue[r].z,t.minTexCoordValue[r].w),C=new Uint16Array(e.typedArray.buffer,e.typedArray.byteOffset,e.typedArray.byteLength/2),s=new Float32Array(3*t.verticesCount),y=0;y<t.verticesCount;y++)a=C[i*y]*B+E.x,n=C[i*y+1]*B+E.y,A=C[i*y+2]*B+E.z,s[3*y]=a,s[3*y+1]=n,s[3*y+2]=A;return s}(t,P,5)):(e=new Float32Array(C.typedArray.buffer,C.typedArray.byteOffset,C.typedArray.byteLength/4),r=new Float32Array(P.typedArray.buffer,P.typedArray.byteOffset,P.typedArray.byteLength/4));for(var c=[],T=0;T<t.verticesCount;T++)i.Cartesian3.fromArray(e,l*T,B),i.Cartesian3.fromArray(r,p*T,E),i.Cartesian3.add(B,E,B),c.push(i.Cartesian3.clone(B));return n.BoundingSphere.fromPoints(c,A),c.length=0,A}function k(t){var e=a.PrimitiveType.TRIANGLES;switch(t){case 1:e=a.PrimitiveType.POINTS;break;case 2:e=a.PrimitiveType.LINES;break;case 3:e=a.PrimitiveType.LINE_STRIP;break;case 4:e=a.PrimitiveType.TRIANGLES}return e}function W(t,e){for(var r,a,n,A=e.componentsPerAttribute,o=t.vertCompressConstant,B=new i.Cartesian3(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),E=new Uint16Array(e.typedArray.buffer,e.typedArray.byteOffset,e.typedArray.byteLength/2),C=new Float32Array(3*t.verticesCount),s=0;s<t.verticesCount;s++)r=E[A*s]*o+B.x,a=E[A*s+1]*o+B.y,n=E[A*s+2]*o+B.z,C[3*s]=r,C[3*s+1]=a,C[3*s+2]=n;return C}H.calcBoundingSphereInWorker=function(t,e){return e.instanceIndex>-1?w(e):s.defined(e.clampRegionEdge)?J(e):t>=K.ClampGroundPolygon&&t<=K.ClampObjectLine?Y(e):t==K.ClampGroundAndObjectLineCache?J(e):V(e)},H.calcBoundingSphere=function(t,e,r){var a,A=t._fileType;return a=e.instanceIndex>-1?w(e):s.defined(e.clampRegionEdge)?J(e):A>=K.ClampGroundPolygon&&A<=K.ClampObjectLine?Y(e):A==K.ClampGroundAndObjectLineCache?J(e):V(e),n.BoundingSphere.transform(a,r,a),a},H.calcBoundingRectangle=function(t,e){var r;return t._fileType===K.ClampGroundPolygon&&(r=function(t){var e,r,a=s.defined(t.nCompressOptions)&&(t.nCompressOptions&y.VertexCompressOption.SVC_Vertex)===y.VertexCompressOption.SVC_Vertex,n=new p.BoundingRectangle,o=t.vertexAttributes[0],B=o.componentsPerAttribute,E=1;a?(E=t.vertCompressConstant,r=new i.Cartesian3(t.minVerticesValue.x,t.minVerticesValue.y,t.minVerticesValue.z),e=new Uint16Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/2)):e=new Float32Array(o.typedArray.buffer,o.typedArray.byteOffset,o.typedArray.byteLength/4);for(var C=[],l=0;l<t.verticesCount;l++){var d=e[B*l],u=e[B*l+1];a&&(d=E*d+r.x,u=E*u+r.y),C.push(new A.Cartesian2(d,u))}return p.BoundingRectangle.fromPoints(C,n),C.length=0,n}(e)),r},H.createEdge=function(t,e){if(!(e.length<1)){var r=function(t){for(var e=[],r=t.length,n=0;n<r;n++){var A=k(t[n].primitiveType);A!==a.PrimitiveType.LINES&&A!==a.PrimitiveType.LINE_STRIP||e.push(t[n])}return e}(e);if(0!=r.length){var n,A=function(t){for(var e=0,r=t.length,n=0;n<r;n++){var A=t[n],i=k(A.primitiveType);i==a.PrimitiveType.LINES?e+=A.indicesCount/2:i==a.PrimitiveType.LINE_STRIP&&e++}return e}(r),o=t.attrLocation.aPosition,B=t.vertexAttributes[o],C=s.defined(t.nCompressOptions)&&(t.nCompressOptions&y.VertexCompressOption.SVC_Vertex)===y.VertexCompressOption.SVC_Vertex,l=B.componentsPerAttribute;C?(l=3,n=W(t,B)):n=new Float32Array(B.typedArray.buffer,B.typedArray.byteOffset,B.typedArray.byteLength/4);for(var d=function(t){for(var e=0,r=t.length,a=0;a<r;a++)e+=t[a].indicesCount;return e}(r),u=function(t,e,r){for(var n,A=[],o=r.length,B=0;B<o;B++){var E,C=r[B];E=0===C.indexType?new Uint16Array(C.indicesTypedArray.buffer,C.indicesTypedArray.byteOffset,C.indicesTypedArray.byteLength/2):new Uint32Array(C.indicesTypedArray.buffer,C.indicesTypedArray.byteOffset,C.indicesTypedArray.byteLength/4);var s=k(C.primitiveType);if(s==a.PrimitiveType.LINES)for(n=0;n<C.indicesCount;n+=2){var y=[],l=new i.Cartesian3;l.x=t[E[n]*e],l.y=t[E[n]*e+1],l.z=t[E[n]*e+2],y.push(l);var d=new i.Cartesian3;d.x=t[E[n+1]*e],d.y=t[E[n+1]*e+1],d.z=t[E[n+1]*e+2],y.push(d),A.push(y)}else if(s==a.PrimitiveType.LINE_STRIP){for(y=[],n=0;n<C.indicesCount;n++){var u=new i.Cartesian3;u.x=t[E[n]*e],u.y=t[E[n]*e+1],u.z=t[E[n]*e+2],y.push(u)}A.push(y)}}return A}(n,l,r),f=4*d-4*A,P=new Float32Array(3*f),p=new Float32Array(3*f),c=new Float32Array(3*f),T=new Int8Array(2*f),L=0,D=0;D<A;D++){for(var g=u[D].length,F=0;F<g;F++){var M=4*L-4*D,m=3*M+12*F,I=u[D][F];0!=F&&(P[m-6]=I.x,P[m-5]=I.y,P[m-4]=I.z,P[m-3]=I.x,P[m-2]=I.y,P[m-1]=I.z),F!=g-1&&(P[m]=I.x,P[m+1]=I.y,P[m+2]=I.z,P[m+3]=I.x,P[m+4]=I.y,P[m+5]=I.z);var v=I;F+1<g&&(v=u[D][F+1]),0!=F&&(c[m-6]=v.x,c[m-5]=v.y,c[m-4]=v.z,c[m-3]=v.x,c[m-2]=v.y,c[m-1]=v.z),F!=g-1&&(c[m]=v.x,c[m+1]=v.y,c[m+2]=v.z,c[m+3]=v.x,c[m+4]=v.y,c[m+5]=v.z);var _=I;F>=1&&(_=u[D][F-1]),0!=F&&(p[m-6]=_.x,p[m-5]=_.y,p[m-4]=_.z,p[m-3]=_.x,p[m-2]=_.y,p[m-1]=_.z),F!=g-1&&(p[m]=_.x,p[m+1]=_.y,p[m+2]=_.z,p[m+3]=_.x,p[m+4]=_.y,p[m+5]=_.z),m=2*M+8*F,0!=F&&(T[m-4]=-1,T[m-3]=-1,T[m-2]=1,T[m-1]=-1),F!=g-1&&(T[m]=-1,T[m+1]=1,T[m+2]=1,T[m+3]=1)}L+=u[D].length}var S={vertexAttributes:[],attrLocation:{}},O=S.vertexAttributes,N=S.attrLocation;S.instanceCount=0,S.instanceMode=0,N.aPosition=0,O.push({index:N.aPosition,typedArray:P,componentsPerAttribute:3,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aNormal=1,O.push({index:N.aNormal,typedArray:p,componentsPerAttribute:3,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aTexCoord0=2,O.push({index:N.aTexCoord0,typedArray:c,componentsPerAttribute:3,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aTexCoord1=3,O.push({index:N.aTexCoord1,typedArray:T,componentsPerAttribute:2,componentDatatype:E.ComponentDatatype.BYTE,offsetInBytes:0,strideInBytes:2*Int8Array.BYTES_PER_ELEMENT,normalize:!1});for(var h=[],R=0;R<u.length;R++)h.push(u[R].length);var b=function(t,e,r,n){var A,i={};i.indicesCount=6*(t-e),i.indexType=n>65535?1:0,i.primitiveType=a.PrimitiveType.TRIANGLES,A=0===i.indexType?new Uint16Array(i.indicesCount):new Uint32Array(i.indicesCount);for(var o=0,B=0;B<e;B++){for(var E=0;E<r[B]-1;E++)A[6*(o-B+E)]=4*(o-B+E),A[6*(o-B+E)+1]=4*(o-B+E)+2,A[6*(o-B+E)+2]=4*(o-B+E)+1,A[6*(o-B+E)+3]=4*(o-B+E)+1,A[6*(o-B+E)+4]=4*(o-B+E)+2,A[6*(o-B+E)+5]=4*(o-B+E)+3;o+=r[B]}return i.indicesTypedArray=A,i}(d,A,h,f);return{vertexPackage:S,indexPackage:b}}}};var Z,X,z=function(){var t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};var r,a="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";WebAssembly.validate(t)&&(a="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");var n=WebAssembly.instantiate(function(t){for(var r=new Uint8Array(t.length),a=0;a<t.length;++a){var n=t.charCodeAt(a);r[a]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}var A=0;for(a=0;a<t.length;++a)r[A++]=r[a]<60?e[r[a]]:64*(r[a]-60)+r[++a];return r.buffer.slice(0,A)}(a),{}).then((function(t){(r=t.instance).exports.__wasm_call_ctors()}));function A(t,e,a,n,A,i){var o=r.exports.sbrk,B=a+3&-4,E=o(B*n),C=o(A.length),s=new Uint8Array(r.exports.memory.buffer);s.set(A,C);var y=t(E,a,n,C,A.length);if(0==y&&i&&i(E,B,n),e.set(s.subarray(E,E+a*n)),o(E-o(0)),0!=y)throw new Error("Malformed buffer data: "+y)}var i={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},o={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:n,supported:!0,decodeVertexBuffer:function(t,e,a,n,o){A(r.exports.meshopt_decodeVertexBuffer,t,e,a,n,r.exports[i[o]])},decodeIndexBuffer:function(t,e,a,n){A(r.exports.meshopt_decodeIndexBuffer,t,e,a,n)},decodeIndexSequence:function(t,e,a,n){A(r.exports.meshopt_decodeIndexSequence,t,e,a,n)},decodeGltfBuffer:function(t,e,a,n,B,E){A(r.exports[o[B]],t,e,a,n,r.exports[i[E]])}}}(),Q=1,j=2,q={};q[0]=d.PixelFormat.RGB_DXT1,q[Q]=d.PixelFormat.RGBA_DXT3,q[j]=d.PixelFormat.RGBA_DXT5;var $,tt=0,et=!1;function rt(t,e){var r=t.data,a=r.byteLength,n=new Uint8Array(r),A=$._malloc(a);!function(t,e,r,a){var n,A=r/4,i=a%4,o=new Uint32Array(t.buffer,0,(a-i)/4),B=new Uint32Array(e.buffer);for(n=0;n<o.length;n++)B[A+n]=o[n];for(n=a-i;n<a;n++)e[r+n]=t[n]}(n,$.HEAPU8,A,a);var i=$._crn_get_dxt_format(A,a),o=q[i];if(!s.defined(o))throw new u.RuntimeError("Unsupported compressed format.");var B,E=$._crn_get_levels(A,a),y=$._crn_get_width(A,a),l=$._crn_get_height(A,a),f=0;for(B=0;B<E;++B)f+=d.PixelFormat.compressedTextureSizeInBytes(o,y>>B,l>>B);if(tt<f&&(s.defined(Z)&&$._free(Z),Z=$._malloc(f),X=new Uint8Array($.HEAPU8.buffer,Z,f),tt=f),$._crn_decompress(A,a,Z,f,0,E),$._free(A),s.defaultValue(t.bMipMap,!1)){var P=X.slice(0,f);return e.push(P.buffer),new C.CompressedTextureBuffer(o,y,l,P)}var p=d.PixelFormat.compressedTextureSizeInBytes(o,y,l),c=X.subarray(0,p),T=new Uint8Array(p);return T.set(c,0),e.push(T.buffer),new C.CompressedTextureBuffer(o,y,l,T)}var at,nt=1,At=0,it=1,ot=2,Bt=3,Et=0,Ct=1,st=2;new B.Color;var yt,lt=!1,dt=!1,ut=null;if(s.defined(L.unzip)){L.unzip.onRuntimeInitialized=function(){lt=!0};var ft=L.unzip.cwrap("unzip","number",["number","number","number","number"]),Pt=L.unzip.cwrap("freePointer",null,["number"])}function pt(t,e,r,a,n,A){this.left=t,this.bottom=e,this.right=r,this.top=a,this.minHeight=n,this.maxHeight=A,this.width=r-t,this.length=a-e,this.height=A-n}function ct(t,e,r){var a=r,n=t.getUint32(a,!0),A=a+=Uint32Array.BYTES_PER_ELEMENT,i=new Uint8Array(e,a,n);return{dataViewByteOffset:A,byteOffset:a+=n*Uint8Array.BYTES_PER_ELEMENT,buffer:i}}function Tt(t,e,r,a){var n=t.getUint32(a+e,!0);a+=Uint32Array.BYTES_PER_ELEMENT;var A=r.subarray(a,a+n);return{string:l.getStringFromTypedArray(A),bytesOffset:a+=n}}function Lt(t,e,r,a,n,A){var i=r,o=t.getUint16(r+a,!0);i+=Uint16Array.BYTES_PER_ELEMENT,A||(i+=Uint16Array.BYTES_PER_ELEMENT);for(var B=0;B<o;B++){var C=t.getUint32(i+a,!0);i+=Uint32Array.BYTES_PER_ELEMENT;var s=t.getUint16(i+a,!0);if(i+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(i+a,!0),i+=Uint16Array.BYTES_PER_ELEMENT,20==s||35==s);else{var y=C*s*Float32Array.BYTES_PER_ELEMENT,l=e.subarray(i,i+y);i+=y;var d="aTexCoord"+B,u=n.vertexAttributes,f=n.attrLocation;f[d]=u.length,u.push({index:f[d],typedArray:l,componentsPerAttribute:s,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:s*Float32Array.BYTES_PER_ELEMENT,normalize:!1})}}return{bytesOffset:i}}function Dt(t,e,r,a,n){var A=r,i=t.getUint16(A+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,A+=Uint16Array.BYTES_PER_ELEMENT;for(var o=n.vertexAttributes,B=n.attrLocation,C=0;C<i;C++){var s=t.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var y=t.getUint16(A+a,!0);if(A+=Uint16Array.BYTES_PER_ELEMENT,16===y){A-=Uint16Array.BYTES_PER_ELEMENT;var l=s*(y*Float32Array.BYTES_PER_ELEMENT+Uint16Array.BYTES_PER_ELEMENT),d=e.subarray(A,A+l);A+=l;var u=new Uint8Array(Float32Array.BYTES_PER_ELEMENT*y*s);n.instanceCount=s,n.instanceMode=y,n.instanceBuffer=u,n.instanceIndex=1;for(var f=Float32Array.BYTES_PER_ELEMENT*y+Uint16Array.BYTES_PER_ELEMENT,P=0;P<s;P++){var p=P*f+Uint16Array.BYTES_PER_ELEMENT,c=d.subarray(p,p+f);u.set(c,P*(f-Uint16Array.BYTES_PER_ELEMENT))}T=16*Float32Array.BYTES_PER_ELEMENT,B.uv2=o.length,o.push({index:B.uv2,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:T,instanceDivisor:1}),B.uv3=o.length,o.push({index:B.uv3,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),B.uv4=o.length,o.push({index:B.uv4,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),B.secondary_colour=o.length,o.push({index:B.secondary_colour,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1})}else{t.getUint16(A+a,!0),A+=Uint16Array.BYTES_PER_ELEMENT;l=s*y*Float32Array.BYTES_PER_ELEMENT;if(17===y||29===y){var T;u=e.subarray(A,A+l);n.instanceCount=s,n.instanceMode=y,n.instanceBuffer=u,n.instanceIndex=1,17===y?(T=17*Float32Array.BYTES_PER_ELEMENT,B.uv2=o.length,o.push({index:B.uv2,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:T,instanceDivisor:1}),B.uv3=o.length,o.push({index:B.uv3,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),B.uv4=o.length,o.push({index:B.uv4,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),B.secondary_colour=o.length,o.push({index:B.secondary_colour,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),B.uv6=o.length,o.push({index:B.uv6,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1})):29===y&&(T=29*Float32Array.BYTES_PER_ELEMENT,B.uv1=o.length,o.push({index:B.uv1,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:T,instanceDivisor:1,byteLength:l}),B.uv2=o.length,o.push({index:B.uv2,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),B.uv3=o.length,o.push({index:B.uv3,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),B.uv4=o.length,o.push({index:B.uv4,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),B.uv5=o.length,o.push({index:B.uv5,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),B.uv6=o.length,o.push({index:B.uv6,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:20*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),B.uv7=o.length,o.push({index:B.uv7,componentsPerAttribute:3,componentDatatype:E.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:24*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),B.secondary_colour=o.length,o.push({index:B.secondary_colour,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:27*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}),B.uv9=o.length,o.push({index:B.uv9,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:28*Float32Array.BYTES_PER_ELEMENT,strideInBytes:T,instanceDivisor:1}))}else{var L=s*y;n.instanceBounds=new Float32Array(L);for(var D=0;D<L;D++)n.instanceBounds[D]=t.getFloat32(A+a+D*Float32Array.BYTES_PER_ELEMENT,!0)}A+=l}}return{bytesOffset:A}}var gt=new i.Cartesian3(40680631590769,40680631590769,40408299984661.445),Ft=new i.Cartesian3,Mt=new i.Cartesian3;function mt(t,e,r,a){var n=Math.cos(e);Ft.x=n*Math.cos(t),Ft.y=n*Math.sin(t),Ft.z=Math.sin(e),Ft=i.Cartesian3.normalize(Ft,Ft),i.Cartesian3.multiplyComponents(gt,Ft,Mt);var A=Math.sqrt(i.Cartesian3.dot(Ft,Mt));return Mt=i.Cartesian3.divideByScalar(Mt,A,Mt),Ft=i.Cartesian3.multiplyByScalar(Ft,r,Ft),s.defined(a)||(a=new i.Cartesian3),i.Cartesian3.add(Mt,Ft,a)}var It=new i.Cartesian3,vt=new i.Cartographic,_t=new a.Matrix4,St=new a.Matrix4;function Ot(t,e,r,n,B,C,y,l){var d=n,u=e.getUint32(d+r,!0);if(B.verticesCount=u,d+=Uint32Array.BYTES_PER_ELEMENT,u<=0)return{bytesOffset:d};var f=e.getUint16(d+r,!0);d+=Uint16Array.BYTES_PER_ELEMENT;var P=e.getUint16(d+r,!0);P=f*Float32Array.BYTES_PER_ELEMENT,d+=Uint16Array.BYTES_PER_ELEMENT;var p=u*f*Float32Array.BYTES_PER_ELEMENT,c=t.subarray(d,d+p);d+=p;var T=B.vertexAttributes,L=B.attrLocation,D=void 0,g=void 0;if(y){D=new i.Cartographic,g=new i.Cartographic;var F=new Float32Array(2*u),M=new Float64Array(2*u);if(s.defined(l)){var m=new Float32Array(c.byteLength/4),I=new Float32Array(c.buffer,c.byteOffset,c.byteLength/4);J=3===f?i.Cartesian3.unpackArray(I):o.Cartesian4.unpackArray(I);var v=a.Matrix4.multiply(l.sphereMatrix,l.geoMatrix,_t),_=a.Matrix4.multiply(l.ellipsoidMatrix,l.geoMatrix,St);a.Matrix4.inverse(_,_);for(var S=new A.Ellipsoid(6378137,6378137,6378137),O=0,N=0,h=J.length;N<h;N++){var R=J[N];a.Matrix4.multiplyByPoint(v,R,It);var b=mt((k=S.cartesianToCartographic(It,vt)).longitude,k.latitude,k.height,It);a.Matrix4.multiplyByPoint(_,b,R),3===f?(i.Cartesian3.pack(R,m,O),O+=3):(o.Cartesian4.pack(R,m,O),O+=4),M[2*N]=k.longitude,M[2*N+1]=k.latitude,0===N?(D.longitude=k.longitude,D.latitude=k.latitude,g.longitude=k.longitude,g.latitude=k.latitude):(D.longitude=Math.max(k.longitude,D.longitude),D.latitude=Math.max(k.latitude,D.latitude),g.longitude=Math.min(k.longitude,g.longitude),g.latitude=Math.min(k.latitude,g.latitude))}c=m}else{var G=new i.Cartesian3,x=new i.Cartesian3,U=new Float32Array(c.buffer,c.byteOffset,c.byteLength/4),K=new i.Cartographic;S=Ht?new A.Ellipsoid(6378137,6378137,6356752.314245179):new A.Ellipsoid(6378137,6378137,6378137);for(var H=0;H<u;H++)a.Matrix4.multiplyByPoint(C,i.Cartesian3.fromElements(U[3*H],U[3*H+1],U[3*H+2],G),x),K=S.cartesianToCartographic(x,vt),M[2*H]=K.longitude,M[2*H+1]=K.latitude,0===H?(D.longitude=K.longitude,D.latitude=K.latitude,g.longitude=K.longitude,g.latitude=K.latitude):(D.longitude=Math.max(K.longitude,D.longitude),D.latitude=Math.max(K.latitude,D.latitude),g.longitude=Math.min(K.longitude,g.longitude),g.latitude=Math.min(K.latitude,g.latitude))}for(H=0;H<u;H++)F[2*H]=M[2*H]-g.longitude,F[2*H+1]=M[2*H+1]-g.latitude;L.aPosition=T.length,T.push({index:L.aPosition,typedArray:c,componentsPerAttribute:f,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:P,normalize:!1}),L.img=T.length,T.push({index:L.img,typedArray:F,componentsPerAttribute:2,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1})}else{if(3===f&&s.defined(C)){x=new i.Cartesian3,U=new Float32Array(c.buffer,c.byteOffset,c.byteLength/4);for(var w=new Float32Array(c.byteLength/4+u),V=U.length,Y=(H=0,0);H<V;H+=3,Y+=4)w[Y]=U[H],w[Y+1]=U[H+1],w[Y+2]=U[H+2],a.Matrix4.multiplyByPoint(C,i.Cartesian3.fromElements(w[Y],w[Y+1],w[Y+2],G),x),w[Y+3]=i.Cartographic.fromCartesian(x).height;c=w,P=(f=4)*Float32Array.BYTES_PER_ELEMENT}if(s.defined(l)){var J;m=new Float32Array(c.byteLength/4),I=new Float32Array(c.buffer,c.byteOffset,c.byteLength/4);J=3===f?i.Cartesian3.unpackArray(I):o.Cartesian4.unpackArray(I);v=a.Matrix4.multiply(l.sphereMatrix,l.geoMatrix,_t),_=a.Matrix4.multiply(l.ellipsoidMatrix,l.geoMatrix,St);a.Matrix4.inverse(_,_);for(S=new A.Ellipsoid(6378137,6378137,6378137),O=0,N=0,h=J.length;N<h;N++){R=J[N];a.Matrix4.multiplyByPoint(v,R,It);var k;b=mt((k=S.cartesianToCartographic(It,vt)).longitude,k.latitude,k.height,It);a.Matrix4.multiplyByPoint(_,b,R),3===f?(i.Cartesian3.pack(R,m,O),O+=3):(o.Cartesian4.pack(R,m,O),O+=4)}c=m}L.aPosition=T.length,T.push({index:L.aPosition,typedArray:c,componentsPerAttribute:f,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:P,normalize:!1})}return{bytesOffset:d,cartographicBounds:{max:D,min:g}}}function Nt(t,e,r,a,n){var A=a,i=e.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,i<=0)return{bytesOffset:A};var o=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var B=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var C=i*o*Float32Array.BYTES_PER_ELEMENT,s=t.subarray(A,A+C);if(A+=C,!n.ignoreNormal){var y=n.vertexAttributes,l=n.attrLocation;l.aNormal=y.length,y.push({index:l.aNormal,typedArray:s,componentsPerAttribute:o,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:B,normalize:!1})}return{bytesOffset:A}}var ht={0:Uint32Array.BYTES_PER_ELEMENT,1:Float32Array.BYTES_PER_ELEMENT,2:Float64Array.BYTES_PER_ELEMENT};function Rt(t,e,r,a,n){var A,i=a,o=e.getUint32(i+r,!0);if(i+=Uint32Array.BYTES_PER_ELEMENT,n.verticesCount,o>0){e.getUint16(i+r,!0),i+=Uint16Array.BYTES_PER_ELEMENT,i+=2*Uint8Array.BYTES_PER_ELEMENT;var B=o*Uint8Array.BYTES_PER_ELEMENT*4;A=t.subarray(i,i+B),i+=B;var C=n.vertexAttributes,s=n.attrLocation;s.aColor=C.length,C.push({index:s.aColor,typedArray:A,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:4,normalize:!0})}return{bytesOffset:i}}function bt(t,e,r,a,n){var A=a,i=e.getUint32(A+r,!0);return A+=Uint32Array.BYTES_PER_ELEMENT,i<=0?{bytesOffset:A}:(e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT,A+=2*Uint8Array.BYTES_PER_ELEMENT,{bytesOffset:A+=i*Uint8Array.BYTES_PER_ELEMENT*4})}function Gt(t,e,r,a,n){var A=n,i=[],o=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var B=0;B<o;B++){var E={};3===t&&(r.getUint32(A+a,!0),A+=Uint32Array.BYTES_PER_ELEMENT);var C=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var s=r.getUint8(A+a,!0);A+=Uint8Array.BYTES_PER_ELEMENT,r.getUint8(A+a,!0),A+=Uint8Array.BYTES_PER_ELEMENT;var y=r.getUint8(A+a,!0);if(A+=Uint8Array.BYTES_PER_ELEMENT,A+=Uint8Array.BYTES_PER_ELEMENT,C>0){var l=0,d=null;1===s||3===s?(l=C*Uint32Array.BYTES_PER_ELEMENT,d=e.subarray(A,A+l)):(l=C*Uint16Array.BYTES_PER_ELEMENT,d=e.subarray(A,A+l),C%2!=0&&(l+=2)),E.indicesTypedArray=d,A+=l}E.indicesCount=C,E.indexType=s,E.primitiveType=y;var u=[],f=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var P=0;P<f;P++){var p=Tt(r,a,e,A),c=p.string;A=p.bytesOffset,u.push(c),E.materialCode=c}if(0===f&&(E.materialCode="OSGBEmpty"),i.push(E),0!==A%4)A+=4-A%4}return{bytesOffset:A,arrIndexPackage:i}}function xt(t,e,r,n,B,C,l,d,u){var f,P,p=n,c=e.getUint32(p+r,!0);return B.nCompressOptions=c,p+=Uint32Array.BYTES_PER_ELEMENT,(c&y.VertexCompressOption.SVC_Vertex)==y.VertexCompressOption.SVC_Vertex?(f=function(t,e,r,n,B,C){var y=n,l=e.getUint32(y+r,!0);if(B.verticesCount=l,y+=Uint32Array.BYTES_PER_ELEMENT,l<=0)return{bytesOffset:y};var d=e.getUint16(y+r,!0);y+=Uint16Array.BYTES_PER_ELEMENT;var u=e.getUint16(y+r,!0);u=d*Int16Array.BYTES_PER_ELEMENT,y+=Uint16Array.BYTES_PER_ELEMENT;var f=e.getFloat32(y+r,!0);y+=Float32Array.BYTES_PER_ELEMENT;var P=new o.Cartesian4;P.x=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,P.y=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,P.z=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,P.w=e.getFloat32(y+r,!0),y+=Float32Array.BYTES_PER_ELEMENT,B.vertCompressConstant=f,B.minVerticesValue=P;var p=l*d*Int16Array.BYTES_PER_ELEMENT,c=t.subarray(y,y+p);if(y+=p,s.defined(C)){var T=new Uint16Array(c.byteLength/2),L=new Uint16Array(c.buffer,c.byteOffset,c.byteLength/2),D=o.Cartesian4.unpackArray(L);for(let t=0,e=D.length;t<e;t++){let e=D[t];i.Cartesian3.multiplyByScalar(e,f,e),i.Cartesian3.add(e,P,e)}var g=a.Matrix4.multiply(C.sphereMatrix,C.geoMatrix,_t),F=a.Matrix4.multiply(C.ellipsoidMatrix,C.geoMatrix,St);a.Matrix4.inverse(F,F);var M=new A.Ellipsoid(6378137,6378137,6378137),m=0;for(let t=0,e=D.length;t<e;t++){let e=D[t];a.Matrix4.multiplyByPoint(g,e,It);let r=M.cartesianToCartographic(It,vt),n=mt(r.longitude,r.latitude,r.height,It);a.Matrix4.multiplyByPoint(F,n,e),i.Cartesian3.subtract(e,P,e),i.Cartesian3.divideByScalar(e,f,e),o.Cartesian4.pack(e,T,m),m+=4}c=T}var I=B.vertexAttributes,v=B.attrLocation;return v.aPosition=I.length,I.push({index:v.aPosition,typedArray:c,componentsPerAttribute:d,componentDatatype:E.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:u,normalize:!1}),{bytesOffset:y}}(t,e,r,p,B,u),p=f.bytesOffset):(p=(f=Ot(t,e,r,p,B,l,d,u)).bytesOffset,P=f.cartographicBounds),(c&y.VertexCompressOption.SVC_Normal)==y.VertexCompressOption.SVC_Normal?(f=function(t,e,r,a,n){var A=a,i=e.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,i<=0)return{bytesOffset:A};e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT;var o=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var B=2*i*Int16Array.BYTES_PER_ELEMENT,C=t.subarray(A,A+B);if(A+=B,!n.ignoreNormal){var s=n.vertexAttributes,y=n.attrLocation;y.aNormal=s.length,s.push({index:y.aNormal,typedArray:C,componentsPerAttribute:2,componentDatatype:E.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:o,normalize:!1})}return{bytesOffset:A}}(t,e,r,p,B),p=f.bytesOffset):p=(f=Nt(t,e,r,p,B)).bytesOffset,p=(f=bt(0,e,r,p=(f=Rt(t,e,r,p,B)).bytesOffset)).bytesOffset,(c&y.VertexCompressOption.SVC_TexutreCoord)==y.VertexCompressOption.SVC_TexutreCoord?(f=function(t,e,r,a,n){n.texCoordCompressConstant=[],n.minTexCoordValue=[];var A=r,i=t.getUint16(r+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,A+=Uint16Array.BYTES_PER_ELEMENT;for(var B=0,C=0;C<i;C++){var s=t.getUint8(A+a,!0);A+=Uint8Array.BYTES_PER_ELEMENT,A+=3*Uint8Array.BYTES_PER_ELEMENT;var y=t.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var l=t.getUint16(A+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(A+a,!0),A+=Uint16Array.BYTES_PER_ELEMENT;var d=t.getFloat32(A+a,!0);A+=Float32Array.BYTES_PER_ELEMENT,n.texCoordCompressConstant.push(d);var u=new o.Cartesian4;u.x=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,u.y=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,u.z=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,u.w=t.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,n.minTexCoordValue.push(u);var f=y*l*Int16Array.BYTES_PER_ELEMENT,P=e.subarray(A,A+f),p=(A+=f)%4;0!==p&&(A+=4-p);var c="aTexCoord"+B,T=n.vertexAttributes,L=n.attrLocation;if(L[c]=T.length,T.push({index:L[c],typedArray:P,componentsPerAttribute:l,componentDatatype:E.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:l*Int16Array.BYTES_PER_ELEMENT,normalize:!1}),s){f=y*Float32Array.BYTES_PER_ELEMENT;var D=e.subarray(A,A+f);A+=f,n.texCoordZMatrix=!0,L[c="aTexCoordZ"+B]=T.length,T.push({index:L[c],typedArray:D,componentsPerAttribute:1,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:Float32Array.BYTES_PER_ELEMENT,normalize:!1})}B++}return{bytesOffset:A}}(e,t,p,r,B),p=f.bytesOffset):p=(f=Lt(e,t,p,r,B,C)).bytesOffset,(c&y.VertexCompressOption.SVC_TexutreCoordIsW)==y.VertexCompressOption.SVC_TexutreCoordIsW&&(B.textureCoordIsW=!0),{bytesOffset:p=(f=Dt(e,t,p,r,B)).bytesOffset,cartographicBounds:P}}function Ut(t,e,r,a,n,A,i,o,B,C){3===t&&(r.getUint32(n,!0),n+=Uint32Array.BYTES_PER_ELEMENT,s.defined(B)&&B||(o=void 0));var y,l=n;l=(y=Ot(e,r,a,l,A,o,B,C)).bytesOffset;var d=y.cartographicBounds;if(l=(y=Rt(e,r,a,l=(y=Nt(e,r,a,l,A)).bytesOffset,A)).bytesOffset,3!==t&&(l=(y=bt(0,r,a,l)).bytesOffset),l=(y=Dt(r,e,l=(y=Lt(r,e,l,a,A,i)).bytesOffset,a,A)).bytesOffset,3===t&&(y=function(t,e,r,a,n){var A=a,i=e.getUint32(A+r,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var o=0;o<i;o++){var B=e.getUint32(A+r,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var C=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var s=e.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var y=B*C*ht[s],l=t.subarray(A,A+y);A+=y;var d=n.vertexAttributes,u=n.attrLocation,f="aCustom"+o;u[f]=d.length,d.push({index:u[f],typedArray:l,componentsPerAttribute:C,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1})}return{bytesOffset:A}}(e,r,a,l,A),l=y.bytesOffset),3==t){var u=Tt(r,a,e,l);l=u.bytesOffset,A.customVertexAttribute=JSON.parse(u.string);var f="aCustom"+A.customVertexAttribute.TextureCoordMatrix,P="aCustom"+A.customVertexAttribute.VertexWeight,p="aCustom"+A.customVertexAttribute.VertexWeight_1;s.defined(A.attrLocation[f])&&(A.attrLocation.aTextureCoordMatrix=A.attrLocation[f],delete A.attrLocation[f]),s.defined(A.attrLocation[P])&&(A.attrLocation.aVertexWeight=A.attrLocation[P],delete A.attrLocation[P]),s.defined(A.attrLocation[p])&&(A.attrLocation.aVertexWeight_1=A.attrLocation[p],delete A.attrLocation[p]);for(var c=Object.keys(A.attrLocation),T=c.length,L=0;L<T;++L){var D=c[L];-1!==D.indexOf("aCustom")&&delete A.attrLocation[D]}var g=(l+a)%4;g&&(g=4-g),l+=g}return 3===t&&(y=function(t,e,r,a,n){var A=a,i=e.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,i<=0)return{bytesOffset:A};var o=e.getUint16(A+r,!0);return A+=Uint16Array.BYTES_PER_ELEMENT,e.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT,{bytesOffset:A+=i*o*Float32Array.BYTES_PER_ELEMENT}}(0,r,a,l),l=y.bytesOffset),{bytesOffset:l,cartographicBounds:d}}function Kt(t){return 0!==t.length&&"ClampGroundAndObjectLinePass"===t[0].materialCode}var Ht,wt=1,Vt=4,Yt=8,Jt=16,kt=32,Wt=64,Zt=128,Xt=512,zt=1024;function Qt(t,e,r,n,B,C,l,d,u,f,P,p,c){var T=t,L=0,D=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,f=s.defaultValue(f,s.defaultValue.EMPTY_OBJECT);for(var g=void 0,F=0;F<D;F++){3===d&&(e.getUint32(L+r,!0),L+=Uint32Array.BYTES_PER_ELEMENT);var m=(Rt=Tt(e,r,T,L)).string;if(s.defined(u)){var I=s.defaultValue(f[m],a.Matrix4.IDENTITY);g=new a.Matrix4,a.Matrix4.multiply(u,I,g)}s.defined(c)&&(c.geoMatrix=s.defaultValue(f[m],a.Matrix4.IDENTITY));var _=(L=Rt.bytesOffset)%4;0!==_&&(L+=4-_);var S=At;if(S=e.getUint32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,(ue={vertexAttributes:[],attrLocation:{},instanceCount:0,instanceMode:0,instanceIndex:-1}).ignoreNormal=n.ignoreNormal,3===d)switch(S){case Et:S=it;break;case Ct:S=Bt;break;case st:S=ot}if(S===Bt){3===d&&(e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT),d>=2&&(e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT);var O,N={};N.posUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,N.normalUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,N.colorUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,N.secondColorUniqueID=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT,3===d?(O=e.getUint32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT):(O=e.getUint16(L+r,!0),L+=Int16Array.BYTES_PER_ELEMENT);for(var h=[],R=0;R<O;R++){var b=e.getInt32(L+r,!0);h.push(b),L+=Int32Array.BYTES_PER_ELEMENT}N.texCoordUniqueIDs=h;var G=[];if(3===d){var x=e.getUint32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;for(var U=0;U<x;U++){var K=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT,G.push(K)}}N.vertexAttrUniqueIDs=G;var H=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;var w=[],V={};if(H>0){var Y=(J=Tt(e,r,T,L)).string;L=J.bytesOffset,V.materialCode=Y,w.push(V)}3===d&&((Vt=(L+r)%4)&&(Vt=4-Vt),L+=Vt);var J,k=new Object,W=e.getUint32(L+r,!0),Z=M(T,L+=Int32Array.BYTES_PER_ELEMENT,L+W);if(H>0?v.dracoDecodeMesh(at,Z,W,ue,V,N,g,P,k,c):v.dracoDecodePointCloud(at,Z,W,ue,N),s.defined(k.min)&&s.defined(k.max)||(k=void 0),L+=W,3===d)(Vt=(L+r)%4)&&(Vt=4-Vt),(Vt=((L=(J=Tt(e,r,T,L+=Vt)).bytesOffset)+r)%4)&&(Vt=4-Vt),L+=Vt;n[m]={vertexPackage:ue,arrIndexPackage:w,cartographicBounds:k}}else if(S==ot&&3==d){var X=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT;var Q=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,ue.minVerticesValue=new o.Cartesian4,ue.minTexCoordValue=[new A.Cartesian2,new A.Cartesian2],ue.texCoordCompressConstant=[new i.Cartesian3,new i.Cartesian3];w=[];for(var j=0;j<Q;j++){var q=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,ue.vertCompressConstant=e.getFloat32(L+r,!0),L+=Float32Array.BYTES_PER_ELEMENT,ue.minVerticesValue.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ue.minVerticesValue.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ue.minVerticesValue.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var $=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var tt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var et=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var rt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var nt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var yt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var lt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT;var dt=e.getFloat64(L+r,!0);L+=Float64Array.BYTES_PER_ELEMENT,ue.minTexCoordValue[0].x=et,ue.minTexCoordValue[0].y=rt,ue.minTexCoordValue[1].x=lt,ue.minTexCoordValue[1].y=dt,ue.texCoordCompressConstant[0].x=$,ue.texCoordCompressConstant[0].y=tt,ue.texCoordCompressConstant[1].x=nt,ue.texCoordCompressConstant[1].y=yt;var ut=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;k=new Object;for(var ft=0;ft<ut;ft++){var Pt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;var pt=Pt,ct=0;pt!=Xt&&pt!=zt||(ct=e.getInt32(L+r,!0),L+=Int32Array.BYTES_PER_ELEMENT);var Lt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;var Dt=new Uint8Array(e.buffer,L+r,Lt);(Vt=((L+=Uint8Array.BYTES_PER_ELEMENT*Lt)+r)%4)&&(Vt=4-Vt),L+=Vt,qt(q,pt,ct,Dt,ue,X,c,P,k,g,C)}L=(wt=Tt(e,r,T,L)).bytesOffset,ue.customVertexAttribute=JSON.parse(wt.string),(Vt=(L+r)%4)&&(Vt=4-Vt),L+=Vt;var gt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT;for(var Ft=0;Ft<gt;Ft++){V={};var Mt=e.getInt32(L+r,!0);if(L+=Int32Array.BYTES_PER_ELEMENT,Mt>0){var mt=e.getInt8(L+r,!0);L+=Int8Array.BYTES_PER_ELEMENT,e.getInt8(L+r,!0),L+=Int8Array.BYTES_PER_ELEMENT;var It=e.getInt8(L+r,!0);L+=Int8Array.BYTES_PER_ELEMENT,e.getInt8(L+r,!0),L+=Int8Array.BYTES_PER_ELEMENT;var vt,_t,St=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT,13!==It?(vt=new Uint8Array(e.buffer,L+r,St),L+=Uint8Array.BYTES_PER_ELEMENT*St):(vt=new Uint32Array(e.buffer,L+r,St),L+=Uint32Array.BYTES_PER_ELEMENT*St),(Vt=(L+r)%4)&&(Vt=4-Vt),L+=Vt,13!==It?(_t=E.ComponentDatatype.createTypedArray(E.ComponentDatatype.UNSIGNED_BYTE,Mt*Uint32Array.BYTES_PER_ELEMENT),z.decodeIndexBuffer(_t,Mt,Uint32Array.BYTES_PER_ELEMENT,vt)):_t=vt;var Ot,Nt=e.getInt32(L+r,!0);L+=Int32Array.BYTES_PER_ELEMENT,V.indexType=mt,0===mt?Ot=new Uint16Array(Mt):1===mt&&(Ot=new Uint32Array(Mt)),V.indicesCount=Mt;var ht=new Uint32Array(_t.buffer,_t.byteOffset,_t.byteLength/4);Ot.set(ht,0),V.indicesTypedArray=Ot,C.push(Ot.buffer),V.primitiveType=It;for(ft=0;ft<Nt;ft++){var Rt;Y=(Rt=Tt(e,r,T,L)).string;L=Rt.bytesOffset,V.materialCode=Y}if(w.length>0&&13!==It){var bt=ue.preVertexCount;V.indicesTypedArray=ht.map((function(t){return t+bt})),V.indexType=1}w.push(V),(Vt=(L+r)%4)&&(Vt=4-Vt),L+=Vt}}}ue.nCompressOptions=X,2===w.length&&13===w[1].primitiveType&&w[1].indicesCount>=3&&(Ht=y.S3MEdgeProcessor.createEdgeDataByIndices(ue,w[1],C)),s.defined(k.min)&&s.defined(k.max)||(k=void 0),n[m]={vertexPackage:ue,arrIndexPackage:w,edgeGeometry:Ht,cartographicBounds:k}}else{var Ht;if(S===it||S===At)L=(Rt=Ut(d,T,e,r,L,ue,B,g,P,c)).bytesOffset,k=Rt.cartographicBounds;else if(S===ot&&(L=(Rt=xt(T,e,r,L,ue,B,g,P,c)).bytesOffset,k=Rt.cartographicBounds,3==d)){var wt;L=(wt=Tt(e,r,T,L)).bytesOffset,ue.customVertexAttribute=JSON.parse(wt.string);var Vt,Yt="aCustom"+ue.customVertexAttribute.TextureCoordMatrix,Jt="aCustom"+ue.customVertexAttribute.VertexWeight,kt="aCustom"+ue.customVertexAttribute.VertexWeight_1;s.defined(ue.attrLocation[Yt])&&(ue.attrLocation.aTextureCoordMatrix=ue.attrLocation[Yt],delete ue.attrLocation[Yt]),s.defined(ue.attrLocation[Jt])&&(ue.attrLocation.aVertexWeight=ue.attrLocation[Jt],delete ue.attrLocation[Jt]),s.defined(ue.attrLocation[kt])&&(ue.attrLocation.aVertexWeight_1=ue.attrLocation[kt],delete ue.attrLocation[kt]);for(var Wt=Object.keys(ue.attrLocation),Zt=Wt.length,Qt=0;Qt<Zt;++Qt){var jt=Wt[Qt];-1!==jt.indexOf("aCustom")&&delete ue.attrLocation[jt]}(Vt=(L+r)%4)&&(Vt=4-Vt),L+=Vt}Kt(w=(Rt=Gt(d,T,e,r,L)).arrIndexPackage)&&(ue.clampRegionEdge=!0),2===w.length&&13===w[1].primitiveType&&w[1].indicesCount>=3&&(Ht=y.S3MEdgeProcessor.createEdgeDataByIndices(ue,w[1],C)),L=Rt.bytesOffset,s.defined(k)&&s.defined(k.min)&&s.defined(k.max)||(k=void 0),n[m]={vertexPackage:ue,arrIndexPackage:w,edgeGeometry:Ht,cartographicBounds:k}}if(3!==d&&s.defined(l)&&l){var $t=e.getUint16(L+r,!0);if(L+=Uint16Array.BYTES_PER_ELEMENT,1===$t){var te=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT;var ee,re=e.getUint32(L+r,!0);L+=Uint32Array.BYTES_PER_ELEMENT,e.getFloat32(L+r,!0),L+=Float32Array.BYTES_PER_ELEMENT;var ae=new Array(te),ne=new Array(te),Ae=new Array(te),ie=new Array(te);for(ee=0;ee<te;ee++){var oe=e.getFloat32(L+r,!0);L+=Float32Array.BYTES_PER_ELEMENT,ae[ee]=oe;var Be=e.getUint16(L+r,!0);L+=Uint16Array.BYTES_PER_ELEMENT,ne[ee]=Be;var Ee=e.getUint16(L+r,!0);L+=Uint16Array.BYTES_PER_ELEMENT,Ae[ee]=Ee;for(var Ce=Ee*re,se=new Array(Ce),ye=0;ye<Ce;ye++){Yt=e.getFloat32(L+r,!0);L+=Float32Array.BYTES_PER_ELEMENT,se[ye]=Yt}ie[ee]=se}}var le=new i.Cartesian3,de=new i.Cartesian3;le.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,le.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,le.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,de.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,de.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,de.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,n[m].min=le,n[m].max=de;var ue=n[m].vertexPackage;s.defined(ue.instanceBuffer)&&2===d&&(ue.instanceBounds=new Float32Array(6),i.Cartesian3.pack(le,ue.instanceBounds,0),i.Cartesian3.pack(de,ue.instanceBounds,3))}if(3===d){var fe=new i.Cartesian3;fe.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,fe.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,fe.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var Pe=new i.Cartesian3;Pe.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,Pe.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,Pe.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var pe=new i.Cartesian3;pe.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,pe.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,pe.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT;var ce=new i.Cartesian3;ce.x=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ce.y=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT,ce.z=e.getFloat64(L+r,!0),L+=Float64Array.BYTES_PER_ELEMENT}}}function jt(t,e,r){var a=t.typedArray,n=new r(a.length+e.length);n.set(a,0),n.set(e,a.length),t.typedArray=n}function qt(t,e,r,n,B,C,y,l,d,u,f){var P,p=0,c=B.vertexAttributes,T=B.attrLocation;switch(e){case Vt:case Yt:case Jt:case kt:p=2*Uint16Array.BYTES_PER_ELEMENT,0!=(16&C)||e!==Jt&&e!==kt||(p=2*Float32Array.BYTES_PER_ELEMENT),P=E.ComponentDatatype.createTypedArray(E.ComponentDatatype.UNSIGNED_BYTE,t*p);break;case Wt:case Zt:p=4*Uint8Array.BYTES_PER_ELEMENT,P=E.ComponentDatatype.createTypedArray(E.ComponentDatatype.UNSIGNED_BYTE,4*t);break;case Xt:case zt:p=Float32Array.BYTES_PER_ELEMENT*r,P=E.ComponentDatatype.createTypedArray(E.ComponentDatatype.UNSIGNED_BYTE,t*r*4);break;default:p=4*Uint16Array.BYTES_PER_ELEMENT,P=E.ComponentDatatype.createTypedArray(E.ComponentDatatype.UNSIGNED_BYTE,t*p)}switch(z.decodeVertexBuffer(P,t,p,n,n.length),f.push(P.buffer),e){case wt:var L=new Uint16Array(P.buffer,0,P.length/2),D=E.ComponentDatatype.SHORT;if(s.defined(y)){var g=o.Cartesian4.unpackArray(L);for(let t=0,e=g.length;t<e;t++){let e=g[t];i.Cartesian3.multiplyByScalar(e,B.vertCompressConstant,e),i.Cartesian3.add(e,B.minVerticesValue,e)}var F=a.Matrix4.multiply(y.sphereMatrix,y.geoMatrix,_t),M=a.Matrix4.multiply(y.ellipsoidMatrix,y.geoMatrix,St);a.Matrix4.inverse(M,M);var m=new A.Ellipsoid(6378137,6378137,6378137),I=0;for(let t=0,e=g.length;t<e;t++){let e=g[t];a.Matrix4.multiplyByPoint(F,e,It);let r=m.cartesianToCartographic(It,vt),n=mt(r.longitude,r.latitude,r.height,It);a.Matrix4.multiplyByPoint(M,n,e),i.Cartesian3.subtract(e,B.minVerticesValue,e),i.Cartesian3.divideByScalar(e,B.vertCompressConstant,e),o.Cartesian4.pack(e,L,I),I+=4}}if(void 0!==(G=T.aPosition)?(jt(c[G],L,Uint16Array),B.preVertexCount=B.verticesCount,B.verticesCount+=t):(T.aPosition=c.length,c.push({index:T.aPosition,typedArray:L,componentsPerAttribute:4,componentDatatype:D,offsetInBytes:0,strideInBytes:0,normalize:!1}),B.verticesCount=t),!s.defined(y)&&l){var v=new i.Cartographic,_=new i.Cartographic,S=new Float32Array(2*t),O=new Float64Array(2*t),N=new i.Cartesian3,h=new i.Cartesian3,R=new i.Cartographic;m=Ht?new A.Ellipsoid(6378137,6378137,6356752.314245179):new A.Ellipsoid(6378137,6378137,6378137);for(var b=0;b<t;b++)a.Matrix4.multiplyByPoint(u,i.Cartesian3.fromElements(L[4*b]*B.vertCompressConstant+B.minVerticesValue.x,L[4*b+1]*B.vertCompressConstant+B.minVerticesValue.y,L[4*b+2]*B.vertCompressConstant+B.minVerticesValue.z,N),h),R=m.cartesianToCartographic(h,vt),O[2*b]=R.longitude,O[2*b+1]=R.latitude,0===b?(v.longitude=R.longitude,v.latitude=R.latitude,_.longitude=R.longitude,_.latitude=R.latitude):(v.longitude=Math.max(R.longitude,v.longitude),v.latitude=Math.max(R.latitude,v.latitude),_.longitude=Math.min(R.longitude,_.longitude),_.latitude=Math.min(R.latitude,_.latitude));for(b=0;b<t;b++)S[2*b]=O[2*b]-_.longitude,S[2*b+1]=O[2*b+1]-_.latitude;T.img=c.length,c.push({index:T.img,typedArray:S,componentsPerAttribute:2,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),d.max=v,d.min=_}break;case Vt:var G=T.aNormal,x=new Int16Array(P.buffer,0,P.length/2);void 0!==G?jt(c[G],x,Uint16Array):(T.aNormal=c.length,c.push({index:T.aNormal,typedArray:x,componentsPerAttribute:2,componentDatatype:E.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case Jt:var U=new Uint16Array(P.buffer,0,P.length/2),K=(G=T.aTexCoord0,D=E.ComponentDatatype.SHORT,Uint16Array);0==(16&C)&&(D=E.ComponentDatatype.FLOAT,K=Float32Array,U=new Float32Array(P.buffer,0,P.length/4)),void 0!==G?jt(c[G],U,K):(T.aTexCoord0=c.length,c.push({index:T.aTexCoord0,typedArray:U,componentsPerAttribute:2,componentDatatype:D,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case kt:U=new Uint16Array(P.buffer,0,P.length/2),G=T.aTexCoord1,D=E.ComponentDatatype.SHORT,K=Uint16Array;0==(16&C)&&(D=E.ComponentDatatype.FLOAT,K=Float32Array,U=new Float32Array(P.buffer,0,P.length/4)),void 0!==G?jt(c[G],U,K):(T.aTexCoord1=c.length,c.push({index:T.aTexCoord1,typedArray:U,componentsPerAttribute:2,componentDatatype:D,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case Wt:void 0!==(G=T.aColor)?jt(c[G],P,Uint8Array):(T.aColor=c.length,c.push({index:T.aColor,typedArray:P,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:0,normalize:!0}));break;case Zt:void 0!==(G=T.aSecondColor)?jt(c[G],P,Uint8Array):(T.aSecondColor=c.length,c.push({index:T.aSecondColor,typedArray:P,componentsPerAttribute:4,componentDatatype:E.ComponentDatatype.BYTE,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case Xt:U=new Float32Array(P.buffer,0,P.length/4);void 0!==(G=T.aVertexWeight)?jt(c[G],U,Float32Array):(T.aVertexWeight=c.length,c.push({index:T.aVertexWeight,typedArray:U,componentsPerAttribute:r,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case zt:var H=new Float32Array(P.buffer,0,P.length/4);void 0!==(G=T.aTextureCoordMatrix)?jt(c[G],H,Float32Array):(T.aTextureCoordMatrix=c.length,c.push({index:T.aTextureCoordMatrix,typedArray:H,componentsPerAttribute:r,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1}))}}function $t(t,e,r,n,A){var i={},o=[],B=new a.Matrix4,E=t;A=s.defaultValue(A,{});for(var C=0;C<16;C++)B[C]=e.getFloat64(r+n,!0),r+=Float64Array.BYTES_PER_ELEMENT;i.matrix=B,i.skeletonNames=o;var y=e.getUint32(r+n,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var l=0;l<y;l++){var d=Tt(e,n,E,r),u=d.string;r=d.bytesOffset,o.push(u),A[u]=B}return{byteOffset:r,geode:i}}function te(t){var e=t.indexOf("Geometry");if(-1===e)return t;var r=t.substring(e,t.length);return t.replace(r,"")}function ee(t,e,r,o,B,E,C){var y={},l=r.getFloat32(o+B,!0);o+=Float32Array.BYTES_PER_ELEMENT;var d=r.getUint16(o+B,!0);o+=Uint16Array.BYTES_PER_ELEMENT,y.rangeMode=d,y.rangeList=l;var u=new i.Cartesian3;u.x=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT,u.y=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT,u.z=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT;var f=r.getFloat64(o+B,!0);if(o+=Float64Array.BYTES_PER_ELEMENT,s.defined(C)){var P=a.Matrix4.clone(C.sphereMatrix,_t),p=a.Matrix4.clone(C.ellipsoidMatrix,St);a.Matrix4.inverse(p,p);var c=new A.Ellipsoid(6378137,6378137,6378137);a.Matrix4.multiplyByPoint(P,u,It);let t=c.cartesianToCartographic(It,vt),e=mt(t.longitude,t.latitude,t.height,It);a.Matrix4.multiplyByPoint(p,e,u)}if(y.boundingSphere=new n.BoundingSphere(u,f),3===t){var T=new i.Cartesian3;T.x=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT,T.y=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT,T.z=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT;var L=new i.Cartesian3;L.x=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT,L.y=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT,L.z=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT;var D=new i.Cartesian3;D.x=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT,D.y=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT,D.z=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT;var g=new i.Cartesian3;g.x=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT,g.y=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT,g.z=r.getFloat64(o+B,!0),o+=Float64Array.BYTES_PER_ELEMENT,y._obb={xExtent:L,yExtent:D,zExtent:g,obbCenter:T}}var F=e,M=(v=Tt(r,B,F,o)).string;o=v.bytesOffset,M=te(M=(M=M.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,"")).replace(/\\/gi,"/")),y.childTile=M,y.geodes=[];var m=r.getUint32(o+B,!0);o+=Uint32Array.BYTES_PER_ELEMENT;for(var I=0;I<m;I++){var v;o=(v=$t(e,r,o,B,E)).byteOffset,y.geodes.push(v.geode)}return 3===t&&(o=(v=Tt(r,B,F,o)).bytesOffset),{pageLOD:y,bytesOffset:o}}function re(t,e,r,a,n,A){var i=0,o={},B=[],E=r.getUint32(i+a,!0);i+=Uint32Array.BYTES_PER_ELEMENT;for(var C=0;C<E;C++){var s=ee(t,e,r,i,a,n,A);i=s.bytesOffset,B.push(s.pageLOD)}return o.pageLods=B,o}function ae(t,e,r){var a=t.vertexAttributes,n=t.attrLocation,A=a.length;n["aTextureBatchId"+r]=A,a.push({index:A,typedArray:e,componentsPerAttribute:1,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0})}function ne(t,r,a,n){for(var A=a.length,i=0;i<A;i++)for(var o=a[i],B=o.subName.split("_")[0],E=o.subVertexOffsetArr,C=0;C<E.length;C++){var y=E[C],l=y.geoName,d=y.offset,u=y.count,f=y.texUnitIndex,P=r[l].vertexPackage.verticesCount,p=n[l];s.defined(p)||(p=n[l]={});var c=p[f];s.defined(c)||(c=p[f]=new Float32Array(P),e.arrayFill(c,-1));var T=s.defined(t)?t[B]:i;e.arrayFill(c,T,d,d+u)}}function Ae(t,e,r){var a=t.vertexAttributes,n=t.attrLocation,A=a.length;n[1===r?"instanceId":"batchId"]=A,a.push({index:A,typedArray:e,componentsPerAttribute:1,componentDatatype:E.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,instanceDivisor:r})}function ie(t,r,a,n,A,i){var o=0,B=t,E=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;for(var C=0;C<E;C++){var l=Tt(r,a,B,o),d=l.string;o=l.bytesOffset;var u=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var f={};n[d].pickInfo=f;var P=n[d].edgeGeometry;if(-1==n[d].vertexPackage.instanceIndex){var p=new Float32Array(n[d].vertexPackage.verticesCount);i.push(p.buffer);for(var c=0;c<u;c++){var T=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var L=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var D=0,g=0;f[T]={batchId:c};for(var F=0;F<L;F++)g=r.getUint32(o+a,!0),o+=Uint32Array.BYTES_PER_ELEMENT,D=r.getUint32(o+a,!0),o+=Uint32Array.BYTES_PER_ELEMENT,e.arrayFill(p,c,g,g+D);f[T].vertexColorOffset=g,f[T].vertexCount=D}Ae(n[d].vertexPackage,p,void 0)}else{var M=n[d].vertexPackage.instanceCount;n[d].vertexPackage.instanceBuffer,n[d].vertexPackage.instanceMode;var m=new Float32Array(M);i.push(m.buffer);var I=0;for(c=0;c<u;c++){var v=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;L=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;for(F=0;F<L;F++){var _=r.getUint32(o+a,!0);if(o+=Uint32Array.BYTES_PER_ELEMENT,m[I]=I,void 0===f[v]&&(f[v]={vertexColorCount:1,instanceIds:[],vertexColorOffset:I}),f[v].instanceIds.push(_),I++,3===A){D=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT}}}Ae(n[d].vertexPackage,m,1)}P=n[d].edgeGeometry;if(s.defined(P)){var S,O,N=P.regular.instancesData,h=y.S3MEdgeProcessor.RegularInstanceStride;if(s.defined(N))for(O=N.length,S=0;S<O;S+=h){var R=N[S+9];N[S+9]=p[R]}var b=P.silhouette.instancesData;if(h=y.S3MEdgeProcessor.SilhouetteInstanceStride,s.defined(b))for(O=b.length,S=0;S<O;S+=h){R=b[S+12];b[S+12]=p[R]}}}}function oe(t){return t<1e-10&&t>-1e-10}function Be(t,e,r,a,n,A,i,o){var B=new DataView(t),E=new Uint8Array(t),C=B.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var y=l.getStringFromTypedArray(E,r,C);y=y.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,""),r+=C;var d=B.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var u=0;u<d;u++){var P={},p=B.getFloat32(r,!0);r+=Float32Array.BYTES_PER_ELEMENT;var T=B.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT,P.rangeMode=T,P.rangeList=p;var L={};L.x=B.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,L.y=B.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,L.z=B.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;var D=B.getFloat64(r,!0);r+=Float64Array.BYTES_PER_ELEMENT,P.boundingSphere={center:L,radius:D},C=B.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var g=l.getStringFromTypedArray(E,r,C);r+=C,g=te(g=g.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,"")),P.childTile=g}var F={},M=B.getFloat32(r,!0);r+=Float32Array.BYTES_PER_ELEMENT;M>=3&&(B.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT),B.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var m=B.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var v=new Uint8Array(t,r,m),_=r+m,S=c.pako.inflate(v).buffer;o.push(S),B=new DataView(S);E=new Uint8Array(S);r=0;var O=B.getUint32(r,!0),N=ct(B,S,r+=Uint32Array.BYTES_PER_ELEMENT),h=N.buffer;r=N.byteOffset;var R=re(M,h,B,N.dataViewByteOffset),b=r%4;0!==b&&(r+=4-b),Qt((N=ct(B,S,r)).buffer,B,N.dataViewByteOffset,F,!1,o,void 0,M),r=N.byteOffset,3!==M&&((N=ct(B,S,r)).buffer,r=N.byteOffset);var G={};!function(t,e,r,a,n,A,i,o,B,E){var C=o,y=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;for(var d={},u=0;u<y;u++){var P=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;var p=l.getStringFromTypedArray(A,C-o,P),c=(C+=P)%4;0!==c&&(C+=4-c),i.getUint32(C,!0),C+=Uint32Array.BYTES_PER_ELEMENT;var T=i.getUint8(C,!0);C+=Uint8Array.BYTES_PER_ELEMENT;var L=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;var D=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;var g=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;var F=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;var M,m=i.getUint32(C,!0);if(C+=Uint32Array.BYTES_PER_ELEMENT,a&&T){var I=C-o;M=A.subarray(I,I+F),C+=F}var v=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;for(var _=[],S=0;S<v;S++){P=i.getUint32(C,!0),C+=Uint32Array.BYTES_PER_ELEMENT;var O=l.getStringFromTypedArray(A,C-o,P);C+=P,_.push(O),r[O]=p}var N=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;var h=[];for(S=0;S<N;S++){P=i.getUint32(C,!0),C+=Uint32Array.BYTES_PER_ELEMENT;var R=l.getStringFromTypedArray(A,C-o,P);C+=P,h.push(R)}var b=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;var G=[],x=void 0,U=p;if(a)x=e[p]={};else{var K=r[p];for(U=K;s.defined(K)&&K!==p;)U=K,K=r[K];s.defined(U)&&(x=e[U])}var H=0;for(S=0;S<b;S++){P=i.getUint32(C,!0),C+=Uint32Array.BYTES_PER_ELEMENT;var w=l.getStringFromTypedArray(A,C-o,P);if(C+=P,a){var V=w.split("_")[0];s.defined(x[V])?H++:x[V]=S-H}var Y=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;var J=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;var k=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;var W=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;var Z=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;for(var X=[],z=0;z<Z;z++){P=i.getUint32(C,!0),C+=Uint32Array.BYTES_PER_ELEMENT;var Q=l.getStringFromTypedArray(A,C-o,P);C+=P;var j=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;var q=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT;var $=i.getUint32(C,!0);C+=Uint32Array.BYTES_PER_ELEMENT,X.push({geoName:Q,offset:j,count:q,texUnitIndex:$})}G.push({subName:w,offsetX:Y,offsetY:J,width:k,height:W,subVertexOffsetArr:X})}ne(x,t,G,d),s.defined(M)&&g===f.S3MPixelFormat.CRN_DXT5&&et&&(M=rt({data:M},E).bufferView),B[p]={id:p,rootTextureName:U,width:L,height:D,compressType:g,size:F,format:m,textureData:M,subTexInfos:G,requestNames:h}}for(var Q in d)if(d.hasOwnProperty(Q)){var tt=t[Q].vertexPackage,at=d[Q];for(var $ in at)at.hasOwnProperty($)&&ae(tt,at[$],$)}}(F,a,n,A,0,(N=ct(B,S,r)).buffer,B,N.dataViewByteOffset,G,o),r=N.byteOffset;var x=B.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var U=E.subarray(r,r+x),K=l.getStringFromTypedArray(U);r+=x;var w=JSON.parse(K);(3===M&&(O=B.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT),(O&nt)==nt)&&(ie((N=ct(B,S,r)).buffer,B,N.dataViewByteOffset,F,M,o),r=N.byteOffset);if(1==M){var V=R.pageLods,Y=!0;for(u=0;u<V.length;u++){var J=V[u];Y=""===J.childTile;for(var k=J.geodes,W=0;W<k.length;W++)for(var Z=k[W].skeletonNames,X=0;X<Z.length;X++){var z=Z[X];if(Y){var Q=F[z].vertexPackage;Q.boundingSphere=H.calcBoundingSphereInWorker(1,Q)}}}}i[y]={result:!0,groupNode:R,geoPackage:F,matrials:w,texturePackage:G,version:I.S3M4,dataVersion:M,rootBatchIdMap:a,ancestorMap:n},_<e&&Be(t,e,_,a,n,!1,i,o)}function Ee(e,r){var a=e.buffer;if(Ht=e.ellipsoid,e.isOSGB){if(s.defined(yt)||new Promise((function(e,r){t(["./OSGBToS3M-b8c32d1f"],e,r)})).then((function(t){(yt=t.default).onRuntimeInitialized=function(){dt=!0},ut=yt.cwrap("OSGBToS3MB","number",["number","number","number","number"])})),!dt)return null;var n;switch(e.suffix){case"dae":case"DAE":n=4;break;case"x":case"X":n=2;break;default:n=0}a=function(t,e,r){var a=yt._malloc(20*e),n=yt._malloc(Uint8Array.BYTES_PER_ELEMENT*e);yt.HEAPU8.set(t,n/Uint8Array.BYTES_PER_ELEMENT);var A=ut(n,e,a,r),i=new Uint8Array(yt.HEAPU8.buffer,a,A);return t=null,t=new Uint8Array(i).buffer,yt._free(a),yt._free(n),t}(new Uint8Array(a),a.byteLength,n)}var A=e.isS3MZ,i=e.fileType,o=e.supportCompressType,B=e.bVolume,E=e.isS3MBlock,C=e.modelMatrix,d=e.materialType,u=e.isCoverImageryLayer,P=e.transformPar,p=null,T=null,D=null;if(B&&e.volbuffer.byteLength<8&&(B=!1),B){var g=e.volbuffer,F=new Uint8Array(g,8),M=c.pako.inflate(F).buffer,m=new Float64Array(M,0,1),v=new Uint32Array(M,48,1);if(0===m[0]||3200===v[0]||3201===v[0]){var _=0;0==m[0]&&(_=8),r.push(M);var S=new Float64Array(M,_,6),O=S[0],N=S[1],h=S[2],R=S[3],b=S[4]<S[5]?S[4]:S[5],G=S[4]>S[5]?S[4]:S[5];T={left:O,top:N,right:h,bottom:R,minHeight:b,maxHeight:G,width:(p=new pt(O,R,h,N,b,G)).width,length:p.length,height:p.height};var x=new Uint32Array(M,48+_,7),U=x[0],K=x[1],w=x[2],V=x[3];D={nFormat:U,nSideBlockCount:K,nBlockLength:w,nLength:V,nWidth:x[4],nHeight:x[5],nDepth:x[6],imageArray:new Uint8Array(M,76+_,V*V*4)}}}var Y=0,J={};J.ignoreNormal=e.ignoreNormal;var k=e.rootBatchIdMap||{},W=e.ancestorMap||{},Z={},X=new DataView(a),z=X.getFloat32(Y,!0);if(Y+=Float32Array.BYTES_PER_ELEMENT,E)return X.getUint32(Y,!0),Y+=Uint32Array.BYTES_PER_ELEMENT,Be(a,a.byteLength,Y,k,W,e.isRoot,Z,r),Z;var Q,j=!1;if(z>=3&&(X.getUint32(Y,!0),Y+=Uint32Array.BYTES_PER_ELEMENT),z>=2&&(Q=X.getUint32(Y,!0),Y+=Uint32Array.BYTES_PER_ELEMENT),oe(z-1)||oe(z-2)||oe(z-3)||z>2.09&&z<2.11){var q=X.getUint32(Y,!0);Y+=Uint32Array.BYTES_PER_ELEMENT;var $=new Uint8Array(a,Y,q);a=!0===lt?function(t,e){var r=e||4*t.length,a=L.unzip._malloc(Uint8Array.BYTES_PER_ELEMENT*r),n=new Uint8Array(r);L.unzip.HEAPU8.set(n,a/Uint8Array.BYTES_PER_ELEMENT);var A,i=L.unzip._malloc(Uint8Array.BYTES_PER_ELEMENT*t.length);for(L.unzip.HEAPU8.set(t,i/Uint8Array.BYTES_PER_ELEMENT);0==(A=ft(a,r,i,t.length));)Pt(a),r*=4,a=L.unzip._malloc(Uint8Array.BYTES_PER_ELEMENT*r),n=new Uint8Array(r),L.unzip.HEAPU8.set(n,a/Uint8Array.BYTES_PER_ELEMENT);var o=new Uint8Array(L.unzip.HEAPU8.buffer,a,A);t=null,n=null;var B=new Uint8Array(o).buffer;return Pt(a),Pt(i),B}($,Q):c.pako.inflate($).buffer,r.push(a),X=new DataView(a),Y=0}else if(z>1.199&&z<1.201){q=X.getUint32(Y,!0);Y+=Uint32Array.BYTES_PER_ELEMENT,r.push(a)}else{j=!0,Y=0;q=X.getInt32(Y,!0);if(Y+=Int32Array.BYTES_PER_ELEMENT,Y+=Uint8Array.BYTES_PER_ELEMENT*q,A){X.getUint32(Y,!0),Y+=Uint32Array.BYTES_PER_ELEMENT;F=new Uint8Array(a,Y);a=c.pako.inflate(F).buffer,r.push(a),X=new DataView(a),Y=0}}var tt=X.getUint32(Y,!0),et=ct(X,a,Y+=Uint32Array.BYTES_PER_ELEMENT),rt=et.buffer;Y=et.byteOffset;var at={},At=re(z,rt,X,et.dataViewByteOffset,at,P),it=Y%4;0!==it&&(Y+=4-it);var ot=z>2.09&&3!==z;if(Qt((et=ct(X,a,Y)).buffer,X,et.dataViewByteOffset,J,j,r,ot,z,C,at,u,e.fileType,P),Y=et.byteOffset,ot)for(var Bt=0;Bt<At.pageLods.length;Bt++)for(var Et=At.pageLods[Bt],Ct=Et.geodes,st=0;st<Ct.length;st++)for(var Lt=Ct[st].skeletonNames,Dt=0;Dt<Lt.length;Dt++){var gt=Lt[Dt];s.defined(J[gt].max)&&(s.defined(Et.max)?(Et.max.x=Math.max(J[gt].max.x,Et.max.x),Et.max.y=Math.max(J[gt].max.y,Et.max.y),Et.max.z=Math.max(J[gt].max.z,Et.max.z),Et.min.x=Math.min(J[gt].min.x,Et.min.x),Et.min.y=Math.min(J[gt].min.y,Et.min.y),Et.min.z=Math.min(J[gt].min.z,Et.min.z)):(Et.max=J[gt].max,Et.min=J[gt].min))}3!==z&&((et=ct(X,a,Y)).buffer,Y=et.byteOffset);var Ft={};!function(t,e,r,a,n,A){var i=0,o=r.getUint32(i+a,!0);i+=Uint32Array.BYTES_PER_ELEMENT;for(var B=0;B<o;B++){var E=Tt(r,a,e,i),C=E.string,s=(i=E.bytesOffset)%4;0!==s&&(i+=4-s);var l=r.getUint32(i+a,!0);i+=Uint32Array.BYTES_PER_ELEMENT;var d=r.getUint32(i+a,!0);i+=Uint32Array.BYTES_PER_ELEMENT;var u=r.getUint32(i+a,!0);i+=Uint32Array.BYTES_PER_ELEMENT;var P=r.getUint32(i+a,!0);i+=Uint32Array.BYTES_PER_ELEMENT;var p=r.getUint32(i+a,!0);i+=Uint32Array.BYTES_PER_ELEMENT;var c=r.getUint32(i+a,!0);i+=Uint32Array.BYTES_PER_ELEMENT;var T=e.subarray(i,i+p);i+=p;var L=null,D=P;P===y.S3MCompressType.enrS3TCDXTN&&1!=t?(y.DXTTextureDecode.decode(L,d,u,T,c),L=c>f.S3MPixelFormat.BGR||c===f.S3MPixelFormat.LUMINANCE_ALPHA?new Uint8Array(d*u*4):new Uint16Array(d*u),y.DXTTextureDecode.decode(L,d,u,T,c),A.push(L.buffer),P=0):L=T,n[C]={id:C,width:d,height:u,compressType:P,oriCompressType:D,nFormat:c,imageBuffer:L,mipmapLevel:l}}}(o,(et=ct(X,a,Y)).buffer,X,et.dataViewByteOffset,Ft,r),Y=et.byteOffset;var Mt=X.getUint32(Y,!0);Y+=Uint32Array.BYTES_PER_ELEMENT;var mt=new Uint8Array(a).subarray(Y,Y+Mt),It=l.getStringFromTypedArray(mt);Y+=Mt,It=It.replace(/\n\0/,"");var vt=JSON.parse(It);(3===z&&(tt=X.getUint32(Y,!0),Y+=Uint32Array.BYTES_PER_ELEMENT),(tt&nt)==nt)&&ie((et=ct(X,a,Y)).buffer,X,et.dataViewByteOffset,J,z,r);if(1==z){var _t=At.pageLods,St=!0;for(Bt=0;Bt<_t.length;Bt++){var Ot=_t[Bt];St=""===Ot.childTile;for(var Nt=Ot.geodes,ht=0;ht<Nt.length;ht++){Lt=Nt[ht].skeletonNames;for(var Rt=0;Rt<Lt.length;Rt++){var bt=Lt[Rt];if(St){var Gt=J[bt].vertexPackage;Gt.boundingSphere=H.calcBoundingSphereInWorker(i,Gt)}}}}}return"BatchPBR"===d&&function(t,e,r,a){for(var n in delete t.ignoreNormal,t)if(t.hasOwnProperty(n)){var A=t[n],i=A.arrIndexPackage;if(i.length<1)continue;if(1===i.length||2===i.length&&13===i[1].primitiveType){var o=A.vertexPackage.attrLocation.aTextureCoordMatrix;if(void 0!==o){if((B=(N=A.vertexPackage.vertexAttributes[o]).typedArray)[0]<0)continue}else if(void 0!==(o=A.vertexPackage.attrLocation.aTextureCoordMatrix||A.vertexPackage.attrLocation.aTexCoord0)){N=A.vertexPackage.vertexAttributes[o];var B=new Float32Array(N.typedArray.buffer,N.typedArray.byteOffset,N.typedArray.byteLength/4);if(3===N.componentsPerAttribute&&B[2]<0)continue}}var E,C,l=0,d={},u=void 0;for(E=0,C=i.length;E<C;E++)13!==(h=i[E]).primitiveType?l+=0===h.indexType?h.indicesTypedArray.byteLength/2:h.indicesTypedArray.byteLength/4:u=i[E],0===E&&(d.indicesCount=0,d.indexType=i[E].indexType,d.primitiveType=i[E].primitiveType,d.materialCode=i[E].materialCode);d.indicesCount=l;var f=A.vertexPackage.verticesCount>65535?new Uint32Array(l):new Uint16Array(l),P=0;for(E=0,C=i.length;E<C;E++)if(13!==(h=i[E]).primitiveType){var p=0===h.indexType?Uint16Array:Uint32Array,c=0===h.indexType?h.indicesTypedArray.byteLength/2:h.indicesTypedArray.byteLength/4,T=new p(h.indicesTypedArray.buffer,h.indicesTypedArray.byteOffset,c);f.set(T,P),P+=T.length}d.indicesTypedArray=f,A.arrIndexPackage=[d],s.defined(u)&&(A.arrIndexPackage.push(u),A.edgeGeometry=y.S3MEdgeProcessor.createEdgeDataByIndices(A.vertexPackage,u));var L=2*i.length*4,D=new Float32Array(L),g={};for(E=0,C=r.material.length;E<C;E++)g[(R=r.material[E].material).id]=R;for(E=0,C=i.length;E<C;E++)if(R=g[(h=i[E]).materialCode]){var F=R.pbrMetallicRoughness;if(F){D[8*E]=F.metallicFactor,D[8*E+1]=F.roughnessFactor,D[8*E+2]=R.alphaCutoff;var M=""===R.alphaMode?0:1,m="none"===R.cullMode?0:1;D[8*E+3]=m|M<<16,D[8*E+4]=F.emissiveFactor.x,D[8*E+5]=F.emissiveFactor.y,D[8*E+6]=F.emissiveFactor.z,D[8*E+7]=0,R.pbrIndex=E}}var I="PBRMaterialParam_"+n;for(E=0,C=r.material.length;E<C;E++)if((R=r.material[E].material).id===d.materialCode){R.textureunitstates.push({textureunitstate:{addressmode:{u:0,v:0,w:0},filteringoption:0,filtermax:2,filtermin:2,id:I,texmodmatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],url:""}});break}var v,_,S=A.vertexPackage,O=S.attrLocation.aTexCoord1;if(void 0!==O){var N=S.vertexAttributes[O];v=new Float32Array(2*S.verticesCount),N.typedArray=v}else v=new Float32Array(2*S.verticesCount),O=S.vertexAttributes.length,S.attrLocation.aTexCoord1=O,S.vertexAttributes.push({index:O,typedArray:v,componentsPerAttribute:2,componentDatatype:5126,offsetInBytes:0,strideInBytes:8,normalize:!1});for(a.push(v.buffer),void 0!==(O=S.attrLocation.aColor)&&(_=(N=S.vertexAttributes[O]).typedArray),E=0,C=i.length;E<C;E++){var h,R;if((R=g[(h=i[E]).materialCode])&&R.pbrMetallicRoughness)for(var b=R.pbrMetallicRoughness.baseColor,G=void 0!==_,x=R.pbrIndex,U=(f=h.indicesTypedArray,{}),K=0,H=(f=0===h.indexType?new Uint16Array(f.buffer,f.byteOffset,f.byteLength/2):new Uint32Array(f.buffer,f.byteOffset,f.byteLength/4)).length;K<H;K++){var w=f[K];v[2*w]=x,G&&void 0===U[w]&&(U[w]=!0,_[4*w]*=b.x,_[4*w+1]*=b.y,_[4*w+2]*=b.z,_[4*w+3]*=b.w)}}e[I]={id:I,width:2*i.length,height:1,compressType:0,nFormat:25,imageBuffer:D,mipmapLevel:0}}}(J,Ft,vt,r),{result:!0,groupNode:At,geoPackage:J,matrials:vt,texturePackage:Ft,version:I.S3M4,dataVersion:z,volImageBuffer:D,volBounds:T}}function Ce(){s.defined($)&&s.defined(at)&&($.onRuntimeInitialized=function(){et=!0},self.onmessage=T(Ee),self.postMessage(!0))}return function(e){if("undefined"==typeof WebAssembly)return self.onmessage=T(Ee),void self.postMessage(!0);var r=e.data.webAssemblyConfig;return s.defined(r)?a.FeatureDetection.isInternetExplorer()?t([n.buildModuleUrl("ThirdParty/Workers/ie-webworker-promise-polyfill.js")],(function(e){return self.Promise=e,-1!==r.modulePath.indexOf("crunch")?t([r.modulePath],(function(t){s.defined(r.wasmBinaryFile)?(s.defined(t)||(t=self.Module),$=t,Ce()):($=t,Ce())})):t([r.modulePath],(function(t){s.defined(r.wasmBinaryFile)?(s.defined(t)||(t=self.DracoDecoderModule),t(r).then((function(t){at=t,Ce()}))):(at=t(),Ce())}))})):-1!==r.modulePath.indexOf("crunch")?t([r.modulePath],(function(t){s.defined(r.wasmBinaryFile)?(s.defined(t)||(t=self.Module),$=t,Ce()):($=t,Ce())})):t([r.modulePath],(function(t){s.defined(r.wasmBinaryFile)?(s.defined(t)||(t=self.DracoDecoderModule),t(r).then((function(t){at=t,Ce()}))):(at=t(),Ce())})):void 0}}));
