define(["exports","./buildModuleUrl-36ce0ebc","./Ellipsoid-ca2b8eb1","./Cartesian3-c1138337","./Cartesian4-5c264813","./Cartographic-630e5de6","./Check-92c551fb","./defaultValue-2110bb17","./EllipsoidTangentPlane-6f479ced","./Math-cd1437d9","./FeatureDetection-e7fb956a","./PrimitiveType-d9ba7368","./Plane-8f19018a","./Rectangle-52f780a9","./PolygonPipeline-478e7e0d"],(function(t,e,o,a,n,r,i,s,u,d,c,h,l,m,p){"use strict";var w=[];function f(t,e){this.center=a.o.clone(s.u(t,a.o.ZERO)),this.halfAxes=c.p.clone(s.u(e,c.p.ZERO)),this.areaDirty=1}w[0]={num:0,des:"inside"},w[1]={num:4,data:[0,4,7,3],des:"left"},w[2]={num:4,data:[1,2,6,5],des:"right"},w[3]={num:0},w[4]={num:4,data:[0,1,5,4],des:"bottom"},w[5]={num:6,data:[0,1,5,4,7,3],des:"bottom, left"},w[6]={num:6,data:[0,1,2,6,5,4],des:"bottom, right"},w[7]={num:0},w[8]={num:4,data:[2,3,7,6],des:"top"},w[9]={num:6,data:[4,7,6,2,3,0],des:"top, left"},w[10]={num:6,data:[2,3,7,6,5,1],des:"top, right"},w[11]={num:0},w[12]={num:0},w[13]={num:0},w[14]={num:0},w[15]={num:0},w[16]={num:4,data:[0,3,2,1],des:"front"},w[17]={num:6,data:[0,4,7,3,2,1],des:"front, left"},w[18]={num:6,data:[0,3,2,6,5,1],des:"front, right"},w[19]={num:0},w[20]={num:6,data:[0,3,2,1,5,4],des:"front, bottom"},w[21]={num:6,data:[2,1,5,4,7,3],des:"front, bottom, left"},w[22]={num:6,data:[0,3,2,6,5,4],des:"front, bottom, right"},w[23]={num:0},w[24]={num:6,data:[0,3,7,6,2,1],des:"front, top"},w[25]={num:6,data:[0,4,7,6,2,1],des:"front, top, left"},w[26]={num:6,data:[0,3,7,6,5,1],des:"front, top, right"},w[27]={num:0},w[28]={num:0},w[29]={num:0},w[30]={num:0},w[31]={num:0},w[32]={num:4,data:[4,5,6,7],des:"back"},w[33]={num:6,data:[4,5,6,7,3,0],des:"back, left"},w[34]={num:6,data:[1,2,6,7,4,5],des:"back, right"},w[35]={num:0},w[36]={num:6,data:[0,1,5,6,7,4],des:"back, bottom"},w[37]={num:6,data:[0,1,5,6,7,3],des:"back, bottom, left"},w[38]={num:6,data:[0,1,2,6,7,4],des:"back, bottom, right"},w[39]={num:0},w[40]={num:6,data:[2,3,7,4,5,6],des:"back, top"},w[41]={num:6,data:[0,4,5,6,2,3],des:"back, top, left"},w[42]={num:6,data:[1,2,3,7,4,5],des:"back, top, right"},f.packedLength=a.o.packedLength+c.p.packedLength,f.pack=function(t,e,o){return i.o.typeOf.object("value",t),i.o.defined("array",e),o=s.u(o,0),a.o.pack(t.center,e,o),c.p.pack(t.halfAxes,e,o+a.o.packedLength),e},f.unpack=function(t,e,o){return i.o.defined("array",t),e=s.u(e,0),s.e(o)||(o=new f),a.o.unpack(t,e,o.center),c.p.unpack(t,e+a.o.packedLength,o.halfAxes),o};var b=new a.o,x=new a.o,y=new a.o,g=new a.o,M=new a.o,v=new a.o,C=new c.p,O={unitary:new c.p,diagonal:new c.p},z=new a.o,P=new a.o,A=new a.o;f.fromPoints=function(t,e){if(s.e(e)||(e=new f),!s.e(t)||0===t.length)return e.halfAxes=c.p.ZERO,e.center=a.o.ZERO,e;var o,n=t.length,r=a.o.clone(t[0],b);for(o=1;o<n;o++)a.o.add(r,t[o],r);var i=1/n;a.o.multiplyByScalar(r,i,r);var u,d=0,h=0,l=0,m=0,p=0,w=0;for(o=0;o<n;o++)d+=(u=a.o.subtract(t[o],r,x)).x*u.x,h+=u.x*u.y,l+=u.x*u.z,m+=u.y*u.y,p+=u.y*u.z,w+=u.z*u.z;d*=i,h*=i,l*=i,m*=i,p*=i,w*=i;var z=C;z[0]=d,z[1]=h,z[2]=l,z[3]=h,z[4]=m,z[5]=p,z[6]=l,z[7]=p,z[8]=w;var P=c.p.computeEigenDecomposition(z,O),A=c.p.clone(P.unitary,e.halfAxes),N=c.p.getColumn(A,0,g),R=c.p.getColumn(A,1,M),T=c.p.getColumn(A,2,v),E=-Number.MAX_VALUE,I=-Number.MAX_VALUE,L=-Number.MAX_VALUE,S=Number.MAX_VALUE,k=Number.MAX_VALUE,U=Number.MAX_VALUE;for(o=0;o<n;o++)u=t[o],E=Math.max(a.o.dot(N,u),E),I=Math.max(a.o.dot(R,u),I),L=Math.max(a.o.dot(T,u),L),S=Math.min(a.o.dot(N,u),S),k=Math.min(a.o.dot(R,u),k),U=Math.min(a.o.dot(T,u),U);N=a.o.multiplyByScalar(N,.5*(S+E),N),R=a.o.multiplyByScalar(R,.5*(k+I),R),T=a.o.multiplyByScalar(T,.5*(U+L),T);var q=a.o.add(N,R,e.center);a.o.add(q,T,q);var B=y;return B.x=E-S,B.y=I-k,B.z=L-U,a.o.multiplyByScalar(B,.5,B),c.p.multiplyByScale(e.halfAxes,B,e.halfAxes),e};var N=new a.o,R=new a.o;function T(t,e,o,n,r,u,d,h,l,m,p){if(!(s.e(r)&&s.e(u)&&s.e(d)&&s.e(h)&&s.e(l)&&s.e(m)))throw new i.t("all extents (minimum/maximum X/Y/Z) are required.");s.e(p)||(p=new f);var w=p.halfAxes;c.p.setColumn(w,0,e,w),c.p.setColumn(w,1,o,w),c.p.setColumn(w,2,n,w);var b=N;b.x=(r+u)/2,b.y=(d+h)/2,b.z=(l+m)/2;var x=R;x.x=(u-r)/2,x.y=(h-d)/2,x.z=(m-l)/2;var y=p.center;return b=c.p.multiplyByVector(w,b,b),a.o.add(t,b,y),c.p.multiplyByScale(w,x,w),p}var E=new r.a,I=new a.o,L=new r.a,S=new r.a,k=new r.a,U=new r.a,q=new r.a,B=new a.o,_=new a.o,D=new a.o,X=new a.o,V=new a.o,W=new o.o,j=new o.o,Z=new o.o,F=new o.o,G=new o.o,Y=new a.o,H=new a.o,J=new a.o,K=new a.o,Q=new o.o,$=new a.o,tt=new a.o,et=new a.o,ot=new l.o(a.o.UNIT_X,0);f.fromRectangle=function(t,e,n,c,h){if(!s.e(t))throw new i.t("rectangle is required");if(t.width<0||t.width>d.e.TWO_PI)throw new i.t("Rectangle width must be between 0 and 2*pi");if(t.height<0||t.height>d.e.PI)throw new i.t("Rectangle height must be between 0 and pi");if(s.e(c)&&!d.e.equalsEpsilon(c.radii.x,c.radii.y,d.e.EPSILON15))throw new i.t("Ellipsoid must be an ellipsoid of revolution (radii.x == radii.y)");var p,w,f,b,x,y,g;if(e=s.u(e,0),n=s.u(n,0),c=s.u(c,o.t.WGS84),t.width<=d.e.PI){var M=m.h.center(t,E),v=c.cartographicToCartesian(M,I),C=new u.f(v,c);g=C.plane;var O=M.longitude,z=t.south<0&&t.north>0?0:M.latitude,P=r.a.fromRadians(O,t.north,n,L),A=r.a.fromRadians(t.west,t.north,n,S),N=r.a.fromRadians(t.west,z,n,k),R=r.a.fromRadians(t.west,t.south,n,U),at=r.a.fromRadians(O,t.south,n,q),nt=c.cartographicToCartesian(P,B),rt=c.cartographicToCartesian(A,_),it=c.cartographicToCartesian(N,D),st=c.cartographicToCartesian(R,X),ut=c.cartographicToCartesian(at,V),dt=C.projectPointToNearestOnPlane(nt,W),ct=C.projectPointToNearestOnPlane(rt,j),ht=C.projectPointToNearestOnPlane(it,Z),lt=C.projectPointToNearestOnPlane(st,F),mt=C.projectPointToNearestOnPlane(ut,G);return w=-(p=Math.min(ct.x,ht.x,lt.x)),b=Math.max(ct.y,dt.y),f=Math.min(lt.y,mt.y),A.height=R.height=e,rt=c.cartographicToCartesian(A,_),st=c.cartographicToCartesian(R,X),x=Math.min(l.o.getPointDistance(g,rt),l.o.getPointDistance(g,st)),y=n,T(C.origin,C.xAxis,C.yAxis,C.zAxis,p,w,f,b,x,y,h)}var pt=t.south>0,wt=t.north<0,ft=pt?t.south:wt?t.north:0,bt=m.h.center(t,E).longitude,xt=a.o.fromRadians(bt,ft,n,c,Y);xt.z=0;var yt=Math.abs(xt.x)<d.e.EPSILON10&&Math.abs(xt.y)<d.e.EPSILON10?a.o.UNIT_X:a.o.normalize(xt,H),gt=a.o.UNIT_Z,Mt=a.o.cross(yt,gt,J);g=l.o.fromPointNormal(xt,yt,ot);var vt=a.o.fromRadians(bt+d.e.PI_OVER_TWO,ft,n,c,K);p=-(w=a.o.dot(l.o.projectPointOntoPlane(g,vt,Q),Mt)),b=a.o.fromRadians(0,t.north,wt?e:n,c,$).z,f=a.o.fromRadians(0,t.south,pt?e:n,c,tt).z;var Ct=a.o.fromRadians(t.east,ft,n,c,et);return T(xt,Mt,gt,yt,p,w,f,b,x=l.o.getPointDistance(g,Ct),y=0,h)},f.clone=function(t,e){if(s.e(t))return s.e(e)?(a.o.clone(t.center,e.center),c.p.clone(t.halfAxes,e.halfAxes),e.areaDirty=1,e):new f(t.center,t.halfAxes)},f.intersectPlane=function(t,o){if(!s.e(t))throw new i.t("box is required.");if(!s.e(o))throw new i.t("plane is required.");var n=t.center,r=o.normal,u=t.halfAxes,d=r.x,h=r.y,l=r.z,m=Math.abs(d*u[c.p.COLUMN0ROW0]+h*u[c.p.COLUMN0ROW1]+l*u[c.p.COLUMN0ROW2])+Math.abs(d*u[c.p.COLUMN1ROW0]+h*u[c.p.COLUMN1ROW1]+l*u[c.p.COLUMN1ROW2])+Math.abs(d*u[c.p.COLUMN2ROW0]+h*u[c.p.COLUMN2ROW1]+l*u[c.p.COLUMN2ROW2]),p=a.o.dot(r,n)+o.distance;return p<=-m?e.S.OUTSIDE:p>=m?e.S.INSIDE:e.S.INTERSECTING};var at=new a.o,nt=new a.o,rt=new a.o,it=new a.o,st=new a.o;f.distanceSquaredTo=function(t,e){if(!s.e(t))throw new i.t("box is required.");if(!s.e(e))throw new i.t("cartesian is required.");var o=a.o.subtract(e,t.center,N),n=t.halfAxes,r=c.p.getColumn(n,0,at),u=c.p.getColumn(n,1,nt),d=c.p.getColumn(n,2,rt),h=a.o.magnitude(r),l=a.o.magnitude(u),m=a.o.magnitude(d);a.o.normalize(r,r),a.o.normalize(u,u),a.o.normalize(d,d);var p=it;p.x=a.o.dot(o,r),p.y=a.o.dot(o,u),p.z=a.o.dot(o,d);var w,f=0;return p.x<-h?f+=(w=p.x+h)*w:p.x>h&&(f+=(w=p.x-h)*w),p.y<-l?f+=(w=p.y+l)*w:p.y>l&&(f+=(w=p.y-l)*w),p.z<-m?f+=(w=p.z+m)*w:p.z>m&&(f+=(w=p.z-m)*w),f};var ut=new a.o,dt=new a.o;f.computePlaneDistances=function(t,o,n,r){if(!s.e(t))throw new i.t("box is required.");if(!s.e(o))throw new i.t("position is required.");if(!s.e(n))throw new i.t("direction is required.");s.e(r)||(r=new e.o);var u=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,h=t.center,l=t.halfAxes,m=c.p.getColumn(l,0,at),p=c.p.getColumn(l,1,nt),w=c.p.getColumn(l,2,rt),f=a.o.add(m,p,ut);a.o.add(f,w,f),a.o.add(f,h,f);var b=a.o.subtract(f,o,dt),x=a.o.dot(n,b);return u=Math.min(x,u),d=Math.max(x,d),a.o.add(h,m,f),a.o.add(f,p,f),a.o.subtract(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),d=Math.max(x,d),a.o.add(h,m,f),a.o.subtract(f,p,f),a.o.add(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),d=Math.max(x,d),a.o.add(h,m,f),a.o.subtract(f,p,f),a.o.subtract(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),d=Math.max(x,d),a.o.subtract(h,m,f),a.o.add(f,p,f),a.o.add(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),d=Math.max(x,d),a.o.subtract(h,m,f),a.o.add(f,p,f),a.o.subtract(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),d=Math.max(x,d),a.o.subtract(h,m,f),a.o.subtract(f,p,f),a.o.add(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),d=Math.max(x,d),a.o.subtract(h,m,f),a.o.subtract(f,p,f),a.o.subtract(f,w,f),a.o.subtract(f,o,b),x=a.o.dot(n,b),u=Math.min(x,u),d=Math.max(x,d),r.start=u,r.stop=d,r};var ct=new e.i;f.isOccluded=function(t,o){if(!s.e(t))throw new i.t("box is required.");if(!s.e(o))throw new i.t("occluder is required.");var a=e.i.fromOrientedBoundingBox(t,ct);return!o.isBoundingSphereVisible(a)},f.prototype.intersectPlane=function(t){return f.intersectPlane(this,t)},f.prototype.distanceSquaredTo=function(t){return f.distanceSquaredTo(this,t)},f.prototype.computePlaneDistances=function(t,e,o){return f.computePlaneDistances(this,t,e,o)},f.prototype.isOccluded=function(t){return f.isOccluded(this,t)},f.equals=function(t,e){return t===e||s.e(t)&&s.e(e)&&a.o.equals(t.center,e.center)&&c.p.equals(t.halfAxes,e.halfAxes)},f.prototype.clone=function(t){return f.clone(this,t)},f.prototype.equals=function(t){return f.equals(this,t)};var ht=new n.e;f.prototype._updateBBox=function(){if(1==this.areaDirty){var t=c.p.getColumn(this.halfAxes,0,at),e=a.o.clone(a.o.negate(t,z)),o=c.p.getColumn(this.halfAxes,1,nt),n=a.o.clone(a.o.negate(o,z)),r=c.p.getColumn(this.halfAxes,2,rt),i=a.o.clone(a.o.negate(r,z));this.bbox=[],a.o.add(this.center,o,z),a.o.add(z,i,P),a.o.add(P,e,A),this.bbox[0]=new a.o(A.x,A.y,A.z),a.o.add(P,t,A),this.bbox[1]=new a.o(A.x,A.y,A.z),a.o.add(z,r,P),a.o.add(P,t,A),this.bbox[2]=new a.o(A.x,A.y,A.z),a.o.add(P,e,A),this.bbox[3]=new a.o(A.x,A.y,A.z),a.o.add(this.center,n,z),a.o.add(z,i,P),a.o.add(P,e,A),this.bbox[4]=new a.o(A.x,A.y,A.z),a.o.add(P,t,A),this.bbox[5]=new a.o(A.x,A.y,A.z),a.o.add(z,r,P),a.o.add(P,t,A),this.bbox[6]=new a.o(A.x,A.y,A.z),a.o.add(P,e,A),this.bbox[7]=new a.o(A.x,A.y,A.z);var s=a.o.magnitude(t),u=a.o.magnitude(o),d=a.o.magnitude(r),h=new a.o(-s,-u,-d),l=new a.o(s,u,d);if(s*u*d==0)return void(this.areaDirty=-1);a.o.normalize(t,t),a.o.normalize(o,o),a.o.normalize(r,r),this.u=a.o.clone(t),this.v=a.o.clone(o),this.w=a.o.clone(r),this.posMin=h,this.posMaX=l,this.areaDirty=0}};var lt=[];lt.push(new o.o),lt.push(new o.o),lt.push(new o.o),lt.push(new o.o),lt.push(new o.o),lt.push(new o.o);var mt=new r.a,pt=new a.o;f.prototype.calculateBoxArea=function(t,e,o,r,i,u,c,l){this._updateBBox();var m=t,f=a.o.subtract(m,this.center,st);if(-1==this.areaDirty){var b=i/r*(N=-1!=u?u:.5*a.o.distance(this.posMaX,this.posMin))/o;return d.e.PI*b*b}var x=a.o.fromElements(a.o.dot(f,this.u),a.o.dot(f,this.v),a.o.dot(f,this.w),ut),y=(x.x<this.posMin.x?1:0)+((x.x>this.posMaX.x?1:0)<<1)+((x.z<this.posMin.z?1:0)<<2)+((x.z>this.posMaX.z?1:0)<<3)+((x.y>this.posMaX.y?1:0)<<4)+((x.y<this.posMin.y?1:0)<<5);if(y>42)return console.log("area calculation is wrong"),-100;var g=w[y];if(0==g.num){b=i/r*(N=-1!=u?u:.5*a.o.distance(this.posMaX,this.posMin))/o;return d.e.PI*b*b}if(0==g.num)return console.log("area calculation is wrong"),-100;for(var M,v=[],C=c,O=0;O<g.num;O++){var z=lt[O],P=this.bbox[g.data[O]];M=!1;var A,N,R=d.e.PI;if(3===e)(A=h.y.multiplyByVector(C,n.e.fromElements(P.x,P.y,P.z,1),ht)).z<0&&(M=!0,-1==N&&(R=d.e.PI_OVER_FOUR,o=a.o.magnitude(f)));else{var T=l,E=T.ellipsoid.cartesianToCartographic(P,mt);s.e(E)?(T.project(E,pt),(A=h.y.multiplyByVector(C,n.e.fromElements(pt.z,pt.x,pt.y,1),ht)).z<0&&(M=!0)):M=!0}if(1==M)return R*(b=i/r*(N=-1!=u?u:.5*a.o.distance(this.posMaX,this.posMin))/o)*b;z.x=A.x/A.w,z.y=i-A.y/A.w,v.push(z)}return Math.abs(p.A.computeArea2D(v))},f.prototype.computeCorners=function(t){return f.computeCorners(this,t)};const wt=new a.o,ft=new a.o,bt=new a.o;f.computeCorners=function(t,e){i.o.typeOf.object("box",t),s.e(e)||(e=[new a.o,new a.o,new a.o,new a.o,new a.o,new a.o,new a.o,new a.o]);const o=t.center,n=t.halfAxes,r=c.p.getColumn(n,0,wt),u=c.p.getColumn(n,1,ft),d=c.p.getColumn(n,2,bt);return a.o.clone(o,e[0]),a.o.subtract(e[0],r,e[0]),a.o.subtract(e[0],u,e[0]),a.o.subtract(e[0],d,e[0]),a.o.clone(o,e[1]),a.o.subtract(e[1],r,e[1]),a.o.subtract(e[1],u,e[1]),a.o.add(e[1],d,e[1]),a.o.clone(o,e[2]),a.o.subtract(e[2],r,e[2]),a.o.add(e[2],u,e[2]),a.o.subtract(e[2],d,e[2]),a.o.clone(o,e[3]),a.o.subtract(e[3],r,e[3]),a.o.add(e[3],u,e[3]),a.o.add(e[3],d,e[3]),a.o.clone(o,e[4]),a.o.add(e[4],r,e[4]),a.o.subtract(e[4],u,e[4]),a.o.subtract(e[4],d,e[4]),a.o.clone(o,e[5]),a.o.add(e[5],r,e[5]),a.o.subtract(e[5],u,e[5]),a.o.add(e[5],d,e[5]),a.o.clone(o,e[6]),a.o.add(e[6],r,e[6]),a.o.add(e[6],u,e[6]),a.o.subtract(e[6],d,e[6]),a.o.clone(o,e[7]),a.o.add(e[7],r,e[7]),a.o.add(e[7],u,e[7]),a.o.add(e[7],d,e[7]),e},t.p=f}));
