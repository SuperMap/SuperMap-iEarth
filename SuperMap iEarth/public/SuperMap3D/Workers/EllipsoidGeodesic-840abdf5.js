define(["exports","./Cartographic-81e9e8b2","./Check-ff445961","./when-39df26e1","./Cartesian2-59a54ee7","./Math-5e067eb3"],(function(t,a,e,i,n,s){"use strict";function r(t,a,e,i,n,s,r){var h=function(t,a){return t*a*(4+t*(4-3*a))/16}(t,e);return(1-h)*t*a*(i+h*n*(r+h*s*(2*r*r-1)))}var h=new a.o,o=new a.o;function d(t,i,n,d){var c=a.o.normalize(d.cartographicToCartesian(i,o),h),u=a.o.normalize(d.cartographicToCartesian(n,o),o);e.o.typeOf.number.greaterThanOrEquals("value",Math.abs(Math.abs(a.o.angleBetween(c,u))-Math.PI),.0125),function(t,a,e,i,n,h,o){var d,c,u,M,_,g=(a-e)/a,l=h-i,f=Math.atan((1-g)*Math.tan(n)),p=Math.atan((1-g)*Math.tan(o)),v=Math.cos(f),m=Math.sin(f),H=Math.cos(p),O=Math.sin(p),b=v*H,q=v*O,S=m*O,w=m*H,U=l,A=s.e.TWO_PI,R=Math.cos(U),y=Math.sin(U);do{R=Math.cos(U),y=Math.sin(U);var C,P=q-w*R;u=Math.sqrt(H*H*y*y+P*P),c=S+b*R,d=Math.atan2(u,c),0===u?(C=0,M=1):M=1-(C=b*y/u)*C,A=U,_=c-2*S/M,isNaN(_)&&(_=0),U=l+r(g,C,M,d,u,c,_)}while(Math.abs(U-A)>s.e.EPSILON12);var E=M*(a*a-e*e)/(e*e),T=E*(256+E*(E*(74-47*E)-128))/1024,x=_*_,D=e*(1+E*(4096+E*(E*(320-175*E)-768))/16384)*(d-T*u*(_+T*(c*(2*x-1)-T*_*(4*u*u-3)*(4*x-3)/6)/4)),I=Math.atan2(H*y,q-w*R),N=Math.atan2(v*y,q*R-w);t._distance=D,t._startHeading=I,t._endHeading=N,t._uSquared=E}(t,d.maximumRadius,d.minimumRadius,i.longitude,i.latitude,n.longitude,n.latitude),t._start=a.a.clone(i,t._start),t._end=a.a.clone(n,t._end),t._start.height=0,t._end.height=0,function(t){var a=t._uSquared,e=t._ellipsoid.maximumRadius,i=t._ellipsoid.minimumRadius,n=(e-i)/e,s=Math.cos(t._startHeading),r=Math.sin(t._startHeading),h=(1-n)*Math.tan(t._start.latitude),o=1/Math.sqrt(1+h*h),d=o*h,c=Math.atan2(h,s),u=o*r,M=u*u,_=1-M,g=Math.sqrt(_),l=a/4,f=l*l,p=f*l,v=f*f,m=1+l-3*f/4+5*p/4-175*v/64,H=1-l+15*f/8-35*p/8,O=1-3*l+35*f/4,b=1-5*l,q=m*c-H*Math.sin(2*c)*l/2-O*Math.sin(4*c)*f/16-b*Math.sin(6*c)*p/48-5*Math.sin(8*c)*v/512,S=t._constants;S.a=e,S.b=i,S.f=n,S.cosineHeading=s,S.sineHeading=r,S.tanU=h,S.cosineU=o,S.sineU=d,S.sigma=c,S.sineAlpha=u,S.sineSquaredAlpha=M,S.cosineSquaredAlpha=_,S.cosineAlpha=g,S.u2Over4=l,S.u4Over16=f,S.u6Over64=p,S.u8Over256=v,S.a0=m,S.a1=H,S.a2=O,S.a3=b,S.distanceRatio=q}(t)}function c(t,e,s){var r=i.u(s,n.t.WGS84);this._ellipsoid=r,this._start=new a.a,this._end=new a.a,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,i.e(t)&&i.e(e)&&d(this,t,e,r)}Object.defineProperties(c.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return e.o.defined("distance",this._distance),this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return e.o.defined("distance",this._distance),this._startHeading}},endHeading:{get:function(){return e.o.defined("distance",this._distance),this._endHeading}}}),c.prototype.setEndPoints=function(t,a){e.o.defined("start",t),e.o.defined("end",a),d(this,t,a,this._ellipsoid)},c.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},c.prototype.interpolateUsingSurfaceDistance=function(t,n){e.o.defined("distance",this._distance);var s=this._constants,h=s.distanceRatio+t/s.b,o=Math.cos(2*h),d=Math.cos(4*h),c=Math.cos(6*h),u=Math.sin(2*h),M=Math.sin(4*h),_=Math.sin(6*h),g=Math.sin(8*h),l=h*h,f=h*l,p=s.u8Over256,v=s.u2Over4,m=s.u6Over64,H=s.u4Over16,O=2*f*p*o/3+h*(1-v+7*H/4-15*m/4+579*p/64-(H-15*m/4+187*p/16)*o-(5*m/4-115*p/16)*d-29*p*c/16)+(v/2-H+71*m/32-85*p/16)*u+(5*H/16-5*m/4+383*p/96)*M-l*((m-11*p/2)*u+5*p*M/2)+(29*m/96-29*p/16)*_+539*p*g/1536,b=Math.asin(Math.sin(O)*s.cosineAlpha),q=Math.atan(s.a/s.b*Math.tan(b));O-=s.sigma;var S=Math.cos(2*s.sigma+O),w=Math.sin(O),U=Math.cos(O),A=s.cosineU*U,R=s.sineU*w,y=Math.atan2(w*s.sineHeading,A-R*s.cosineHeading)-r(s.f,s.sineAlpha,s.cosineSquaredAlpha,O,w,U,S);return i.e(n)?(n.longitude=this._start.longitude+y,n.latitude=q,n.height=0,n):new a.a(this._start.longitude+y,q,0)},t.E=c}));
