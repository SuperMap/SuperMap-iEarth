import{a as z}from"./chunk-W2SWZQAA.js";import"./chunk-J67OD5PY.js";import"./chunk-XYWAVEQ2.js";import"./chunk-D45ASFTR.js";import"./chunk-6X6ULKRC.js";import"./chunk-REXJO6A6.js";import"./chunk-EUSYH4JF.js";import{a as G}from"./chunk-44AFRGCG.js";import{a as B}from"./chunk-UIA2BV6O.js";import{d as q,k as M,l as N}from"./chunk-CJHFPVIB.js";import"./chunk-NPAFDOYL.js";import{b as L}from"./chunk-SSYG2MIY.js";import{a as W}from"./chunk-SRPTWKHW.js";import"./chunk-6S43R6PL.js";import"./chunk-Z4SOZDEW.js";import"./chunk-MX7ZM7WW.js";import"./chunk-EHDXVZQM.js";import"./chunk-NLYLRNUA.js";import{b as u}from"./chunk-7TOCOFC3.js";import"./chunk-ZVKIUA3Y.js";import"./chunk-3HZNWEV7.js";import{a as p}from"./chunk-LBR6REQR.js";import{a as C}from"./chunk-GXFCHGTA.js";import{a as c}from"./chunk-UBHQMGET.js";import"./chunk-EDZQSM3T.js";import{a as H}from"./chunk-PJGSCWXZ.js";import{a as n}from"./chunk-NUC3LT2W.js";import"./chunk-SFC4FDPW.js";var R=new p,V=new p;function _(i){i=c(i,c.EMPTY_OBJECT);var e=i.positions,o=i.maximumHeights,r=i.minimumHeights;if(!n(e))throw new H("options.positions is required.");if(n(o)&&o.length!==e.length)throw new H("options.positions and options.maximumHeights must have the same length.");if(n(r)&&r.length!==e.length)throw new H("options.positions and options.minimumHeights must have the same length.");var t=c(i.granularity,C.RADIANS_PER_DEGREE),a=c(i.ellipsoid,u.WGS84);this._positions=e,this._minimumHeights=r,this._maximumHeights=o,this._granularity=t,this._ellipsoid=u.clone(a),this._workerName="createWallOutlineGeometry";var m=1+e.length*p.packedLength+2;n(r)&&(m+=r.length),n(o)&&(m+=o.length),this.packedLength=m+u.packedLength+1}_.pack=function(i,e,o){if(!n(i))throw new H("value is required");if(!n(e))throw new H("array is required");o=c(o,0);var r,t=i._positions,a=t.length;for(e[o++]=a,r=0;r<a;++r,o+=p.packedLength)p.pack(t[r],e,o);var m=i._minimumHeights;if(a=n(m)?m.length:0,e[o++]=a,n(m))for(r=0;r<a;++r)e[o++]=m[r];var s=i._maximumHeights;if(a=n(s)?s.length:0,e[o++]=a,n(s))for(r=0;r<a;++r)e[o++]=s[r];return u.pack(i._ellipsoid,e,o),o+=u.packedLength,e[o]=i._granularity,e};var x=u.clone(u.UNIT_SPHERE),A={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:x,granularity:void 0};_.unpack=function(i,e,o){if(!n(i))throw new H("array is required");e=c(e,0);var r,t=i[e++],a=new Array(t);for(r=0;r<t;++r,e+=p.packedLength)a[r]=p.unpack(i,e);t=i[e++];var m;if(t>0)for(m=new Array(t),r=0;r<t;++r)m[r]=i[e++];t=i[e++];var s;if(t>0)for(s=new Array(t),r=0;r<t;++r)s[r]=i[e++];var g=u.unpack(i,e,x);e+=u.packedLength;var h=i[e];return n(o)?(o._positions=a,o._minimumHeights=m,o._maximumHeights=s,o._ellipsoid=u.clone(g,o._ellipsoid),o._granularity=h,o):(A.positions=a,A.minimumHeights=m,A.maximumHeights=s,A.granularity=h,new _(A))};_.fromConstantHeights=function(i){i=c(i,c.EMPTY_OBJECT);var e=i.positions;if(!n(e))throw new H("options.positions is required.");var o,r,t=i.minimumHeight,a=i.maximumHeight,m=n(t),s=n(a);if(m||s){var g=e.length;o=m?new Array(g):void 0,r=s?new Array(g):void 0;for(var h=0;h<g;++h)m&&(o[h]=t),s&&(r[h]=a)}var w={positions:e,maximumHeights:r,minimumHeights:o,ellipsoid:i.ellipsoid};return new _(w)};_.createGeometry=function(i){var e=i._positions,o=i._minimumHeights,r=i._maximumHeights,t=i._granularity,a=i._ellipsoid,m=z.computePositions(a,e,r,o,t,!1);if(!!n(m)){var s=m.pos.bottomPositions,g=m.pos.topPositions,h=g.length,w=h*2,l=new Float64Array(w),E=0;h/=3;var f;for(f=0;f<h;++f){var b=f*3,k=p.fromArray(g,b,R),P=p.fromArray(s,b,V);l[E++]=P.x,l[E++]=P.y,l[E++]=P.z,l[E++]=k.x,l[E++]=k.y,l[E++]=k.z}var J=new B({position:new N({componentDatatype:W.DOUBLE,componentsPerAttribute:3,values:l})}),y=w/3;w=2*y-4+y;var v=G.createTypedArray(y,w),d=0;for(f=0;f<y-2;f+=2){var O=f,D=f+2,Y=p.fromArray(l,O*3,R),F=p.fromArray(l,D*3,V);if(!p.equalsEpsilon(Y,F,C.EPSILON10)){var S=f+1,U=f+3;v[d++]=S,v[d++]=O,v[d++]=S,v[d++]=U,v[d++]=O,v[d++]=D}}return v[d++]=y-2,v[d++]=y-1,new M({attributes:J,indices:v,primitiveType:L.LINES,boundingSphere:new q.fromVertices(l)})}};var T=_;function j(i,e){return n(e)&&(i=T.unpack(i,e)),i._ellipsoid=u.clone(i._ellipsoid),T.createGeometry(i)}var fi=j;export{fi as default};
