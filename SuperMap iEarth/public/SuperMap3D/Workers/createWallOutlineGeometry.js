define(["./defaultValue-2110bb17","./Ellipsoid-ca2b8eb1","./buildModuleUrl-36ce0ebc","./Cartesian3-c1138337","./ComponentDatatype-3cfb1146","./Check-92c551fb","./GeometryAttribute-b12ab6bd","./GeometryAttributes-3cad3ff9","./IndexDatatype-d833345d","./Math-cd1437d9","./PrimitiveType-d9ba7368","./WallGeometryLibrary-c290d2b9","./Cartographic-630e5de6","./FeatureDetection-e7fb956a","./defer-a21481c0","./Rectangle-52f780a9","./Event-589349b0","./RuntimeError-6daf0e01","./WebGLConstants-92042d9e","./Cartesian4-5c264813","./arrayRemoveDuplicates-5016d6bb","./PolylinePipeline-92dcfbc3","./EllipsoidGeodesic-262ae711","./EllipsoidRhumbLine-89d13f20","./IntersectionTests-88230423","./Plane-8f19018a"],(function(e,i,t,o,n,r,a,s,m,u,l,p,h,d,c,g,f,y,v,_,w,b,H,E,k,A){"use strict";var x=new o.o,L=new o.o;function P(t){var n=(t=e.u(t,e.u.EMPTY_OBJECT)).positions,a=t.maximumHeights,s=t.minimumHeights;if(!e.e(n))throw new r.t("options.positions is required.");if(e.e(a)&&a.length!==n.length)throw new r.t("options.positions and options.maximumHeights must have the same length.");if(e.e(s)&&s.length!==n.length)throw new r.t("options.positions and options.minimumHeights must have the same length.");var m=e.u(t.granularity,u.e.RADIANS_PER_DEGREE),l=e.u(t.ellipsoid,i.t.WGS84);this._positions=n,this._minimumHeights=s,this._maximumHeights=a,this._granularity=m,this._ellipsoid=i.t.clone(l),this._workerName="createWallOutlineGeometry";var p=1+n.length*o.o.packedLength+2;e.e(s)&&(p+=s.length),e.e(a)&&(p+=a.length),this.packedLength=p+i.t.packedLength+1}P.pack=function(t,n,a){if(!e.e(t))throw new r.t("value is required");if(!e.e(n))throw new r.t("array is required");a=e.u(a,0);var s,m=t._positions,u=m.length;for(n[a++]=u,s=0;s<u;++s,a+=o.o.packedLength)o.o.pack(m[s],n,a);var l=t._minimumHeights;if(u=e.e(l)?l.length:0,n[a++]=u,e.e(l))for(s=0;s<u;++s)n[a++]=l[s];var p=t._maximumHeights;if(u=e.e(p)?p.length:0,n[a++]=u,e.e(p))for(s=0;s<u;++s)n[a++]=p[s];return i.t.pack(t._ellipsoid,n,a),n[a+=i.t.packedLength]=t._granularity,n};var D=i.t.clone(i.t.UNIT_SPHERE),C={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:D,granularity:void 0};return P.unpack=function(t,n,a){if(!e.e(t))throw new r.t("array is required");n=e.u(n,0);var s,m,u,l=t[n++],p=new Array(l);for(s=0;s<l;++s,n+=o.o.packedLength)p[s]=o.o.unpack(t,n);if((l=t[n++])>0)for(m=new Array(l),s=0;s<l;++s)m[s]=t[n++];if((l=t[n++])>0)for(u=new Array(l),s=0;s<l;++s)u[s]=t[n++];var h=i.t.unpack(t,n,D),d=t[n+=i.t.packedLength];return e.e(a)?(a._positions=p,a._minimumHeights=m,a._maximumHeights=u,a._ellipsoid=i.t.clone(h,a._ellipsoid),a._granularity=d,a):(C.positions=p,C.minimumHeights=m,C.maximumHeights=u,C.granularity=d,new P(C))},P.fromConstantHeights=function(i){var t=(i=e.u(i,e.u.EMPTY_OBJECT)).positions;if(!e.e(t))throw new r.t("options.positions is required.");var o,n,a=i.minimumHeight,s=i.maximumHeight,m=e.e(a),u=e.e(s);if(m||u){var l=t.length;o=m?new Array(l):void 0,n=u?new Array(l):void 0;for(var p=0;p<l;++p)m&&(o[p]=a),u&&(n[p]=s)}return new P({positions:t,maximumHeights:n,minimumHeights:o,ellipsoid:i.ellipsoid})},P.createGeometry=function(i){var r=i._positions,h=i._minimumHeights,d=i._maximumHeights,c=i._granularity,g=i._ellipsoid,f=p.D.computePositions(g,r,d,h,c,!1);if(e.e(f)){var y,v=f.pos.bottomPositions,_=f.pos.topPositions,w=_.length,b=2*w,H=new Float64Array(b),E=0;for(w/=3,y=0;y<w;++y){var k=3*y,A=o.o.fromArray(_,k,x),P=o.o.fromArray(v,k,L);H[E++]=P.x,H[E++]=P.y,H[E++]=P.z,H[E++]=A.x,H[E++]=A.y,H[E++]=A.z}var D=new s.a({position:new a.o({componentDatatype:n.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:H})}),C=b/3;b=2*C-4+C;var G=m.IndexDatatype.createTypedArray(C,b),T=0;for(y=0;y<C-2;y+=2){var I=y,R=y+2,q=o.o.fromArray(H,3*I,x),S=o.o.fromArray(H,3*R,L);if(!o.o.equalsEpsilon(q,S,u.e.EPSILON10)){var N=y+1,O=y+3;G[T++]=N,G[T++]=I,G[T++]=N,G[T++]=O,G[T++]=I,G[T++]=R}}return G[T++]=C-2,G[T++]=C-1,new a.I({attributes:D,indices:G,primitiveType:l._0xa706e5.LINES,boundingSphere:new t.i.fromVertices(H)})}},function(t,o){return e.e(o)&&(t=P.unpack(t,o)),t._ellipsoid=i.t.clone(t._ellipsoid),P.createGeometry(t)}}));
