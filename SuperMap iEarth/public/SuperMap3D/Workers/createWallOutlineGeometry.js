define(["./when-39df26e1","./Cartesian2-59a54ee7","./buildModuleUrl-1b968a9d","./Cartographic-81e9e8b2","./ComponentDatatype-7d28dd1c","./Check-ff445961","./GeometryAttribute-9b3921a3","./GeometryAttributes-11421d3c","./IndexDatatype-be421fbf","./Math-5e067eb3","./FeatureDetection-2d4141ff","./WallGeometryLibrary-0d3ba1fb","./Event-e109b23e","./RuntimeError-251a1d8d","./WebGLConstants-42651efd","./Cartesian4-a56bd360","./arrayRemoveDuplicates-3deab545","./PolylinePipeline-0d72c6c0","./EllipsoidGeodesic-840abdf5","./EllipsoidRhumbLine-61b02483","./IntersectionTests-036daea1","./Plane-775a5120"],(function(e,i,t,o,n,r,a,s,m,u,l,p,h,d,g,f,c,y,v,w,_,b){"use strict";var H=new o.o,E=new o.o;function k(t){var n=(t=e.u(t,e.u.EMPTY_OBJECT)).positions,a=t.maximumHeights,s=t.minimumHeights;if(!e.e(n))throw new r.t("options.positions is required.");if(e.e(a)&&a.length!==n.length)throw new r.t("options.positions and options.maximumHeights must have the same length.");if(e.e(s)&&s.length!==n.length)throw new r.t("options.positions and options.minimumHeights must have the same length.");var m=e.u(t.granularity,u.e.RADIANS_PER_DEGREE),l=e.u(t.ellipsoid,i.t.WGS84);this._positions=n,this._minimumHeights=s,this._maximumHeights=a,this._granularity=m,this._ellipsoid=i.t.clone(l),this._workerName="createWallOutlineGeometry";var p=1+n.length*o.o.packedLength+2;e.e(s)&&(p+=s.length),e.e(a)&&(p+=a.length),this.packedLength=p+i.t.packedLength+1}k.pack=function(t,n,a){if(!e.e(t))throw new r.t("value is required");if(!e.e(n))throw new r.t("array is required");a=e.u(a,0);var s,m=t._positions,u=m.length;for(n[a++]=u,s=0;s<u;++s,a+=o.o.packedLength)o.o.pack(m[s],n,a);var l=t._minimumHeights;if(u=e.e(l)?l.length:0,n[a++]=u,e.e(l))for(s=0;s<u;++s)n[a++]=l[s];var p=t._maximumHeights;if(u=e.e(p)?p.length:0,n[a++]=u,e.e(p))for(s=0;s<u;++s)n[a++]=p[s];return i.t.pack(t._ellipsoid,n,a),n[a+=i.t.packedLength]=t._granularity,n};var A=i.t.clone(i.t.UNIT_SPHERE),x={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:A,granularity:void 0};return k.unpack=function(t,n,a){if(!e.e(t))throw new r.t("array is required");n=e.u(n,0);var s,m,u,l=t[n++],p=new Array(l);for(s=0;s<l;++s,n+=o.o.packedLength)p[s]=o.o.unpack(t,n);if((l=t[n++])>0)for(m=new Array(l),s=0;s<l;++s)m[s]=t[n++];if((l=t[n++])>0)for(u=new Array(l),s=0;s<l;++s)u[s]=t[n++];var h=i.t.unpack(t,n,A),d=t[n+=i.t.packedLength];return e.e(a)?(a._positions=p,a._minimumHeights=m,a._maximumHeights=u,a._ellipsoid=i.t.clone(h,a._ellipsoid),a._granularity=d,a):(x.positions=p,x.minimumHeights=m,x.maximumHeights=u,x.granularity=d,new k(x))},k.fromConstantHeights=function(i){var t=(i=e.u(i,e.u.EMPTY_OBJECT)).positions;if(!e.e(t))throw new r.t("options.positions is required.");var o,n,a=i.minimumHeight,s=i.maximumHeight,m=e.e(a),u=e.e(s);if(m||u){var l=t.length;o=m?new Array(l):void 0,n=u?new Array(l):void 0;for(var p=0;p<l;++p)m&&(o[p]=a),u&&(n[p]=s)}return new k({positions:t,maximumHeights:n,minimumHeights:o,ellipsoid:i.ellipsoid})},k.createGeometry=function(i){var r=i._positions,h=i._minimumHeights,d=i._maximumHeights,g=i._granularity,f=i._ellipsoid,c=p.D.computePositions(f,r,d,h,g,!1);if(e.e(c)){var y,v=c.pos.bottomPositions,w=c.pos.topPositions,_=w.length,b=2*_,k=new Float64Array(b),A=0;for(_/=3,y=0;y<_;++y){var x=3*y,L=o.o.fromArray(w,x,H),P=o.o.fromArray(v,x,E);k[A++]=P.x,k[A++]=P.y,k[A++]=P.z,k[A++]=L.x,k[A++]=L.y,k[A++]=L.z}var D=new s.a({position:new a.o({componentDatatype:n.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:k})}),C=b/3;b=2*C-4+C;var G=m.IndexDatatype.createTypedArray(C,b),I=0;for(y=0;y<C-2;y+=2){var T=y,R=y+2,q=o.o.fromArray(k,3*T,H),S=o.o.fromArray(k,3*R,E);if(!o.o.equalsEpsilon(q,S,u.e.EPSILON10)){var N=y+1,O=y+3;G[I++]=N,G[I++]=T,G[I++]=N,G[I++]=O,G[I++]=T,G[I++]=R}}return G[I++]=C-2,G[I++]=C-1,new a.I({attributes:D,indices:G,primitiveType:l._0x2355b9.LINES,boundingSphere:new t.i.fromVertices(k)})}},function(t,o){return e.e(o)&&(t=k.unpack(t,o)),t._ellipsoid=i.t.clone(t._ellipsoid),k.createGeometry(t)}}));
