define(["exports","./Cartesian2-b72655a5","./Cartesian3-3a8bdb0b","./Cartographic-a2c313d7","./Check-52a7d806","./when-92c6cf3c","./FeatureDetection-cec0163f","./Math-ecf82623","./Cartesian4-72b88c9e","./buildModuleUrl-9eef8841","./RuntimeError-c6a62a80"],(function(e,t,n,r,o,a,i,s,u,l,c){"use strict";var f=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3});function d(e,t,n,r){this[0]=a.u(e,0),this[1]=a.u(n,0),this[2]=a.u(t,0),this[3]=a.u(r,0)}d.packedLength=4,d.pack=function(e,t,n){return o.o.typeOf.object("value",e),o.o.defined("array",t),n=a.u(n,0),t[n++]=e[0],t[n++]=e[1],t[n++]=e[2],t[n++]=e[3],t},d.unpack=function(e,t,n){return o.o.defined("array",e),t=a.u(t,0),a.e(n)||(n=new d),n[0]=e[t++],n[1]=e[t++],n[2]=e[t++],n[3]=e[t++],n},d.clone=function(e,t){if(a.e(e))return a.e(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):new d(e[0],e[2],e[1],e[3])},d.fromArray=function(e,t,n){return o.o.defined("array",e),t=a.u(t,0),a.e(n)||(n=new d),n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],n},d.fromColumnMajorArray=function(e,t){return o.o.defined("values",e),d.clone(e,t)},d.fromRowMajorArray=function(e,t){return o.o.defined("values",e),a.e(t)?(t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3],t):new d(e[0],e[1],e[2],e[3])},d.fromScale=function(e,t){return o.o.typeOf.object("scale",e),a.e(t)?(t[0]=e.x,t[1]=0,t[2]=0,t[3]=e.y,t):new d(e.x,0,0,e.y)},d.fromUniformScale=function(e,t){return o.o.typeOf.number("scale",e),a.e(t)?(t[0]=e,t[1]=0,t[2]=0,t[3]=e,t):new d(e,0,0,e)},d.fromRotation=function(e,t){o.o.typeOf.number("angle",e);var n=Math.cos(e),r=Math.sin(e);return a.e(t)?(t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t):new d(n,-r,r,n)},d.toArray=function(e,t){return o.o.typeOf.object("matrix",e),a.e(t)?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):[e[0],e[1],e[2],e[3]]},d.getElementIndex=function(e,t){return o.o.typeOf.number.greaterThanOrEquals("row",t,0),o.o.typeOf.number.lessThanOrEquals("row",t,1),o.o.typeOf.number.greaterThanOrEquals("column",e,0),o.o.typeOf.number.lessThanOrEquals("column",e,1),2*e+t},d.getColumn=function(e,t,n){o.o.typeOf.object("matrix",e),o.o.typeOf.number.greaterThanOrEquals("index",t,0),o.o.typeOf.number.lessThanOrEquals("index",t,1),o.o.typeOf.object("result",n);var r=2*t,a=e[r],i=e[r+1];return n.x=a,n.y=i,n},d.setColumn=function(e,t,n,r){o.o.typeOf.object("matrix",e),o.o.typeOf.number.greaterThanOrEquals("index",t,0),o.o.typeOf.number.lessThanOrEquals("index",t,1),o.o.typeOf.object("cartesian",n),o.o.typeOf.object("result",r);var a=2*t;return(r=d.clone(e,r))[a]=n.x,r[a+1]=n.y,r},d.getRow=function(e,t,n){o.o.typeOf.object("matrix",e),o.o.typeOf.number.greaterThanOrEquals("index",t,0),o.o.typeOf.number.lessThanOrEquals("index",t,1),o.o.typeOf.object("result",n);var r=e[t],a=e[t+2];return n.x=r,n.y=a,n},d.setRow=function(e,t,n,r){return o.o.typeOf.object("matrix",e),o.o.typeOf.number.greaterThanOrEquals("index",t,0),o.o.typeOf.number.lessThanOrEquals("index",t,1),o.o.typeOf.object("cartesian",n),o.o.typeOf.object("result",r),(r=d.clone(e,r))[t]=n.x,r[t+2]=n.y,r};var p=new t.o;d.getScale=function(e,n){return o.o.typeOf.object("matrix",e),o.o.typeOf.object("result",n),n.x=t.o.magnitude(t.o.fromElements(e[0],e[1],p)),n.y=t.o.magnitude(t.o.fromElements(e[2],e[3],p)),n};var y=new t.o;function h(e,t,n,r){this.x=a.u(e,0),this.y=a.u(t,0),this.z=a.u(n,0),this.w=a.u(r,0)}d.getMaximumScale=function(e){return d.getScale(e,y),t.o.maximumComponent(y)},d.multiply=function(e,t,n){o.o.typeOf.object("left",e),o.o.typeOf.object("right",t),o.o.typeOf.object("result",n);var r=e[0]*t[0]+e[2]*t[1],a=e[0]*t[2]+e[2]*t[3],i=e[1]*t[0]+e[3]*t[1],s=e[1]*t[2]+e[3]*t[3];return n[0]=r,n[1]=i,n[2]=a,n[3]=s,n},d.add=function(e,t,n){return o.o.typeOf.object("left",e),o.o.typeOf.object("right",t),o.o.typeOf.object("result",n),n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n},d.subtract=function(e,t,n){return o.o.typeOf.object("left",e),o.o.typeOf.object("right",t),o.o.typeOf.object("result",n),n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n},d.multiplyByVector=function(e,t,n){o.o.typeOf.object("matrix",e),o.o.typeOf.object("cartesian",t),o.o.typeOf.object("result",n);var r=e[0]*t.x+e[2]*t.y,a=e[1]*t.x+e[3]*t.y;return n.x=r,n.y=a,n},d.multiplyByScalar=function(e,t,n){return o.o.typeOf.object("matrix",e),o.o.typeOf.number("scalar",t),o.o.typeOf.object("result",n),n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n},d.multiplyByScale=function(e,t,n){return o.o.typeOf.object("matrix",e),o.o.typeOf.object("scale",t),o.o.typeOf.object("result",n),n[0]=e[0]*t.x,n[1]=e[1]*t.x,n[2]=e[2]*t.y,n[3]=e[3]*t.y,n},d.negate=function(e,t){return o.o.typeOf.object("matrix",e),o.o.typeOf.object("result",t),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},d.transpose=function(e,t){o.o.typeOf.object("matrix",e),o.o.typeOf.object("result",t);var n=e[0],r=e[2],a=e[1],i=e[3];return t[0]=n,t[1]=r,t[2]=a,t[3]=i,t},d.abs=function(e,t){return o.o.typeOf.object("matrix",e),o.o.typeOf.object("result",t),t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t[3]=Math.abs(e[3]),t},d.equals=function(e,t){return e===t||a.e(e)&&a.e(t)&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},d.equalsArray=function(e,t,n){return e[0]===t[n]&&e[1]===t[n+1]&&e[2]===t[n+2]&&e[3]===t[n+3]},d.equalsEpsilon=function(e,t,n){return o.o.typeOf.number("epsilon",n),e===t||a.e(e)&&a.e(t)&&Math.abs(e[0]-t[0])<=n&&Math.abs(e[1]-t[1])<=n&&Math.abs(e[2]-t[2])<=n&&Math.abs(e[3]-t[3])<=n},d.IDENTITY=Object.freeze(new d(1,0,0,1)),d.ZERO=Object.freeze(new d(0,0,0,0)),d.COLUMN0ROW0=0,d.COLUMN0ROW1=1,d.COLUMN1ROW0=2,d.COLUMN1ROW1=3,Object.defineProperties(d.prototype,{length:{get:function(){return d.packedLength}}}),d.prototype.clone=function(e){return d.clone(this,e)},d.prototype.equals=function(e){return d.equals(this,e)},d.prototype.equalsEpsilon=function(e,t){return d.equalsEpsilon(this,e,t)},d.prototype.toString=function(){return"("+this[0]+", "+this[2]+")\n("+this[1]+", "+this[3]+")"};var m=new n.o;h.fromAxisAngle=function(e,t,r){o.o.typeOf.object("axis",e),o.o.typeOf.number("angle",t);var i=t/2,s=Math.sin(i),u=(m=n.o.normalize(e,m)).x*s,l=m.y*s,c=m.z*s,f=Math.cos(i);return a.e(r)?(r.x=u,r.y=l,r.z=c,r.w=f,r):new h(u,l,c,f)};var w=[1,2,0],O=new Array(3);h.fromRotationMatrix=function(e,t){o.o.typeOf.object("matrix",e);var n,r,s,u,l,c=e[i.p$1.COLUMN0ROW0],f=e[i.p$1.COLUMN1ROW1],d=e[i.p$1.COLUMN2ROW2],p=c+f+d;if(p>0)l=.5*(n=Math.sqrt(p+1)),n=.5/n,r=(e[i.p$1.COLUMN1ROW2]-e[i.p$1.COLUMN2ROW1])*n,s=(e[i.p$1.COLUMN2ROW0]-e[i.p$1.COLUMN0ROW2])*n,u=(e[i.p$1.COLUMN0ROW1]-e[i.p$1.COLUMN1ROW0])*n;else{var y=0;f>c&&(y=1),d>c&&d>f&&(y=2);var m=w[y],b=w[m];n=Math.sqrt(e[i.p$1.getElementIndex(y,y)]-e[i.p$1.getElementIndex(m,m)]-e[i.p$1.getElementIndex(b,b)]+1);var x=O;x[y]=.5*n,n=.5/n,l=(e[i.p$1.getElementIndex(b,m)]-e[i.p$1.getElementIndex(m,b)])*n,x[m]=(e[i.p$1.getElementIndex(m,y)]+e[i.p$1.getElementIndex(y,m)])*n,x[b]=(e[i.p$1.getElementIndex(b,y)]+e[i.p$1.getElementIndex(y,b)])*n,r=-x[0],s=-x[1],u=-x[2]}return a.e(t)?(t.x=r,t.y=s,t.z=u,t.w=l,t):new h(r,s,u,l)};var b=new h,x=new h,E=new h,_=new h;h.fromHeadingPitchRoll=function(e,t){return o.o.typeOf.object("headingPitchRoll",e),_=h.fromAxisAngle(n.o.UNIT_X,e.roll,b),E=h.fromAxisAngle(n.o.UNIT_Y,-e.pitch,t),t=h.multiply(E,_,E),x=h.fromAxisAngle(n.o.UNIT_Z,-e.heading,b),h.multiply(x,t,t)};var v=new n.o,T=new n.o,S=new h,g=new h,D=new h;h.packedLength=4,h.pack=function(e,t,n){return o.o.typeOf.object("value",e),o.o.defined("array",t),n=a.u(n,0),t[n++]=e.x,t[n++]=e.y,t[n++]=e.z,t[n]=e.w,t},h.unpack=function(e,t,n){return o.o.defined("array",e),t=a.u(t,0),a.e(n)||(n=new h),n.x=e[t],n.y=e[t+1],n.z=e[t+2],n.w=e[t+3],n},h.packedInterpolationLength=3,h.convertPackedArrayForInterpolation=function(e,t,n,r){h.unpack(e,4*n,D),h.conjugate(D,D);for(var o=0,a=n-t+1;o<a;o++){var i=3*o;h.unpack(e,4*(t+o),S),h.multiply(S,D,S),S.w<0&&h.negate(S,S),h.computeAxis(S,v);var s=h.computeAngle(S);r[i]=v.x*s,r[i+1]=v.y*s,r[i+2]=v.z*s}},h.unpackInterpolationResult=function(e,t,r,o,i){a.e(i)||(i=new h),n.o.fromArray(e,0,T);var s=n.o.magnitude(T);return h.unpack(t,4*o,g),0===s?h.clone(h.IDENTITY,S):h.fromAxisAngle(T,s,S),h.multiply(S,g,i)},h.clone=function(e,t){if(a.e(e))return a.e(t)?(t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t):new h(e.x,e.y,e.z,e.w)},h.conjugate=function(e,t){return o.o.typeOf.object("quaternion",e),o.o.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=e.w,t},h.magnitudeSquared=function(e){return o.o.typeOf.object("quaternion",e),e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w},h.magnitude=function(e){return Math.sqrt(h.magnitudeSquared(e))},h.normalize=function(e,t){o.o.typeOf.object("result",t);var n=1/h.magnitude(e),r=e.x*n,a=e.y*n,i=e.z*n,s=e.w*n;return t.x=r,t.y=a,t.z=i,t.w=s,t},h.inverse=function(e,t){o.o.typeOf.object("result",t);var n=h.magnitudeSquared(e);return t=h.conjugate(e,t),h.multiplyByScalar(t,1/n,t)},h.add=function(e,t,n){return o.o.typeOf.object("left",e),o.o.typeOf.object("right",t),o.o.typeOf.object("result",n),n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z,n.w=e.w+t.w,n},h.subtract=function(e,t,n){return o.o.typeOf.object("left",e),o.o.typeOf.object("right",t),o.o.typeOf.object("result",n),n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z,n.w=e.w-t.w,n},h.negate=function(e,t){return o.o.typeOf.object("quaternion",e),o.o.typeOf.object("result",t),t.x=-e.x,t.y=-e.y,t.z=-e.z,t.w=-e.w,t},h.dot=function(e,t){return o.o.typeOf.object("left",e),o.o.typeOf.object("right",t),e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},h.multiply=function(e,t,n){o.o.typeOf.object("left",e),o.o.typeOf.object("right",t),o.o.typeOf.object("result",n);var r=e.x,a=e.y,i=e.z,s=e.w,u=t.x,l=t.y,c=t.z,f=t.w,d=s*u+r*f+a*c-i*l,p=s*l-r*c+a*f+i*u,y=s*c+r*l-a*u+i*f,h=s*f-r*u-a*l-i*c;return n.x=d,n.y=p,n.z=y,n.w=h,n},h.multiplyByVec=function(e,t,r){var o=new n.o,a=new n.o,i=new n.o(e.x,e.y,e.z);o=n.o.cross(i,t,o),a=n.o.cross(i,o,a);var s=new n.o;s=n.o.multiplyByScalar(o,2*e.w,s);var u=new n.o;return u=n.o.multiplyByScalar(o,2,u),r=n.o.add(t,s,r),r=n.o.add(r,u,r)},h.multiplyByScalar=function(e,t,n){return o.o.typeOf.object("quaternion",e),o.o.typeOf.number("scalar",t),o.o.typeOf.object("result",n),n.x=e.x*t,n.y=e.y*t,n.z=e.z*t,n.w=e.w*t,n},h.divideByScalar=function(e,t,n){return o.o.typeOf.object("quaternion",e),o.o.typeOf.number("scalar",t),o.o.typeOf.object("result",n),n.x=e.x/t,n.y=e.y/t,n.z=e.z/t,n.w=e.w/t,n},h.computeAxis=function(e,t){o.o.typeOf.object("quaternion",e),o.o.typeOf.object("result",t);var n=e.w;if(Math.abs(n-1)<s.e.EPSILON6)return t.x=t.y=t.z=0,t;var r=1/Math.sqrt(1-n*n);return t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t},h.computeAngle=function(e){return o.o.typeOf.object("quaternion",e),Math.abs(e.w-1)<s.e.EPSILON6?0:2*Math.acos(e.w)};var P=new h;h.lerp=function(e,t,n,r){return o.o.typeOf.object("start",e),o.o.typeOf.object("end",t),o.o.typeOf.number("t",n),o.o.typeOf.object("result",r),P=h.multiplyByScalar(t,n,P),r=h.multiplyByScalar(e,1-n,r),h.add(P,r,r)};var N=new h,C=new h,I=new h;h.slerp=function(e,t,n,r){o.o.typeOf.object("start",e),o.o.typeOf.object("end",t),o.o.typeOf.number("t",n),o.o.typeOf.object("result",r);var a=h.dot(e,t),i=t;if(a<0&&(a=-a,i=N=h.negate(t,N)),1-a<s.e.EPSILON6)return h.lerp(e,i,n,r);var u=Math.acos(a);return C=h.multiplyByScalar(e,Math.sin((1-n)*u),C),I=h.multiplyByScalar(i,Math.sin(n*u),I),r=h.add(C,I,r),h.multiplyByScalar(r,1/Math.sin(u),r)},h.log=function(e,t){o.o.typeOf.object("quaternion",e),o.o.typeOf.object("result",t);var r=s.e.acosClamped(e.w),a=0;return 0!==r&&(a=r/Math.sin(r)),n.o.multiplyByScalar(e,a,t)},h.exp=function(e,t){o.o.typeOf.object("cartesian",e),o.o.typeOf.object("result",t);var r=n.o.magnitude(e),a=0;return 0!==r&&(a=Math.sin(r)/r),t.x=e.x*a,t.y=e.y*a,t.z=e.z*a,t.w=Math.cos(r),t};var j=new n.o,R=new n.o,M=new h,A=new h;h.computeInnerQuadrangle=function(e,t,r,a){o.o.typeOf.object("q0",e),o.o.typeOf.object("q1",t),o.o.typeOf.object("q2",r),o.o.typeOf.object("result",a);var i=h.conjugate(t,M);h.multiply(i,r,A);var s=h.log(A,j);h.multiply(i,e,A);var u=h.log(A,R);return n.o.add(s,u,s),n.o.multiplyByScalar(s,.25,s),n.o.negate(s,s),h.exp(s,M),h.multiply(t,M,a)},h.squad=function(e,t,n,r,a,i){o.o.typeOf.object("q0",e),o.o.typeOf.object("q1",t),o.o.typeOf.object("s0",n),o.o.typeOf.object("s1",r),o.o.typeOf.number("t",a),o.o.typeOf.object("result",i);var s=h.slerp(e,t,a,M),u=h.slerp(n,r,a,A);return h.slerp(s,u,2*a*(1-a),i)};for(var q=new h,U=1.9011074535173003,z=i.s.supportsTypedArrays()?new Float32Array(8):[],F=i.s.supportsTypedArrays()?new Float32Array(8):[],W=i.s.supportsTypedArrays()?new Float32Array(8):[],L=i.s.supportsTypedArrays()?new Float32Array(8):[],$=0;$<7;++$){var k=$+1,Y=2*k+1;z[$]=1/(k*Y),F[$]=k/Y}function B(e,t,n){o.o.defined("array",e),o.o.defined("itemToFind",t),o.o.defined("comparator",n);for(var r,a,i=0,s=e.length-1;i<=s;)if((a=n(e[r=~~((i+s)/2)],t))<0)i=r+1;else{if(!(a>0))return r;s=r-1}return~(s+1)}function G(e,t,n,r,o){this.xPoleWander=e,this.yPoleWander=t,this.xPoleOffset=n,this.yPoleOffset=r,this.ut1MinusUtc=o}function Z(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,n=0,r=t[n++],o=function(e,t,n,r){n||(n=" ");var o=e.length>=t?"":Array(1+t-e.length>>>0).join(n);return r?e+o:o+e},a=function(e,t,n,r,a,i){var s=r-e.length;return s>0&&(e=n||!a?o(e,r,i,n):e.slice(0,t.length)+o("",s,"0",!0)+e.slice(t.length)),e},i=function(e,t,n,r,i,s,u){var l=e>>>0;return e=(n=n&&l&&{2:"0b",8:"0",16:"0x"}[t]||"")+o(l.toString(t),s||0,"0",!1),a(e,n,r,i,u)},s=function(e,t,n,r,o,i){return null!=r&&(e=e.slice(0,r)),a(e,"",t,n,o,i)},u=function(e,r,u,l,c,f,d){var p,y,h,m,w;if("%%"==e)return"%";for(var O=!1,b="",x=!1,E=!1,_=" ",v=u.length,T=0;u&&T<v;T++)switch(u.charAt(T)){case" ":b=" ";break;case"+":b="+";break;case"-":O=!0;break;case"'":_=u.charAt(T+1);break;case"0":x=!0;break;case"#":E=!0}if((l=l?"*"==l?+t[n++]:"*"==l.charAt(0)?+t[l.slice(1,-1)]:+l:0)<0&&(l=-l,O=!0),!isFinite(l))throw new Error("sprintf: (minimum-)width must be finite");switch(f=f?"*"==f?+t[n++]:"*"==f.charAt(0)?+t[f.slice(1,-1)]:+f:"fFeE".indexOf(d)>-1?6:"d"==d?0:void 0,w=r?t[r.slice(0,-1)]:t[n++],d){case"s":return s(String(w),O,l,f,x,_);case"c":return s(String.fromCharCode(+w),O,l,f,x);case"b":return i(w,2,E,O,l,f,x);case"o":return i(w,8,E,O,l,f,x);case"x":return i(w,16,E,O,l,f,x);case"X":return i(w,16,E,O,l,f,x).toUpperCase();case"u":return i(w,10,E,O,l,f,x);case"i":case"d":return p=+w||0,w=(y=(p=Math.round(p-p%1))<0?"-":b)+o(String(Math.abs(p)),f,"0",!1),a(w,y,O,l,x);case"e":case"E":case"f":case"F":case"g":case"G":return y=(p=+w)<0?"-":b,h=["toExponential","toFixed","toPrecision"]["efg".indexOf(d.toLowerCase())],m=["toString","toUpperCase"]["eEfFgG".indexOf(d)%2],w=y+Math.abs(p)[h](f),a(w,y,O,l,x)[m]();default:return e}};return r.replace(e,u)}function V(e,t,n,r,o,a,i,s){this.year=e,this.month=t,this.day=n,this.hour=r,this.minute=o,this.second=a,this.millisecond=i,this.isLeapSecond=s}function J(e){if(null===e||isNaN(e))throw new o.t("year is required and must be a number.");return e%4==0&&e%100!=0||e%400==0}function X(e,t){this.julianDate=e,this.offset=t}z[7]=U/136,F[7]=8*U/17,h.fastSlerp=function(e,t,n,r){o.o.typeOf.object("start",e),o.o.typeOf.object("end",t),o.o.typeOf.number("t",n),o.o.typeOf.object("result",r);var a,i=h.dot(e,t);i>=0?a=1:(a=-1,i=-i);for(var s=i-1,u=1-n,l=n*n,c=u*u,f=7;f>=0;--f)W[f]=(z[f]*l-F[f])*s,L[f]=(z[f]*c-F[f])*s;var d=a*n*(1+W[0]*(1+W[1]*(1+W[2]*(1+W[3]*(1+W[4]*(1+W[5]*(1+W[6]*(1+W[7])))))))),p=u*(1+L[0]*(1+L[1]*(1+L[2]*(1+L[3]*(1+L[4]*(1+L[5]*(1+L[6]*(1+L[7])))))))),y=h.multiplyByScalar(e,p,q);return h.multiplyByScalar(t,d,r),h.add(y,r,r)},h.fastSquad=function(e,t,n,r,a,i){o.o.typeOf.object("q0",e),o.o.typeOf.object("q1",t),o.o.typeOf.object("s0",n),o.o.typeOf.object("s1",r),o.o.typeOf.number("t",a),o.o.typeOf.object("result",i);var s=h.fastSlerp(e,t,a,M),u=h.fastSlerp(n,r,a,A);return h.fastSlerp(s,u,2*a*(1-a),i)},h.equals=function(e,t){return e===t||a.e(e)&&a.e(t)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w},h.equalsEpsilon=function(e,t,n){return o.o.typeOf.number("epsilon",n),e===t||a.e(e)&&a.e(t)&&Math.abs(e.x-t.x)<=n&&Math.abs(e.y-t.y)<=n&&Math.abs(e.z-t.z)<=n&&Math.abs(e.w-t.w)<=n},h.ZERO=Object.freeze(new h(0,0,0,0)),h.IDENTITY=Object.freeze(new h(0,0,0,1)),h.prototype.clone=function(e){return h.clone(this,e)},h.prototype.equals=function(e){return h.equals(this,e)},h.prototype.equalsEpsilon=function(e,t){return h.equalsEpsilon(this,e,t)},h.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"};var H=Object.freeze({SECONDS_PER_MILLISECOND:.001,SECONDS_PER_MINUTE:60,MINUTES_PER_HOUR:60,HOURS_PER_DAY:24,SECONDS_PER_HOUR:3600,MINUTES_PER_DAY:1440,SECONDS_PER_DAY:86400,DAYS_PER_JULIAN_CENTURY:36525,PICOSECOND:1e-9,MODIFIED_JULIAN_DATE_DIFFERENCE:2400000.5}),Q=Object.freeze({UTC:0,TAI:1}),K=new V,ee=[31,28,31,30,31,30,31,31,30,31,30,31];function te(e,t){return we.compare(e.julianDate,t.julianDate)}var ne=new X;function re(e){ne.julianDate=e;var t=we.leapSeconds,n=B(t,ne,te);n<0&&(n=~n),n>=t.length&&(n=t.length-1);var r=t[n].offset;n>0&&(we.secondsDifference(t[n].julianDate,e)>r&&(r=t[--n].offset));we.addSeconds(e,r,e)}function oe(e,t){ne.julianDate=e;var n=we.leapSeconds,r=B(n,ne,te);if(r<0&&(r=~r),0===r)return we.addSeconds(e,-n[0].offset,t);if(r>=n.length)return we.addSeconds(e,-n[r-1].offset,t);var o=we.secondsDifference(n[r].julianDate,e);return 0===o?we.addSeconds(e,-n[r].offset,t):o<=1?void 0:we.addSeconds(e,-n[--r].offset,t)}function ae(e,t,n){var r=t/H.SECONDS_PER_DAY|0;return e+=r,(t-=H.SECONDS_PER_DAY*r)<0&&(e--,t+=H.SECONDS_PER_DAY),n.dayNumber=e,n.secondsOfDay=t,n}function ie(e,t,n,r,o,a,i){var s=(t-14)/12|0,u=e+4800+s,l=(1461*u/4|0)+(367*(t-2-12*s)/12|0)-(3*((u+100)/100|0)/4|0)+n-32075;(r-=12)<0&&(r+=24);var c=a+(r*H.SECONDS_PER_HOUR+o*H.SECONDS_PER_MINUTE+i*H.SECONDS_PER_MILLISECOND);return c>=43200&&(l-=1),[l,c]}var se=/^(\d{4})$/,ue=/^(\d{4})-(\d{2})$/,le=/^(\d{4})-?(\d{3})$/,ce=/^(\d{4})-?W(\d{2})-?(\d{1})?$/,fe=/^(\d{4})-?(\d{2})-?(\d{2})$/,de=/([Z+\-])?(\d{2})?:?(\d{2})?$/,pe=/^(\d{2})(\.\d+)?/.source+de.source,ye=/^(\d{2}):?(\d{2})(\.\d+)?/.source+de.source,he=/^(\d{2}):?(\d{2}):?(\d{2})(\.\d+)?/.source+de.source,me="Invalid ISO 8601 date.";function we(e,t,n){this.dayNumber=void 0,this.secondsOfDay=void 0,e=a.u(e,0),t=a.u(t,0),n=a.u(n,Q.UTC);var r=0|e;ae(r,t+=(e-r)*H.SECONDS_PER_DAY,this),n===Q.UTC&&re(this)}we.fromGregorianDate=function(e,t){if(!(e instanceof V))throw new o.t("date must be a valid GregorianDate.");var n=ie(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond);return a.e(t)?(ae(n[0],n[1],t),re(t),t):new we(n[0],n[1],Q.UTC)},we.fromDate=function(e,t){if(!(e instanceof Date)||isNaN(e.getTime()))throw new o.t("date must be a valid JavaScript Date.");var n=ie(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());return a.e(t)?(ae(n[0],n[1],t),re(t),t):new we(n[0],n[1],Q.UTC)},we.fromIso8601=function(e,t){if("string"!=typeof e)throw new o.t(me);var n,r,i,s,u,l=(e=e.replace(",",".")).split("T"),c=1,f=1,d=0,p=0,y=0,h=0,m=l[0],w=l[1];if(!a.e(m))throw new o.t(me);if(null!==(l=m.match(fe))){if((s=m.split("-").length-1)>0&&2!==s)throw new o.t(me);n=+l[1],c=+l[2],f=+l[3]}else if(null!==(l=m.match(ue)))n=+l[1],c=+l[2];else if(null!==(l=m.match(se)))n=+l[1];else{var O;if(null!==(l=m.match(le))){if(n=+l[1],O=+l[2],i=J(n),O<1||i&&O>366||!i&&O>365)throw new o.t(me)}else{if(null===(l=m.match(ce)))throw new o.t(me);n=+l[1];var b=+l[2],x=+l[3]||0;if((s=m.split("-").length-1)>0&&(!a.e(l[3])&&1!==s||a.e(l[3])&&2!==s))throw new o.t(me);O=7*b+x-new Date(Date.UTC(n,0,4)).getUTCDay()-3}(r=new Date(Date.UTC(n,0,1))).setUTCDate(O),c=r.getUTCMonth()+1,f=r.getUTCDate()}if(i=J(n),c<1||c>12||f<1||(2!==c||!i)&&f>ee[c-1]||i&&2===c&&f>29)throw new o.t(me);if(a.e(w)){if(null!==(l=w.match(he))){if((s=w.split(":").length-1)>0&&2!==s&&3!==s)throw new o.t(me);d=+l[1],p=+l[2],y=+l[3],h=1e3*+(l[4]||0),u=5}else if(null!==(l=w.match(ye))){if((s=w.split(":").length-1)>2)throw new o.t(me);d=+l[1],p=+l[2],y=60*+(l[3]||0),u=4}else{if(null===(l=w.match(pe)))throw new o.t(me);d=+l[1],p=60*+(l[2]||0),u=3}if(p>=60||y>=61||d>24||24===d&&(p>0||y>0||h>0))throw new o.t(me);var E=l[u],_=+l[u+1],v=+(l[u+2]||0);switch(E){case"+":d-=_,p-=v;break;case"-":d+=_,p+=v;break;case"Z":break;default:p+=new Date(Date.UTC(n,c-1,f,d,p)).getTimezoneOffset()}}var T=60===y;for(T&&y--;p>=60;)p-=60,d++;for(;d>=24;)d-=24,f++;for(r=i&&2===c?29:ee[c-1];f>r;)f-=r,++c>12&&(c-=12,n++),r=i&&2===c?29:ee[c-1];for(;p<0;)p+=60,d--;for(;d<0;)d+=24,f--;for(;f<1;)--c<1&&(c+=12,n--),f+=r=i&&2===c?29:ee[c-1];var S=ie(n,c,f,d,p,y,h);return a.e(t)?(ae(S[0],S[1],t),re(t)):t=new we(S[0],S[1],Q.UTC),T&&we.addSeconds(t,1,t),t},we.now=function(e){return we.fromDate(new Date,e)};var Oe=new we(0,0,Q.TAI);function be(e){if(e=a.u(e,a.u.EMPTY_OBJECT),this._dates=void 0,this._samples=void 0,this._dateColumn=-1,this._xPoleWanderRadiansColumn=-1,this._yPoleWanderRadiansColumn=-1,this._ut1MinusUtcSecondsColumn=-1,this._xCelestialPoleOffsetRadiansColumn=-1,this._yCelestialPoleOffsetRadiansColumn=-1,this._taiMinusUtcSecondsColumn=-1,this._columnCount=0,this._lastIndex=-1,this._downloadPromise=void 0,this._dataError=void 0,this._addNewLeapSeconds=a.u(e.addNewLeapSeconds,!0),a.e(e.data))Ee(this,e.data);else if(a.e(e.url)){var t=l.t.createIfNeeded(e.url),n=this;this._downloadPromise=a.o(t.fetchJson(),(function(e){Ee(n,e)}),(function(){n._dataError="An error occurred while retrieving the EOP data from the URL "+t.url+"."}))}else Ee(this,{columnNames:["dateIso8601","modifiedJulianDateUtc","xPoleWanderRadians","yPoleWanderRadians","ut1MinusUtcSeconds","lengthOfDayCorrectionSeconds","xCelestialPoleOffsetRadians","yCelestialPoleOffsetRadians","taiMinusUtcSeconds"],samples:[]})}function xe(e,t){return we.compare(e.julianDate,t)}function Ee(e,t){if(a.e(t.columnNames))if(a.e(t.samples)){var n=t.columnNames.indexOf("modifiedJulianDateUtc"),r=t.columnNames.indexOf("xPoleWanderRadians"),o=t.columnNames.indexOf("yPoleWanderRadians"),i=t.columnNames.indexOf("ut1MinusUtcSeconds"),s=t.columnNames.indexOf("xCelestialPoleOffsetRadians"),u=t.columnNames.indexOf("yCelestialPoleOffsetRadians"),l=t.columnNames.indexOf("taiMinusUtcSeconds");if(n<0||r<0||o<0||i<0||s<0||u<0||l<0)e._dataError="Error in loaded EOP data: The columnNames property must include modifiedJulianDateUtc, xPoleWanderRadians, yPoleWanderRadians, ut1MinusUtcSeconds, xCelestialPoleOffsetRadians, yCelestialPoleOffsetRadians, and taiMinusUtcSeconds columns";else{var c=e._samples=t.samples,f=e._dates=[];e._dateColumn=n,e._xPoleWanderRadiansColumn=r,e._yPoleWanderRadiansColumn=o,e._ut1MinusUtcSecondsColumn=i,e._xCelestialPoleOffsetRadiansColumn=s,e._yCelestialPoleOffsetRadiansColumn=u,e._taiMinusUtcSecondsColumn=l,e._columnCount=t.columnNames.length,e._lastIndex=void 0;for(var d,p=e._addNewLeapSeconds,y=0,h=c.length;y<h;y+=e._columnCount){var m=c[y+n],w=c[y+l],O=new we(m+H.MODIFIED_JULIAN_DATE_DIFFERENCE,w,Q.TAI);if(f.push(O),p){if(w!==d&&a.e(d)){var b=we.leapSeconds,x=B(b,O,xe);if(x<0){var E=new X(O,w);b.splice(~x,0,E)}}d=w}}}}else e._dataError="Error in loaded EOP data: The samples property is required.";else e._dataError="Error in loaded EOP data: The columnNames property is required."}function _e(e,t,n,r,o){var a=n*r;o.xPoleWander=t[a+e._xPoleWanderRadiansColumn],o.yPoleWander=t[a+e._yPoleWanderRadiansColumn],o.xPoleOffset=t[a+e._xCelestialPoleOffsetRadiansColumn],o.yPoleOffset=t[a+e._yCelestialPoleOffsetRadiansColumn],o.ut1MinusUtc=t[a+e._ut1MinusUtcSecondsColumn]}function ve(e,t,n){return t+e*(n-t)}function Te(e,t,n,r,o,a,i){var s=e._columnCount;if(a>t.length-1)return i.xPoleWander=0,i.yPoleWander=0,i.xPoleOffset=0,i.yPoleOffset=0,i.ut1MinusUtc=0,i;var u=t[o],l=t[a];if(u.equals(l)||r.equals(u))return _e(e,n,o,s,i),i;if(r.equals(l))return _e(e,n,a,s,i),i;var c=we.secondsDifference(r,u)/we.secondsDifference(l,u),f=o*s,d=a*s,p=n[f+e._ut1MinusUtcSecondsColumn],y=n[d+e._ut1MinusUtcSecondsColumn],h=y-p;if(h>.5||h<-.5){var m=n[f+e._taiMinusUtcSecondsColumn],w=n[d+e._taiMinusUtcSecondsColumn];m!==w&&(l.equals(r)?p=y:y-=w-m)}return i.xPoleWander=ve(c,n[f+e._xPoleWanderRadiansColumn],n[d+e._xPoleWanderRadiansColumn]),i.yPoleWander=ve(c,n[f+e._yPoleWanderRadiansColumn],n[d+e._yPoleWanderRadiansColumn]),i.xPoleOffset=ve(c,n[f+e._xCelestialPoleOffsetRadiansColumn],n[d+e._xCelestialPoleOffsetRadiansColumn]),i.yPoleOffset=ve(c,n[f+e._yCelestialPoleOffsetRadiansColumn],n[d+e._yCelestialPoleOffsetRadiansColumn]),i.ut1MinusUtc=ve(c,p,y),i}function Se(e,t,n){this.heading=a.u(e,0),this.pitch=a.u(t,0),this.roll=a.u(n,0)}function ge(e,t,n){this.x=e,this.y=t,this.s=n}function De(e){e=a.u(e,a.u.EMPTY_OBJECT),this._xysFileUrlTemplate=l.t.createIfNeeded(e.xysFileUrlTemplate),this._interpolationOrder=a.u(e.interpolationOrder,9),this._sampleZeroJulianEphemerisDate=a.u(e.sampleZeroJulianEphemerisDate,2442396.5),this._sampleZeroDateTT=new we(this._sampleZeroJulianEphemerisDate,0,Q.TAI),this._stepSizeDays=a.u(e.stepSizeDays,1),this._samplesPerXysFile=a.u(e.samplesPerXysFile,1e3),this._totalSamples=a.u(e.totalSamples,27426),this._samples=new Array(3*this._totalSamples),this._chunkDownloadsInProgress=[];for(var t=this._interpolationOrder,n=this._denominators=new Array(t+1),r=this._xTable=new Array(t+1),o=Math.pow(this._stepSizeDays,t),i=0;i<=t;++i){n[i]=o,r[i]=i*this._stepSizeDays;for(var s=0;s<=t;++s)s!==i&&(n[i]*=i-s);n[i]=1/n[i]}this._work=new Array(t+1),this._coef=new Array(t+1)}we.toGregorianDate=function(e,t){if(!a.e(e))throw new o.t("julianDate is required.");var n=!1,r=oe(e,Oe);a.e(r)||(we.addSeconds(e,-1,Oe),r=oe(Oe,Oe),n=!0);var i=r.dayNumber,s=r.secondsOfDay;s>=43200&&(i+=1);var u=i+68569|0,l=4*u/146097|0,c=4e3*((u=u-((146097*l+3)/4|0)|0)+1)/1461001|0,f=80*(u=u-(1461*c/4|0)+31|0)/2447|0,d=u-(2447*f/80|0)|0,p=f+2-12*(u=f/11|0)|0,y=100*(l-49)+c+u|0,h=s/H.SECONDS_PER_HOUR|0,m=s-h*H.SECONDS_PER_HOUR,w=m/H.SECONDS_PER_MINUTE|0,O=0|(m-=w*H.SECONDS_PER_MINUTE),b=(m-O)/H.SECONDS_PER_MILLISECOND;return(h+=12)>23&&(h-=24),n&&(O+=1),a.e(t)?(t.year=y,t.month=p,t.day=d,t.hour=h,t.minute=w,t.second=O,t.millisecond=b,t.isLeapSecond=n,t):new V(y,p,d,h,w,O,b,n)},we.toDate=function(e){if(!a.e(e))throw new o.t("julianDate is required.");var t=we.toGregorianDate(e,K),n=t.second;return t.isLeapSecond&&(n-=1),new Date(Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,n,t.millisecond))},we.toIso8601=function(e,t){if(!a.e(e))throw new o.t("julianDate is required.");var n=we.toGregorianDate(e,K),r=n.year,i=n.month,s=n.day,u=n.hour,l=n.minute,c=n.second,f=n.millisecond;return 1e4===r&&1===i&&1===s&&0===u&&0===l&&0===c&&0===f&&(r=9999,i=12,s=31,u=24),a.e(t)||0===f?a.e(t)&&0!==t?Z("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",r,i,s,u,l,c,(.01*f).toFixed(t).replace(".","").slice(0,t)):Z("%04d-%02d-%02dT%02d:%02d:%02dZ",r,i,s,u,l,c):Z("%04d-%02d-%02dT%02d:%02d:%02d.%sZ",r,i,s,u,l,c,(.01*f).toString().replace(".",""))},we.clone=function(e,t){if(a.e(e))return a.e(t)?(t.dayNumber=e.dayNumber,t.secondsOfDay=e.secondsOfDay,t):new we(e.dayNumber,e.secondsOfDay,Q.TAI)},we.compare=function(e,t){if(!a.e(e))throw new o.t("left is required.");if(!a.e(t))throw new o.t("right is required.");var n=e.dayNumber-t.dayNumber;return 0!==n?n:e.secondsOfDay-t.secondsOfDay},we.equals=function(e,t){return e===t||a.e(e)&&a.e(t)&&e.dayNumber===t.dayNumber&&e.secondsOfDay===t.secondsOfDay},we.equalsEpsilon=function(e,t,n){if(!a.e(n))throw new o.t("epsilon is required.");return e===t||a.e(e)&&a.e(t)&&Math.abs(we.secondsDifference(e,t))<=n},we.totalDays=function(e){if(!a.e(e))throw new o.t("julianDate is required.");return e.dayNumber+e.secondsOfDay/H.SECONDS_PER_DAY},we.secondsDifference=function(e,t){if(!a.e(e))throw new o.t("left is required.");if(!a.e(t))throw new o.t("right is required.");return(e.dayNumber-t.dayNumber)*H.SECONDS_PER_DAY+(e.secondsOfDay-t.secondsOfDay)},we.daysDifference=function(e,t){if(!a.e(e))throw new o.t("left is required.");if(!a.e(t))throw new o.t("right is required.");return e.dayNumber-t.dayNumber+(e.secondsOfDay-t.secondsOfDay)/H.SECONDS_PER_DAY},we.computeTaiMinusUtc=function(e){ne.julianDate=e;var t=we.leapSeconds,n=B(t,ne,te);return n<0&&(n=~n,--n<0&&(n=0)),t[n].offset},we.addSeconds=function(e,t,n){if(!a.e(e))throw new o.t("julianDate is required.");if(!a.e(t))throw new o.t("seconds is required.");if(!a.e(n))throw new o.t("result is required.");return ae(e.dayNumber,e.secondsOfDay+t,n)},we.addMinutes=function(e,t,n){if(!a.e(e))throw new o.t("julianDate is required.");if(!a.e(t))throw new o.t("minutes is required.");if(!a.e(n))throw new o.t("result is required.");var r=e.secondsOfDay+t*H.SECONDS_PER_MINUTE;return ae(e.dayNumber,r,n)},we.addHours=function(e,t,n){if(!a.e(e))throw new o.t("julianDate is required.");if(!a.e(t))throw new o.t("hours is required.");if(!a.e(n))throw new o.t("result is required.");var r=e.secondsOfDay+t*H.SECONDS_PER_HOUR;return ae(e.dayNumber,r,n)},we.addDays=function(e,t,n){if(!a.e(e))throw new o.t("julianDate is required.");if(!a.e(t))throw new o.t("days is required.");if(!a.e(n))throw new o.t("result is required.");return ae(e.dayNumber+t,e.secondsOfDay,n)},we.lessThan=function(e,t){return we.compare(e,t)<0},we.lessThanOrEquals=function(e,t){return we.compare(e,t)<=0},we.greaterThan=function(e,t){return we.compare(e,t)>0},we.greaterThanOrEquals=function(e,t){return we.compare(e,t)>=0},we.prototype.clone=function(e){return we.clone(this,e)},we.prototype.equals=function(e){return we.equals(this,e)},we.prototype.equalsEpsilon=function(e,t){return we.equalsEpsilon(this,e,t)},we.prototype.toString=function(){return we.toIso8601(this)},we.leapSeconds=[new X(new we(2441317,43210,Q.TAI),10),new X(new we(2441499,43211,Q.TAI),11),new X(new we(2441683,43212,Q.TAI),12),new X(new we(2442048,43213,Q.TAI),13),new X(new we(2442413,43214,Q.TAI),14),new X(new we(2442778,43215,Q.TAI),15),new X(new we(2443144,43216,Q.TAI),16),new X(new we(2443509,43217,Q.TAI),17),new X(new we(2443874,43218,Q.TAI),18),new X(new we(2444239,43219,Q.TAI),19),new X(new we(2444786,43220,Q.TAI),20),new X(new we(2445151,43221,Q.TAI),21),new X(new we(2445516,43222,Q.TAI),22),new X(new we(2446247,43223,Q.TAI),23),new X(new we(2447161,43224,Q.TAI),24),new X(new we(2447892,43225,Q.TAI),25),new X(new we(2448257,43226,Q.TAI),26),new X(new we(2448804,43227,Q.TAI),27),new X(new we(2449169,43228,Q.TAI),28),new X(new we(2449534,43229,Q.TAI),29),new X(new we(2450083,43230,Q.TAI),30),new X(new we(2450630,43231,Q.TAI),31),new X(new we(2451179,43232,Q.TAI),32),new X(new we(2453736,43233,Q.TAI),33),new X(new we(2454832,43234,Q.TAI),34),new X(new we(2456109,43235,Q.TAI),35),new X(new we(2457204,43236,Q.TAI),36),new X(new we(2457754,43237,Q.TAI),37)],be.NONE=Object.freeze({getPromiseToLoad:function(){return a.o()},compute:function(e,t){return a.e(t)?(t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0):t=new G(0,0,0,0,0),t}}),be.prototype.getPromiseToLoad=function(){return a.o(this._downloadPromise)},be.prototype.compute=function(e,t){if(a.e(this._samples)){if(a.e(t)||(t=new G(0,0,0,0,0)),0===this._samples.length)return t.xPoleWander=0,t.yPoleWander=0,t.xPoleOffset=0,t.yPoleOffset=0,t.ut1MinusUtc=0,t;var n=this._dates,r=this._lastIndex,o=0,i=0;if(a.e(r)){var s=n[r],u=n[r+1],l=we.lessThanOrEquals(s,e),f=!a.e(u),d=f||we.greaterThanOrEquals(u,e);if(l&&d)return o=r,!f&&u.equals(e)&&++o,i=o+1,Te(this,n,this._samples,e,o,i,t),t}var p=B(n,e,we.compare,this._dateColumn);return p>=0?(p<n.length-1&&n[p+1].equals(e)&&++p,o=p,i=p):(o=(i=~p)-1)<0&&(o=0),this._lastIndex=o,Te(this,n,this._samples,e,o,i,t),t}if(a.e(this._dataError))throw new c.t(this._dataError)},Se.fromQuaternion=function(e,t){if(!a.e(e))throw new o.t("quaternion is required");a.e(t)||(t=new Se);var n=2*(e.w*e.y-e.z*e.x),r=1-2*(e.x*e.x+e.y*e.y),i=2*(e.w*e.x+e.y*e.z),u=1-2*(e.y*e.y+e.z*e.z),l=2*(e.w*e.z+e.x*e.y);return t.heading=-Math.atan2(l,u),t.roll=Math.atan2(i,r),t.pitch=-s.e.asinClamped(n),t},Se.fromDegrees=function(e,t,n,r){if(!a.e(e))throw new o.t("heading is required");if(!a.e(t))throw new o.t("pitch is required");if(!a.e(n))throw new o.t("roll is required");return a.e(r)||(r=new Se),r.heading=e*s.e.RADIANS_PER_DEGREE,r.pitch=t*s.e.RADIANS_PER_DEGREE,r.roll=n*s.e.RADIANS_PER_DEGREE,r},Se.clone=function(e,t){if(a.e(e))return a.e(t)?(t.heading=e.heading,t.pitch=e.pitch,t.roll=e.roll,t):new Se(e.heading,e.pitch,e.roll)},Se.equals=function(e,t){return e===t||a.e(e)&&a.e(t)&&e.heading===t.heading&&e.pitch===t.pitch&&e.roll===t.roll},Se.equalsEpsilon=function(e,t,n,r){return e===t||a.e(e)&&a.e(t)&&s.e.equalsEpsilon(e.heading,t.heading,n,r)&&s.e.equalsEpsilon(e.pitch,t.pitch,n,r)&&s.e.equalsEpsilon(e.roll,t.roll,n,r)},Se.prototype.clone=function(e){return Se.clone(this,e)},Se.prototype.equals=function(e){return Se.equals(this,e)},Se.prototype.equalsEpsilon=function(e,t,n){return Se.equalsEpsilon(this,e,t,n)},Se.prototype.toString=function(){return"("+this.heading+", "+this.pitch+", "+this.roll+")"};var Pe=new we(0,0,Q.TAI);function Ne(e,t,n){var r=Pe;return r.dayNumber=t,r.secondsOfDay=n,we.daysDifference(r,e._sampleZeroDateTT)}function Ce(e,t){if(e._chunkDownloadsInProgress[t])return e._chunkDownloadsInProgress[t];var n=a.o.defer();e._chunkDownloadsInProgress[t]=n;var r,o=e._xysFileUrlTemplate;return r=a.e(o)?o.getDerivedResource({templateValues:{0:t}}):new l.t({url:l.n$1("Assets/IAU2006_XYS/IAU2006_XYS_"+t+".json")}),a.o(r.fetchJson(),(function(r){e._chunkDownloadsInProgress[t]=!1;for(var o=e._samples,a=r.samples,i=t*e._samplesPerXysFile*3,s=0,u=a.length;s<u;++s)o[i+s]=a[s];n.resolve()})),n.promise}De.prototype.preload=function(e,t,n,r){var o=Ne(this,e,t),i=Ne(this,n,r),s=o/this._stepSizeDays-this._interpolationOrder/2|0;s<0&&(s=0);var u=i/this._stepSizeDays-this._interpolationOrder/2|0+this._interpolationOrder;u>=this._totalSamples&&(u=this._totalSamples-1);for(var l=s/this._samplesPerXysFile|0,c=u/this._samplesPerXysFile|0,f=[],d=l;d<=c;++d)f.push(Ce(this,d));return a.o.all(f)},De.prototype.computeXysRadians=function(e,t,n){var r=Ne(this,e,t);if(!(r<0)){var o=r/this._stepSizeDays|0;if(!(o>=this._totalSamples)){var i=this._interpolationOrder,s=o-(i/2|0);s<0&&(s=0);var u=s+i;u>=this._totalSamples&&((s=(u=this._totalSamples-1)-i)<0&&(s=0));var l=!1,c=this._samples;if(a.e(c[3*s])||(Ce(this,s/this._samplesPerXysFile|0),l=!0),a.e(c[3*u])||(Ce(this,u/this._samplesPerXysFile|0),l=!0),!l){a.e(n)?(n.x=0,n.y=0,n.s=0):n=new ge(0,0,0);var f,d,p=r-s*this._stepSizeDays,y=this._work,h=this._denominators,m=this._coef,w=this._xTable;for(f=0;f<=i;++f)y[f]=p-w[f];for(f=0;f<=i;++f){for(m[f]=1,d=0;d<=i;++d)d!==f&&(m[f]*=y[d]);m[f]*=h[f];var O=3*(s+f);n.x+=m[f]*c[O++],n.y+=m[f]*c[O++],n.s+=m[f]*c[O]}return n}}}};var Ie={},je={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Re={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Me={},Ae={east:new n.o,north:new n.o,up:new n.o,west:new n.o,south:new n.o,down:new n.o},qe=new n.o,Ue=new n.o,ze=new n.o;Ie.localFrameToFixedFrameGenerator=function(e,r){if(!je.hasOwnProperty(e)||!je[e].hasOwnProperty(r))throw new o.t("firstAxis and secondAxis must be east, north, up, west, south or down.");var u,l=je[e][r],c=e+r;return a.e(Me[c])?u=Me[c]:(u=function(u,c,f){if(!a.e(u))throw new o.t("origin is required.");if(a.e(f)||(f=new i.p),n.o.equalsEpsilon(u,n.o.ZERO,s.e.EPSILON14))n.o.unpack(Re[e],0,qe),n.o.unpack(Re[r],0,Ue),n.o.unpack(Re[l],0,ze);else if(s.e.equalsEpsilon(u.x,0,s.e.EPSILON14)&&s.e.equalsEpsilon(u.y,0,s.e.EPSILON14)){var d=s.e.sign(u.z);n.o.unpack(Re[e],0,qe),"east"!==e&&"west"!==e&&n.o.multiplyByScalar(qe,d,qe),n.o.unpack(Re[r],0,Ue),"east"!==r&&"west"!==r&&n.o.multiplyByScalar(Ue,d,Ue),n.o.unpack(Re[l],0,ze),"east"!==l&&"west"!==l&&n.o.multiplyByScalar(ze,d,ze)}else{(c=a.u(c,t.t.WGS84)).geodeticSurfaceNormal(u,Ae.up);var p=Ae.up,y=Ae.east;y.x=-u.y,y.y=u.x,y.z=0,n.o.normalize(y,Ae.east),n.o.cross(p,y,Ae.north),n.o.multiplyByScalar(Ae.up,-1,Ae.down),n.o.multiplyByScalar(Ae.east,-1,Ae.west),n.o.multiplyByScalar(Ae.north,-1,Ae.south),qe=Ae[e],Ue=Ae[r],ze=Ae[l]}return f[0]=qe.x,f[1]=qe.y,f[2]=qe.z,f[3]=0,f[4]=Ue.x,f[5]=Ue.y,f[6]=Ue.z,f[7]=0,f[8]=ze.x,f[9]=ze.y,f[10]=ze.z,f[11]=0,f[12]=u.x,f[13]=u.y,f[14]=u.z,f[15]=1,f},Me[c]=u),u},Ie.eastNorthUpToFixedFrame=Ie.localFrameToFixedFrameGenerator("east","north"),Ie.northEastDownToFixedFrame=Ie.localFrameToFixedFrameGenerator("north","east"),Ie.northUpEastToFixedFrame=Ie.localFrameToFixedFrameGenerator("north","up"),Ie.northWestUpToFixedFrame=Ie.localFrameToFixedFrameGenerator("north","west");var Fe=new h,We=new n.o(1,1,1),Le=new i.p;Ie.headingPitchRollToFixedFrame=function(e,t,r,s,u){o.o.typeOf.object("HeadingPitchRoll",t),s=a.u(s,Ie.eastNorthUpToFixedFrame);var l=h.fromHeadingPitchRoll(t,Fe),c=i.p.fromTranslationQuaternionRotationScale(n.o.ZERO,l,We,Le);return u=s(e,r,u),i.p.multiply(u,c,u)};var $e=new i.p,ke=new i.p$1;Ie.headingPitchRollQuaternion=function(e,t,n,r,a){o.o.typeOf.object("HeadingPitchRoll",t);var s=Ie.headingPitchRollToFixedFrame(e,t,n,r,$e),u=i.p.getMatrix3(s,ke);return h.fromRotationMatrix(u,a)};var Ye=new n.o(1,1,1),Be=new n.o,Ge=new i.p,Ze=new i.p,Ve=new i.p$1,Je=new h;Ie.fixedFrameToHeadingPitchRoll=function(e,r,s,u){o.o.defined("transform",e),r=a.u(r,t.t.WGS84),s=a.u(s,Ie.eastNorthUpToFixedFrame),a.e(u)||(u=new Se);var l=i.p.getTranslation(e,Be);if(n.o.equals(l,n.o.ZERO))return u.heading=0,u.pitch=0,u.roll=0,u;var c=i.p.inverseTransformation(s(l,r,Ge),Ge),f=i.p.setScale(e,Ye,Ze);f=i.p.setTranslation(f,n.o.ZERO,f),c=i.p.multiply(c,f,c);var d=h.fromRotationMatrix(i.p.getMatrix3(c,Ve),Je);return d=h.normalize(d,d),Se.fromQuaternion(d,u)};var Xe=s.e.TWO_PI/86400,He=new we;Ie.computeTemeToPseudoFixedMatrix=function(e,t){if(!a.e(e))throw new o.t("date is required.");var n,r=(He=we.addSeconds(e,-we.computeTaiMinusUtc(e),He)).dayNumber,u=He.secondsOfDay,l=r-2451545,c=(24110.54841+(n=u>=43200?(l+.5)/H.DAYS_PER_JULIAN_CENTURY:(l-.5)/H.DAYS_PER_JULIAN_CENTURY)*(8640184.812866+n*(.093104+-62e-7*n)))*Xe%s.e.TWO_PI+(72921158553e-15+11772758384668e-32*(r-2451545.5))*((u+.5*H.SECONDS_PER_DAY)%H.SECONDS_PER_DAY),f=Math.cos(c),d=Math.sin(c);return a.e(t)?(t[0]=f,t[1]=-d,t[2]=0,t[3]=d,t[4]=f,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t):new i.p$1(f,d,0,-d,f,0,0,0,1)},Ie.iau2006XysData=new De,Ie.earthOrientationParameters=be.NONE;var Qe=32.184;Ie.preloadIcrfFixed=function(e){var t=e.start.dayNumber,n=e.start.secondsOfDay+Qe,r=e.stop.dayNumber,o=e.stop.secondsOfDay+Qe,i=Ie.iau2006XysData.preload(t,n,r,o),s=Ie.earthOrientationParameters.getPromiseToLoad();return a.o.all([i,s])},Ie.computeIcrfToFixedMatrix=function(e,t){if(!a.e(e))throw new o.t("date is required.");a.e(t)||(t=new i.p$1);var n=Ie.computeFixedToIcrfMatrix(e,t);if(a.e(n))return i.p$1.transpose(n,t)};var Ke=new ge(0,0,0),et=new G(0,0,0,0,0,0),tt=new i.p$1,nt=new i.p$1;Ie.computeFixedToIcrfMatrix=function(e,t){if(!a.e(e))throw new o.t("date is required.");a.e(t)||(t=new i.p$1);var n=Ie.earthOrientationParameters.compute(e,et);if(a.e(n)){var r=e.dayNumber,u=e.secondsOfDay+Qe,l=Ie.iau2006XysData.computeXysRadians(r,u,Ke);if(a.e(l)){var c=l.x+n.xPoleOffset,f=l.y+n.yPoleOffset,d=1/(1+Math.sqrt(1-c*c-f*f)),p=tt;p[0]=1-d*c*c,p[3]=-d*c*f,p[6]=c,p[1]=-d*c*f,p[4]=1-d*f*f,p[7]=f,p[2]=-c,p[5]=-f,p[8]=1-d*(c*c+f*f);var y=i.p$1.fromRotationZ(-l.s,nt),h=i.p$1.multiply(p,y,tt),m=e.dayNumber-2451545,w=(e.secondsOfDay-we.computeTaiMinusUtc(e)+n.ut1MinusUtc)/H.SECONDS_PER_DAY,O=.779057273264+w+.00273781191135448*(m+w);O=O%1*s.e.TWO_PI;var b=i.p$1.fromRotationZ(O,nt),x=i.p$1.multiply(h,b,tt),E=Math.cos(n.xPoleWander),_=Math.cos(n.yPoleWander),v=Math.sin(n.xPoleWander),T=Math.sin(n.yPoleWander),S=r-2451545+u/H.SECONDS_PER_DAY,g=-47e-6*(S/=36525)*s.e.RADIANS_PER_DEGREE/3600,D=Math.cos(g),P=Math.sin(g),N=nt;return N[0]=E*D,N[1]=E*P,N[2]=v,N[3]=-_*P+T*v*D,N[4]=_*D+T*v*P,N[5]=-T*E,N[6]=-T*P-_*v*D,N[7]=T*D-_*v*P,N[8]=_*E,i.p$1.multiply(x,N,t)}}};var rt=new u.e;Ie.pointToWindowCoordinates=function(e,t,n,r){return(r=Ie.pointToGLWindowCoordinates(e,t,n,r)).y=2*t[5]-r.y,r},Ie.pointToGLWindowCoordinates=function(e,n,r,s){if(!a.e(e))throw new o.t("modelViewProjectionMatrix is required.");if(!a.e(n))throw new o.t("viewportTransformation is required.");if(!a.e(r))throw new o.t("point is required.");a.e(s)||(s=new t.o);var l=rt;return i.p.multiplyByVector(e,u.e.fromElements(r.x,r.y,r.z,1,l),l),u.e.multiplyByScalar(l,1/l.w,l),i.p.multiplyByVector(n,l,l),t.o.fromCartesian4(l,s)};var ot=new n.o,at=new n.o,it=new n.o;Ie.rotationMatrixFromPositionVelocity=function(e,r,u,l){if(!a.e(e))throw new o.t("position is required.");if(!a.e(r))throw new o.t("velocity is required.");var c=a.u(u,t.t.WGS84).geodeticSurfaceNormal(e,ot),f=n.o.cross(r,c,at);n.o.equalsEpsilon(f,n.o.ZERO,s.e.EPSILON6)&&(f=n.o.clone(n.o.UNIT_X,f));var d=n.o.cross(f,r,it);return n.o.normalize(d,d),n.o.cross(r,d,f),n.o.negate(f,f),n.o.normalize(f,f),a.e(l)||(l=new i.p$1),l[0]=r.x,l[1]=r.y,l[2]=r.z,l[3]=f.x,l[4]=f.y,l[5]=f.z,l[6]=d.x,l[7]=d.y,l[8]=d.z,l};var st=new i.p(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),ut=new r.a,lt=new n.o,ct=new n.o,ft=new i.p$1,dt=new i.p,pt=new i.p;function yt(e){e=a.u(e,a.u.EMPTY_OBJECT),o.o.typeOf.object("options.attributes",e.attributes),this.attributes=e.attributes,this.indices=e.indices,this.primitiveType=a.u(e.primitiveType,i._0x4b6a27.TRIANGLES),this.boundingSphere=e.boundingSphere,this.geometryType=a.u(e.geometryType,f.NONE),this.boundingSphereCV=e.boundingSphereCV,this.offsetAttribute=e.offsetAttribute}Ie.basisTo2D=function(e,t,r){if(!a.e(e))throw new o.t("projection is required.");if(!a.e(t))throw new o.t("matrix is required.");if(!a.e(r))throw new o.t("result is required.");var s=i.p.getTranslation(t,ct),u=e.ellipsoid,l=u.cartesianToCartographic(s,ut),c=e.project(l,lt);n.o.fromElements(c.z,c.x,c.y,c);var f=Ie.eastNorthUpToFixedFrame(s,u,dt),d=i.p.inverseTransformation(f,pt),p=i.p.getMatrix3(t,ft),y=i.p.multiplyByMatrix3(d,p,r);return i.p.multiply(st,y,r),i.p.setTranslation(r,c,r),r},Ie.wgs84To2DModelMatrix=function(e,t,r){if(!a.e(e))throw new o.t("projection is required.");if(!a.e(t))throw new o.t("center is required.");if(!a.e(r))throw new o.t("result is required.");var s=e.ellipsoid,u=Ie.eastNorthUpToFixedFrame(t,s,dt),l=i.p.inverseTransformation(u,pt),c=s.cartesianToCartographic(t,ut),f=e.project(c,lt);n.o.fromElements(f.z,f.x,f.y,f);var d=i.p.fromTranslation(f,dt);return i.p.multiply(st,l,r),i.p.multiply(d,r,r),r},Ie.buildUp=function(e,t){var r=t.clone(),o=e.clone();o=n.o.normalize(o,o),Math.abs(n.o.dot(o,r))>=1&&(o=Math.abs(n.o.dot(r,n.o.UNIT_Y))<1?n.o.clone(n.o.UNIT_Y,o):n.o.clone(n.o.UNIT_Z,o));var a=new n.o;return n.o.cross(o,r,a),a=n.o.normalize(a,a),n.o.cross(r,a,o),o=n.o.normalize(o,o)},Ie.getHeading=function(e,t){var n;return n=s.e.equalsEpsilon(Math.abs(e.z),1,s.e.EPSILON3)?Math.atan2(t.y,t.x)-s.e.PI_OVER_TWO:Math.atan2(e.y,e.x)-s.e.PI_OVER_TWO,s.e.TWO_PI-s.e.zeroToTwoPi(n)},Ie.convertToColumbusCartesian=function(e){var t=new l.n,o=t.ellipsoid,a=new n.o,i=new r.a;return o.cartesianToCartographic(e,i),t.project(i,a),n.o.fromElements(a.z,a.x,a.y)},Ie.convertTo3DCartesian=function(e){var t=new l.n,o=t.ellipsoid,a=new n.o,i=new r.a;return a=n.o.fromElements(e.y,e.z,e.x),t.unproject(a,i),o.cartographicToCartesian(i,a)},yt.computeNumberOfVertices=function(e){o.o.typeOf.object("geometry",e);var t=-1;for(var n in e.attributes)if(e.attributes.hasOwnProperty(n)&&a.e(e.attributes[n])&&a.e(e.attributes[n].values)){var r=e.attributes[n];if(r.isInstanceAttribute)continue;var i=r.values.length/r.componentsPerAttribute;if(t!==i&&-1!==t)throw new o.t("All attribute lists must have the same number of attributes.");t=i}return t};var ht=new r.a,mt=new n.o,wt=new i.p,Ot=[new r.a,new r.a,new r.a],bt=[new t.o,new t.o,new t.o],xt=[new t.o,new t.o,new t.o],Et=new n.o,_t=new h,vt=new i.p,Tt=new d;yt._textureCoordinateRotationPoints=function(e,o,a,s){var u,l=t.h.center(s,ht),c=r.a.toCartesian(l,a,mt),f=Ie.eastNorthUpToFixedFrame(c,a,wt),p=i.p.inverse(f,wt),y=bt,m=Ot;m[0].longitude=s.west,m[0].latitude=s.south,m[1].longitude=s.west,m[1].latitude=s.north,m[2].longitude=s.east,m[2].latitude=s.south;var w=Et;for(u=0;u<3;u++)r.a.toCartesian(m[u],a,w),w=i.p.multiplyByPointAsVector(p,w,w),y[u].x=w.x,y[u].y=w.y;var O=h.fromAxisAngle(n.o.UNIT_Z,-o,_t),b=i.p$1.fromQuaternion(O,vt),x=e.length,E=Number.POSITIVE_INFINITY,_=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,T=Number.NEGATIVE_INFINITY;for(u=0;u<x;u++)w=i.p.multiplyByPointAsVector(p,e[u],w),w=i.p$1.multiplyByVector(b,w,w),E=Math.min(E,w.x),_=Math.min(_,w.y),v=Math.max(v,w.x),T=Math.max(T,w.y);var S=d.fromRotation(o,Tt),g=xt;g[0].x=E,g[0].y=_,g[1].x=E,g[1].y=T,g[2].x=v,g[2].y=_;var D=y[0],P=y[2].x-D.x,N=y[1].y-D.y;for(u=0;u<3;u++){var C=g[u];d.multiplyByVector(S,C,C),C.x=(C.x-D.x)/P,C.y=(C.y-D.y)/N}var I=g[0],j=g[1],R=g[2],M=new Array(6);return t.o.pack(I,M),t.o.pack(j,M,2),t.o.pack(R,M,4),M},e.I=yt,e.Me=f,e.f=d,e.m=Ie,e.n=h,e.o=function(e){if(e=a.u(e,a.u.EMPTY_OBJECT),!a.e(e.componentDatatype))throw new o.t("options.componentDatatype is required.");if(!a.e(e.componentsPerAttribute))throw new o.t("options.componentsPerAttribute is required.");if(e.componentsPerAttribute<1||e.componentsPerAttribute>4)throw new o.t("options.componentsPerAttribute must be between 1 and 4.");if(!a.e(e.values))throw new o.t("options.values is required.");this.componentDatatype=e.componentDatatype,this.componentsPerAttribute=e.componentsPerAttribute,this.normalize=a.u(e.normalize,!1),this.values=e.values}}));
